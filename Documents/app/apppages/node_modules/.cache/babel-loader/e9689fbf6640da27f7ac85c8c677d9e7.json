{"remainingRequest":"/Users/huangshuai/Documents/apppages/node_modules/babel-loader/lib/index.js!/Users/huangshuai/Documents/apppages/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangshuai/Documents/apppages/src/views/QuestionBank.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huangshuai/Documents/apppages/src/views/QuestionBank.vue","mtime":1544008166450},{"path":"/Users/huangshuai/Documents/apppages/node_modules/cache-loader/dist/cjs.js","mtime":1542800631269},{"path":"/Users/huangshuai/Documents/apppages/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/cache-loader/dist/cjs.js","mtime":1542800631269},{"path":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//import xxx from 'xxx.vue'  //引入组建\n//import 'xxxx'  //引入JS\nexport default {\n  name: \"QuestionBank\",\n  data: function data() {\n    return {\n      questionBankUrl: this.$store.state.evaluating,\n      titles: \"\",\n      hint: \"温馨提示：点击选择评测人员可针对不同的人测评\",\n      submitSucceedShow: false,\n      submitBtnShow: true,\n      index: 0,\n      questionBanList: [],\n      selectFigure: false,\n      aProblem: [],\n      aProblemTeacherlist: [],\n      aProblemIndex: 0,\n      teacherlist: [],\n      differenceValue: 0,\n      alwaysQuestion: []\n    };\n  },\n  components: {// 组件实例化\n  },\n  mounted: function mounted() {},\n  created: function created() {\n    document.title = \"评测题库\";\n    var that = this;\n    that.answer();\n  },\n  methods: {\n    submitData: function submitData() {\n      var that = this;\n\n      if (that.differenceValue == 0) {\n        that.alwaysQuestion[that.index] = {};\n        that.alwaysQuestion[that.index].aProblem = that.aProblem;\n        that.alwaysQuestion[that.index].aProblemTeacherlist = that.aProblemTeacherlist;\n        that.alwaysQuestion[that.index].teacherlist = JSON.parse(JSON.stringify(that.teacherlist)); // that.differenceValue = that.teacherlist.length;\n\n        var optionidList = [];\n        var optionidListIndex = 0;\n        that.alwaysQuestion.map(function (item, index) {\n          var elementOptionlist = item.aProblem.optionlist;\n          var elementAProblemTeacherlist = item.aProblemTeacherlist;\n          elementOptionlist.map(function (itemName, idx) {\n            var optionid = {\n              optionid: itemName.optionid,\n              teacherlist: []\n            };\n            var teacherlists = [];\n            optionidList.push(optionid);\n\n            if (elementAProblemTeacherlist[idx] == undefined) {\n              optionidList[optionidListIndex].teacherlist = [];\n            } else {\n              elementAProblemTeacherlist[idx].map(function (itemNames, indexs) {\n                var teacherlistText = {\n                  accountid: itemNames.account_id\n                };\n                teacherlists.push(teacherlistText);\n              });\n              optionidList[optionidListIndex].teacherlist = teacherlists;\n            }\n\n            optionidListIndex++;\n          });\n        });\n\n        var qs = require('qs');\n\n        var formData = {\n          eid: sessionStorage.id,\n          userid: sessionStorage.uid,\n          optionlist: optionidList\n        };\n        var strFormData = {\n          str: JSON.stringify(formData)\n        };\n        that.$http.post(that.questionBankUrl + 'api/Questionbank/QuestionTeacherOptionAdd', qs.stringify(strFormData)).then(function (response) {\n          if (response.data.errcode == 0) {\n            that.$alert('提交成功', '', {\n              confirmButtonText: '确定',\n              callback: function callback(action) {\n                that.$router.go(-1);\n              }\n            });\n          } else {\n            that.$alert('提交失败,已刷新请重试', '', {\n              confirmButtonText: '确定',\n              callback: function callback(action) {\n                that.$router.go(0);\n              }\n            });\n          }\n        }).catch(function (error) {\n          that.$alert('提交失败,已刷新请重试', '', {\n            confirmButtonText: '确定',\n            callback: function callback(action) {\n              that.$router.go(0);\n            }\n          });\n        });\n      } else {\n        that.$alert('还有未测评人', '', {});\n      }\n    },\n    upQuestion: function upQuestion() {\n      var that = this;\n      var differenceValue = 0;\n\n      if (that.index >= 0) {\n        that.index = --that.index;\n        that.aProblemTeacherlist = that.alwaysQuestion[that.index].aProblemTeacherlist;\n        that.teacherlist = that.alwaysQuestion[that.index].teacherlist;\n        that.aProblemTeacherlist.map(function (item, index) {\n          if (item != null) {\n            item.map(function (item, index) {\n              differenceValue++;\n            });\n          }\n        });\n        that.differenceValue = that.teacherlist.length - differenceValue;\n        that.aProblemFn();\n\n        if (that.index < that.questionBanList.length - 1) {\n          that.submitBtnShow = true;\n        }\n      }\n    },\n    nextQuestion: function nextQuestion() {\n      var that = this;\n      var differenceValue = 0;\n\n      if (that.differenceValue == 0) {\n        if (that.index < that.questionBanList.length - 1) {\n          that.alwaysQuestion[that.index] = {};\n          that.alwaysQuestion[that.index].aProblem = that.aProblem;\n          that.alwaysQuestion[that.index].aProblemTeacherlist = JSON.parse(JSON.stringify(that.aProblemTeacherlist));\n          that.alwaysQuestion[that.index].teacherlist = JSON.parse(JSON.stringify(that.teacherlist));\n          that.index = ++that.index;\n          that.aProblemFn();\n          that.aProblemTeacherlist = [];\n\n          if (that.alwaysQuestion[that.index] == undefined) {\n            that.differenceValue = that.teacherlist.length;\n\n            for (var i = 0; i < that.teacherlist.length; i++) {\n              var element = that.teacherlist[i];\n              element.state = false;\n              element.aProblemIndex = undefined;\n            }\n          } else {\n            for (var i = 0; i < that.teacherlist.length; i++) {\n              var _element = that.teacherlist[i];\n              _element.state = that.alwaysQuestion[that.index].teacherlist[i].state;\n              _element.aProblemIndex = that.alwaysQuestion[that.index].teacherlist[i].aProblemIndex;\n            }\n\n            that.aProblemTeacherlist = that.alwaysQuestion[that.index].aProblemTeacherlist;\n            that.aProblemTeacherlist.map(function (item, index) {\n              if (item != null) {\n                item.map(function (item, index) {\n                  differenceValue++;\n                });\n              }\n            });\n            that.differenceValue = that.teacherlist.length - differenceValue;\n          }\n\n          if (that.index >= that.questionBanList.length - 1) {\n            that.submitBtnShow = false;\n          }\n        }\n      } else {\n        that.$alert('还有未测评人', '', {});\n      }\n    },\n    saveBtnFn: function saveBtnFn() {\n      var that = this;\n      var differenceValue = 0;\n      that.aProblemTeacherlist[that.aProblemIndex] = [];\n      that.teacherlist.map(function (item, index) {\n        if (item.state) {\n          if (item.aProblemIndex == undefined || item.aProblemIndex == that.aProblemIndex) {\n            item.aProblemIndex = that.aProblemIndex;\n            that.aProblemTeacherlist[that.aProblemIndex].push(item);\n          }\n        } else {\n          item.aProblemIndex = undefined;\n        }\n      });\n      that.selectFigure = false;\n      that.aProblemTeacherlist.map(function (item, index) {\n        if (item != null) {\n          item.map(function (item, index) {\n            differenceValue++;\n          });\n        }\n      });\n      that.differenceValue = that.teacherlist.length - differenceValue;\n    },\n    selectFigureFn: function selectFigureFn(idx) {\n      var that = this;\n      that.selectFigure = true;\n      that.aProblemIndex = idx;\n    },\n    pitchOnFigure: function pitchOnFigure(idx) {\n      var that = this;\n\n      if (that.teacherlist[idx].aProblemIndex == undefined || that.teacherlist[idx].aProblemIndex == that.aProblemIndex) {\n        that.teacherlist[idx].state = !that.teacherlist[idx].state;\n        that.teacherlist.splice(idx, 1, that.teacherlist[idx]);\n      }\n    },\n    answer: function answer() {\n      var that = this;\n\n      var qs = require('qs');\n\n      var formData = {\n        id: sessionStorage.id,\n        qid: sessionStorage.qid\n      };\n      console.log(\"新增\");\n      that.$http.post(that.questionBankUrl + 'api/Questionbank/AppQuestionbankList', qs.stringify(formData)).then(function (response) {\n        that.questionBanList = response.data.data.itemlist;\n        that.teacherlist = response.data.data.teacherlist;\n        that.teacherlist.map(function (item, index) {\n          item.state = false;\n        });\n        that.differenceValue = that.teacherlist.length;\n        that.titles = response.data.data.q_title;\n        that.aProblemFn();\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    examine: function examine() {\n      var that = this;\n\n      var qs = require('qs');\n\n      var formData = {\n        id: sessionStorage.id,\n        qid: sessionStorage.qid\n      };\n      console.log(\"查询\");\n      that.$http.post(that.questionBankUrl + 'api/Questionbank/AppQuestionbankList', qs.stringify(formData)).then(function (response) {\n        that.questionBanList = response.data.data.itemlist;\n        that.titles = response.data.data.q_title;\n        that.aProblemFn();\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    aProblemFn: function aProblemFn() {\n      var that = this;\n      that.aProblem = that.questionBanList[that.index];\n      that.aProblem.optionlist.map(function (item, index) {\n        item.teacherlist = [];\n      });\n    }\n  }\n};",{"version":3,"sources":["QuestionBank.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div id=\"QuestionBank\">\r\n\t\t<h2>{{titles}}</h2>\r\n\t\t<p class=\"hint\">{{hint}}</p>\r\n\t\t<div class=\"questionBankContent\">\r\n\t\t\t<h3>{{aProblem.title}}</h3>\r\n\t\t\t<!-- <a>格式规范，教学设计合理，层次清楚</a> -->\r\n\t\t\t<ul>\r\n\t\t\t\t<li v-for=\"(item, index) in aProblem.optionlist\" >\r\n\t\t\t\t\t<span>（{{item.score}}分）{{item.title}}</span>\r\n\t\t\t\t\t<p class=\"select\" @click=\"selectFigureFn(index)\">\r\n\t\t\t\t\t\t<em>选择评测人员</em>\r\n\t\t\t\t\t\t<i><img src=\"../assets/images/icon_arrowsB1.png\" alt=\"\"></i>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<div class=\"pitchOn\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<p v-for=\"(itemName, indexs) in aProblemTeacherlist[index]\">\r\n\t\t\t\t\t\t\t\t<b><img :src=\"itemName.photo\" alt=\"\"></b>\r\n\t\t\t\t\t\t\t\t<a>{{itemName.name}}</a>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t\t<div class=\"count\">\r\n\t\t\t\t<p>总评测人：{{teacherlist.length}}人</p>\r\n\t\t\t\t<span>未评测人：{{differenceValue}}人</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"switchTheTopic\">\r\n\t\t\t<span class=\"upOneLevel\" @click=\"upQuestion\">\r\n\t\t\t\t<i v-if=\"index == 0\"><img src=\"../assets/images/icon_arrowsLeft1.png\" alt=\"\"></i>\r\n\t\t\t\t<i v-else><img src=\"../assets/images/icon_arrowsLeft2.png\" alt=\"\"></i>\r\n\t\t\t\t<a :class=\" index == 0 ? 'active': ''\">上一题</a>\r\n\t\t\t</span>\r\n\t\t\t<p>{{index+1}}/{{questionBanList.length}}</p>\t\r\n\t\t\t<span class=\"nextLevel\" v-if=\"submitBtnShow\" @click=\"nextQuestion\"> \r\n\t\t\t\t<a :class=\"index == questionBanList.length-1 ? 'active' : ''\">下一题</a>\r\n        <i v-if=\"index == questionBanList.length-1\"><img src=\"../assets/images/icon_arrowsRight1.png\" alt=\"\"></i>\r\n\t\t\t\t<i v-else><img src=\"../assets/images/icon_arrowsRight2.png\" alt=\"\"></i>\r\n\t\t\t</span>\r\n\t\t\t<span class=\"submitBtn\" v-else @click=\"submitData\"><a>提交</a></span>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"submitSucceed\" v-if=\"submitSucceedShow\">\r\n\t\t\t<div>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<span><img src=\"../assets/images/icon_submitSucceed.png\" alt=\"\"></span>\r\n\t\t\t\t\t<a>提交成功</a>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\r\n    <div class=\"selectFigure\" v-if=\"selectFigure\">\r\n      <ul>\r\n        <li \r\n          v-for=\"(item, index) of teacherlist\" \r\n          @click=\"pitchOnFigure(index)\" \r\n          v-if=\"item.aProblemIndex == undefined ||  item.aProblemIndex == aProblemIndex\"\r\n        >\r\n          <span><img :src=\"item.photo\" alt=\"\"></span>\r\n          <p>{{item.name}}</p>\r\n          <a>{{item.deptname}}</a>\r\n          <i v-if=\"item.state\"><img src=\"../assets/images/icon_pitchOn3.png\" alt=\"\"></i>\r\n          <i v-else><img src=\"../assets/images/icon_unselected2.png\" alt=\"\"></i>\r\n        </li>\r\n      </ul>\r\n\r\n      <div class=\"save\">\r\n        <!-- <span class=\"resetBtn\" @click=\"resetFn\">重置</span> -->\r\n        <span class=\"saveBtn\" @click=\"saveBtnFn\">保存</span>\r\n      </div>\r\n    </div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n//import xxx from 'xxx.vue'  //引入组建\r\n//import 'xxxx'  //引入JS\r\n\r\nexport default {\r\n  name: \"QuestionBank\",\r\n  data() {\r\n    return {\r\n      questionBankUrl:this.$store.state.evaluating,\r\n      titles: \"\",\r\n      hint: \"温馨提示：点击选择评测人员可针对不同的人测评\",\r\n      submitSucceedShow: false,\r\n      submitBtnShow: true,\r\n      index:0,\r\n      questionBanList:[],\r\n      selectFigure:false,\r\n      aProblem:[],\r\n      aProblemTeacherlist:[],\r\n      aProblemIndex:0,\r\n      teacherlist:[],\r\n      differenceValue:0,\r\n      alwaysQuestion:[],\r\n    };\r\n  },\r\n  components: {\r\n    // 组件实例化\r\n  },\r\n\r\n  mounted() {},\r\n  created() {\r\n    document.title = \"评测题库\";\r\n    const that = this;\r\n    that.answer();\r\n\r\n  },\r\n  methods: {\r\n    submitData(){\r\n      const that = this;\r\n      if( that.differenceValue == 0 )\r\n      {\r\n        that.alwaysQuestion[that.index] = {};\r\n        that.alwaysQuestion[that.index].aProblem = that.aProblem;\r\n        that.alwaysQuestion[that.index].aProblemTeacherlist = that.aProblemTeacherlist;\r\n        that.alwaysQuestion[that.index].teacherlist = JSON.parse(JSON.stringify(that.teacherlist));\r\n        // that.differenceValue = that.teacherlist.length;\r\n\r\n        \r\n        let optionidList = [];\r\n        let optionidListIndex = 0;\r\n        that.alwaysQuestion.map((item , index) => {\r\n          let elementOptionlist = item.aProblem.optionlist;\r\n          let elementAProblemTeacherlist = item.aProblemTeacherlist;\r\n          elementOptionlist.map((itemName , idx) => {\r\n            let optionid = {\r\n              optionid : itemName.optionid,\r\n              teacherlist:[]\r\n            }\r\n            let teacherlists = []\r\n            optionidList.push(optionid)\r\n            if(elementAProblemTeacherlist[idx] == undefined)\r\n            {\r\n              optionidList[optionidListIndex].teacherlist = [];\r\n            }\r\n            else\r\n            {\r\n              \r\n              elementAProblemTeacherlist[idx].map((itemNames , indexs) => {\r\n                let teacherlistText = {\r\n                  accountid : itemNames.account_id\r\n                }\r\n                teacherlists.push(teacherlistText)\r\n              })\r\n\r\n              optionidList[optionidListIndex].teacherlist = teacherlists\r\n            }\r\n            optionidListIndex++;\r\n            \r\n          })\r\n       \r\n\r\n\r\n        })\r\n\r\n\t\t\t  const qs=require('qs');\r\n\r\n        let formData = {\r\n          eid:sessionStorage.id,\r\n          userid:sessionStorage.uid,\r\n          optionlist:optionidList\r\n        }\r\n        let strFormData = {\r\n          str:JSON.stringify(formData)\r\n        };\r\n        that.$http.post(that.questionBankUrl+'api/Questionbank/QuestionTeacherOptionAdd',qs.stringify(strFormData))\r\n          .then(response=>{\r\n            if(response.data.errcode == 0)\r\n            {\r\n              that.$alert('提交成功', '', {\r\n                confirmButtonText: '确定',\r\n                callback: action => {\r\n                  that.$router.go(-1);\r\n                }\r\n              });\r\n            }\r\n            else\r\n            {\r\n              that.$alert('提交失败,已刷新请重试', '', {\r\n                confirmButtonText: '确定',\r\n                callback: action => {\r\n                  that.$router.go(0);\r\n                }\r\n              });\r\n            }\r\n            \r\n\r\n          }) \r\n          .catch(function(error) {\r\n            that.$alert('提交失败,已刷新请重试', '', {\r\n              confirmButtonText: '确定',\r\n              callback: action => {\r\n                that.$router.go(0);\r\n              }\r\n            });\r\n          });\r\n\r\n      }\r\n      else\r\n      {\r\n        that.$alert('还有未测评人', '', {});\r\n      }\r\n    \r\n    },\r\n    upQuestion(){\r\n      const that = this;\r\n      let differenceValue = 0;\r\n      if(that.index >= 0)\r\n      {\r\n        that.index = --that.index;\r\n        that.aProblemTeacherlist= that.alwaysQuestion[that.index].aProblemTeacherlist;\r\n        that.teacherlist = that.alwaysQuestion[that.index].teacherlist;\r\n        that.aProblemTeacherlist.map((item , index) => {\r\n          if(item != null)\r\n          {\r\n            item.map((item , index) => {\r\n              differenceValue++;\r\n            })\r\n          }\r\n        })\r\n        that.differenceValue = that.teacherlist.length - differenceValue \r\n        that.aProblemFn()\r\n\r\n        if(that.index < that.questionBanList.length-1)\r\n        {\r\n          that.submitBtnShow = true\r\n        }\r\n      }\r\n    },\r\n    nextQuestion(){\r\n      const that = this;\r\n      let differenceValue = 0;\r\n      if( that.differenceValue == 0 )\r\n      {\r\n        if(that.index < that.questionBanList.length-1)\r\n        {\r\n          that.alwaysQuestion[that.index] = {};\r\n          that.alwaysQuestion[that.index].aProblem = that.aProblem;\r\n          that.alwaysQuestion[that.index].aProblemTeacherlist = JSON.parse(JSON.stringify(that.aProblemTeacherlist));\r\n          that.alwaysQuestion[that.index].teacherlist = JSON.parse(JSON.stringify(that.teacherlist));\r\n          that.index = ++that.index;\r\n          that.aProblemFn();\r\n          that.aProblemTeacherlist= [];\r\n          if(that.alwaysQuestion[that.index] == undefined)\r\n          {\r\n            that.differenceValue = that.teacherlist.length;\r\n\r\n            for (var i = 0; i < that.teacherlist.length; i++) {\r\n              const element = that.teacherlist[i];\r\n              element.state = false;\r\n              element.aProblemIndex = undefined;\r\n            }\r\n          }\r\n          else\r\n          {\r\n            for (var i = 0; i < that.teacherlist.length; i++) {\r\n              const element = that.teacherlist[i];\r\n              element.state = that.alwaysQuestion[that.index].teacherlist[i].state;\r\n              element.aProblemIndex = that.alwaysQuestion[that.index].teacherlist[i].aProblemIndex;\r\n            }\r\n            that.aProblemTeacherlist= that.alwaysQuestion[that.index].aProblemTeacherlist;\r\n            that.aProblemTeacherlist.map((item , index) => {\r\n              if(item != null)\r\n              {\r\n                item.map((item , index) => {\r\n                  differenceValue++;\r\n                })\r\n              }\r\n            })\r\n            that.differenceValue = that.teacherlist.length - differenceValue \r\n\r\n          }\r\n          if(that.index >= that.questionBanList.length-1)\r\n          {\r\n            that.submitBtnShow = false\r\n          }\r\n        }\r\n      }\r\n      else\r\n      {\r\n        that.$alert('还有未测评人', '', {});\r\n      }\r\n    },\r\n\r\n    saveBtnFn(){\r\n      const that = this;\r\n      let differenceValue = 0;\r\n      that.aProblemTeacherlist[that.aProblemIndex] = [];\r\n      \r\n      that.teacherlist.map((item , index) => {\r\n        if(item.state)\r\n        {\r\n          if(item.aProblemIndex == undefined || item.aProblemIndex == that.aProblemIndex)\r\n          {\r\n            item.aProblemIndex = that.aProblemIndex;\r\n            that.aProblemTeacherlist[that.aProblemIndex].push(item)\r\n          }\r\n        }\r\n        else\r\n        {\r\n          item.aProblemIndex = undefined;\r\n        }\r\n      })\r\n      that.selectFigure = false;\r\n      that.aProblemTeacherlist.map((item , index) => {\r\n        if(item != null)\r\n        {\r\n          item.map((item , index) => {\r\n            differenceValue++;\r\n          })\r\n        }\r\n        \r\n      })\r\n      that.differenceValue = that.teacherlist.length - differenceValue \r\n\r\n    },\r\n \r\n    selectFigureFn(idx){\r\n      const that = this;\r\n      that.selectFigure = true;\r\n      that.aProblemIndex = idx;\r\n    },\r\n    pitchOnFigure(idx){\r\n      const that = this;\r\n      if(that.teacherlist[idx].aProblemIndex == undefined || that.teacherlist[idx].aProblemIndex  == that.aProblemIndex)\r\n      {\r\n        that.teacherlist[idx].state = !that.teacherlist[idx].state;\r\n        that.teacherlist.splice(idx , 1 ,that.teacherlist[idx])\r\n      }\r\n    },\r\n    answer(){\r\n      const that = this;\r\n\t\t\tconst qs=require('qs');\r\n      const formData = {\r\n        id:sessionStorage.id,\r\n        qid:sessionStorage.qid\r\n      };\r\n      console.log(\"新增\")\r\n      that.$http.post(that.questionBankUrl+'api/Questionbank/AppQuestionbankList',qs.stringify(formData))\r\n\t\t\t\t.then(response=>{\r\n          that.questionBanList = response.data.data.itemlist\r\n          that.teacherlist = response.data.data.teacherlist\r\n          that.teacherlist.map((item , index) => {\r\n            item.state = false\r\n          })\r\n          that.differenceValue = that.teacherlist.length\r\n          that.titles = response.data.data.q_title\r\n          that.aProblemFn()\r\n\t\t\t\t}) \r\n\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\tconsole.log(error);\r\n        });\r\n        \r\n    },\r\n\r\n    examine(){\r\n\t\t\tconst that = this;\r\n\t\t\tconst qs=require('qs');\r\n      const formData = {\r\n        id:sessionStorage.id,\r\n        qid:sessionStorage.qid\r\n\t\t\t};\r\n      console.log(\"查询\")\r\n      that.$http.post(that.questionBankUrl+'api/Questionbank/AppQuestionbankList',qs.stringify(formData))\r\n\t\t\t\t.then(response=>{\r\n          that.questionBanList = response.data.data.itemlist\r\n          that.titles = response.data.data.q_title\r\n          that.aProblemFn()\r\n\t\t\t\t})  \r\n\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\tconsole.log(error);\r\n\t\t\t\t});\r\n\r\n    },\r\n\r\n\r\n    aProblemFn(){\r\n      const that = this;\r\n      that.aProblem = that.questionBanList[that.index];\r\n      that.aProblem.optionlist.map((item , index) => {\r\n        item.teacherlist = []\r\n      })\r\n    }\r\n\r\n\r\n\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped=\"\">\r\n/*@import ''*/\r\n#QuestionBank {\r\n  h2 {\r\n    font-size: 0.4rem;\r\n    font-weight: normal;\r\n    color: #333333;\r\n    padding: 0.48rem 0.32rem 0.3rem;\r\n  }\r\n  .hint {\r\n    font-size: 0.28rem;\r\n    color: #8c9bdc;\r\n    padding: 0 0.32rem;\r\n  }\r\n  .questionBankContent {\r\n    padding: 0.64rem 0.32rem 1.4rem;\r\n    h3 {\r\n      font-size: 0.36rem;\r\n      color: #333333;\r\n      font-weight: normal;\r\n    }\r\n    a {\r\n      font-size: 0.28rem;\r\n      color: #999999;\r\n    }\r\n    ul {\r\n      padding: 0.48rem 0 0;\r\n      li {\r\n        padding-bottom: 0.48rem;\r\n        span {\r\n          display: block;\r\n          font-size: 0.3rem;\r\n          color: #333333;\r\n        }\r\n        p.select {\r\n          display: flex;\r\n          align-items: center;\r\n          padding-top: 0.16rem;\r\n          padding-left: 0.2rem;\r\n          em {\r\n            font-style: normal;\r\n            font-size: 0.28rem;\r\n            color: #15b4f1;\r\n          }\r\n          i {\r\n            width: 0.3rem;\r\n            transform: rotate(270deg);\r\n          }\r\n        }\r\n        .pitchOn {\r\n          div {\r\n            display: flex;\r\n            padding-top: 0.3rem;\r\n            flex-wrap: wrap;\r\n            p {\r\n              margin: 0 0.15rem;\r\n              b {\r\n                display: block;\r\n                width: 0.66rem;\r\n                height: 0.66rem;\r\n                border-radius: 50%;\r\n                overflow: hidden;\r\n              }\r\n              a {\r\n                text-align: center;\r\n                display: block;\r\n                font-size: 0.24rem;\r\n                color: #666666;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .count {\r\n      display: flex;\r\n      color: #f5a623;\r\n      padding-top: 0.64rem;\r\n      padding-left: 0.2rem;\r\n      font-size: 0.28rem;\r\n      p {\r\n        flex: 1;\r\n      }\r\n      span {\r\n        flex: 1;\r\n      }\r\n    }\r\n  }\r\n  .switchTheTopic {\r\n    position: fixed;\r\n    bottom: 0;\r\n    width: 100%;\r\n    height: 1rem;\r\n    background: #fff;\r\n    box-shadow: -1px 0 10px #e0e0e0;\r\n    .upOneLevel {\r\n      left: 0.32rem;\r\n      display: flex;\r\n      align-items: center;\r\n      height: 1rem;\r\n      top: 0;\r\n      position: absolute;\r\n      i {\r\n        width: 0.16rem;\r\n      }\r\n      a {\r\n        padding-left: 0.14rem;\r\n        font-size: 0.32rem;\r\n        color: #03a9f4;\r\n        &.active {\r\n          color: #bbbbbb;\r\n        }\r\n      }\r\n    }\r\n    .nextLevel {\r\n      right: 0.32rem;\r\n      display: flex;\r\n      align-items: center;\r\n      position: absolute;\r\n      height: 1rem;\r\n      top: 0;\r\n      i {\r\n        width: 0.16rem;\r\n      }\r\n      a {\r\n        padding-right: 0.14rem;\r\n        font-size: 0.32rem;\r\n        color: #03a9f4;\r\n        &.active {\r\n          color: #bbbbbb;\r\n        }\r\n      }\r\n    }\r\n    .submitBtn {\r\n      position: absolute;\r\n      top: 0;\r\n      right: 0.32rem;\r\n      height: 1rem;\r\n      display: flex;\r\n      align-items: center;\r\n      a {\r\n        width: 1.2rem;\r\n        height: 0.6rem;\r\n        line-height: 0.6rem;\r\n        text-align: center;\r\n        border-radius: 4px;\r\n        background: #15b4f1;\r\n        color: #fff;\r\n        font-size: 0.32rem;\r\n      }\r\n    }\r\n    p {\r\n      text-align: center;\r\n      font-size: 0.28rem;\r\n      color: #999999;\r\n      line-height: 1rem;\r\n    }\r\n  }\r\n  .submitSucceed {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    div {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      width: 100%;\r\n      height: 100%;\r\n      p {\r\n        width: 2.2rem;\r\n        height: 2.2rem;\r\n        background: rgba(0, 0, 0, 0.6);\r\n        border-radius: 4px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n        span {\r\n          width: 1.04rem;\r\n        }\r\n        a {\r\n          color: #fff;\r\n          font-size: 0.3rem;\r\n          padding-top: 0.18rem;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  .selectFigure{\r\n    position: fixed;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: #fff;\r\n    ul{\r\n      padding: 0 .32rem 1.4rem;\r\n      display: flex;\r\n      flex-wrap:wrap;\r\n      overflow: hidden;\r\n      li{\r\n        margin-top: .3rem;\r\n        padding: 0 .42rem;\r\n        position: relative;\r\n        span{\r\n          width: 1.3rem;\r\n          margin: 0 auto;\r\n          height: 1.3rem;\r\n          display: block;\r\n          overflow: hidden;\r\n          border-radius: 50%;\r\n        }\r\n        p{\r\n          font-size: .32rem;\r\n          color: #666666;\r\n          text-align: center;\r\n        }\r\n        a{\r\n          display: block;\r\n          text-align: center;\r\n          font-size: .24rem;\r\n          color: #999999;\r\n        }\r\n        i{\r\n          position: absolute;\r\n          top: 0;\r\n          right: 0;\r\n          width: .44rem;\r\n          height: .44rem;\r\n        }\r\n      }\r\n    }\r\n\r\n    .save{\r\n      position: fixed;\r\n      bottom: 0;\r\n      width: 100%;\r\n      height: 1rem;\r\n      background: #fff;\r\n      box-shadow: -1px 0 10px #e0e0e0;\r\n      display: flex;\r\n      justify-content:flex-end;\r\n      align-items:center;\r\n      span{\r\n        width: 1.2rem;\r\n        height: .6rem;\r\n        text-align: center;\r\n        line-height: .6rem;\r\n        font-size: .32rem;\r\n        border-radius: 4px;\r\n        &.saveBtn{\r\n          background: #15B4F1;\r\n          border: 1px solid #15B4F1;\r\n          color: #fff;\r\n          margin-right: .32rem;\r\n        }\r\n        &.resetBtn{\r\n          border: 1px solid #E2E2E2;\r\n          color: #B2B2B2;\r\n          margin-right: .14rem;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n</style>"],"sourceRoot":"src/views"}]}