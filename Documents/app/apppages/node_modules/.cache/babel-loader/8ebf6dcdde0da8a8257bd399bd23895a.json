{"remainingRequest":"/Users/huangshuai/Documents/apppages/node_modules/babel-loader/lib/index.js!/Users/huangshuai/Documents/apppages/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangshuai/Documents/apppages/src/views/AndroidInformList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huangshuai/Documents/apppages/src/views/AndroidInformList.vue","mtime":1544781784575},{"path":"/Users/huangshuai/Documents/apppages/node_modules/cache-loader/dist/cjs.js","mtime":1542800631269},{"path":"/Users/huangshuai/Documents/apppages/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/cache-loader/dist/cjs.js","mtime":1542800631269},{"path":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//import xxx from 'xxx.vue'  //引入组建\n//import 'xxxx'  //引入JS\nexport default {\n  name: 'AndroidInformList',\n  data: function data() {\n    return {\n      getnEschoolUrl: this.$store.state.eschool,\n      tabIndex: 0,\n      pageNum: 1,\n      informationList: [],\n      informationListTotal: 0,\n      loading: false,\n      loading2: false,\n      withoutData: false,\n      searchText: \"\"\n    };\n  },\n  components: {// 组件实例化\n  },\n  watch: {\n    searchText: function searchText(val, oldVal) {\n      //普通的watch监听\n      if (val == \"\") {\n        this.pageNum = 1;\n        this.getnMyFormListFn(this.tabIndex);\n      }\n    }\n  },\n  mounted: function mounted() {\n    var that = this;\n    that.getnMyFormListFn(that.tabIndex);\n  },\n  created: function created() {\n    document.title = \"通知公告\";\n    document.body.style.background = \"#fff\";\n    var that = this;\n    var t = 0;\n\n    if (that.$route.query.accessToken) {\n      sessionStorage.setItem(\"accessToken\", this.$route.query.accessToken);\n      sessionStorage.setItem(\"schoolId\", this.$route.query.schoolId);\n    }\n\n    if (sessionStorage.tabIndex != undefined) {\n      that.tabIndex = sessionStorage.tabIndex;\n    }\n\n    window.onscroll = function () {\n      //变量scrollTop是滚动条滚动时，距离顶部的距离\n      var scrollTop = document.documentElement.scrollTop || document.body.scrollTop; //变量windowHeight是可视区的高度\n\n      var windowHeight = document.documentElement.clientHeight || document.body.clientHeight; //变量scrollHeight是滚动条的总高度\n\n      var scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight; //滚动条到底部的条件\n\n      if (scrollTop + windowHeight == scrollHeight) {\n        if (that.informationList.length < that.informationListTotal) {\n          that.pageNum++;\n          that.getnMyFormListPushFn(that.tabIndex);\n        } else if (that.informationList.length == that.informationListTotal) {\n          that.loading2 = false;\n        }\n      }\n    };\n\n    that.common.setingTtitle('通知公告');\n  },\n  methods: {\n    //获取我发布的\n    getnMyFormListFn: function getnMyFormListFn(index) {\n      var that = this;\n      that.informationList = [];\n      that.pageNum = 1;\n      that.loading = true;\n      that.loading2 = true;\n      that.withoutData = false;\n      var url;\n\n      if (index == 0) {\n        url = that.getnEschoolUrl + \"api/announcement/v0.1/getAppAnnouncements\";\n      } else if (index == 1) {\n        url = that.getnEschoolUrl + \"api/announcement/v0.1/list\";\n      }\n\n      that.$http({\n        method: \"GET\",\n        url: url,\n        headers: {\n          accessToken: sessionStorage.accessToken,\n          schoolId: sessionStorage.schoolId\n        },\n        params: {\n          pageNum: that.pageNum,\n          pageSize: 100\n        }\n      }).then(function (response) {\n        if (response.data.total > 0) {\n          that.informationListTotal = response.data.total;\n          that.informationList = response.data.rows;\n\n          if (that.informationList.length < that.informationListTotal) {\n            that.loading = false;\n          } else if (that.informationList.length == that.informationListTotal) {\n            if (that.informationList.length < 8) {\n              that.loading = false;\n            }\n\n            that.loading2 = false;\n          }\n        } else {\n          that.informationListTotal = response.data.total;\n          that.informationList = response.data.rows;\n          that.loading = false;\n          that.withoutData = true;\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    getnMyFormListPushFn: function getnMyFormListPushFn(index) {\n      var that = this;\n      var url;\n      that.loading = true;\n      that.loading2 = true;\n      that.withoutData = false;\n      var data = {};\n\n      if (index == 0) {\n        if (that.searchText == \"\") {\n          url = that.getnEschoolUrl + \"api/announcement/v0.1/getAppAnnouncements\";\n          data = {\n            pageNum: that.pageNum\n          };\n        } else {\n          data = {\n            title: that.searchText,\n            pageNum: that.pageNum,\n            pageSize: 8\n          };\n          url = that.getnEschoolUrl + \"api/announcement/v0.1/announcements\";\n        }\n      } else if (index == 1) {\n        if (that.searchText == \"\") {\n          data = {\n            pageNum: that.pageNum\n          };\n          url = that.getnEschoolUrl + \"api/announcement/v0.1/list\";\n        } else {\n          data = {\n            title: that.searchText,\n            pageNum: that.pageNum,\n            pageSize: 8\n          };\n          searchUrl = that.getnEschoolUrl + \"api/announcement/v0.1/likeList\";\n        }\n      }\n\n      that.$http({\n        method: \"GET\",\n        url: url,\n        headers: {\n          accessToken: sessionStorage.accessToken,\n          schoolId: sessionStorage.schoolId\n        },\n        params: data\n      }).then(function (response) {\n        if (that.informationList.length <= that.informationListTotal) {\n          that.informationList = that.informationList.concat(response.data.rows);\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    tabIndexFn: function tabIndexFn(index) {\n      var that = this;\n      that.tabIndex = index;\n      that.searchText = \"\";\n      window.scrollTo(0, 0);\n      that.getnMyFormListFn(index);\n    },\n    //跳转编辑页面\n    compilePages: function compilePages(index) {\n      var that = this;\n      that.loading = false;\n      sessionStorage.setItem(\"tabIndex\", that.tabIndex);\n\n      if (that.tabIndex == 0) {\n        if (that.informationList[index].updateStatus == 1) {\n          that.$router.push({\n            name: \"AndroidExamineInform\",\n            params: {\n              id: that.informationList[index].id\n            }\n          });\n        } else {\n          that.$router.push({\n            name: \"AndroidCompileInform\",\n            params: {\n              id: that.informationList[index].id\n            }\n          });\n        }\n      } else {\n        window.location.href = that.informationList[index].contentUrl;\n      }\n    },\n    //跳转新增页面\n    addPages: function addPages() {\n      var that = this;\n      that.loading = false;\n      sessionStorage.setItem(\"tabIndex\", that.tabIndex);\n      that.$router.push({\n        name: \"AndroidAddInform\",\n        params: {\n          url: \"InformList\"\n        }\n      });\n    },\n    searchFun: function searchFun(ev) {\n      var that = this;\n      that.pageNum = 1;\n      var searchUrl;\n\n      if (ev.keyCode == 13) {\n        if (that.tabIndex == 0) {\n          searchUrl = that.getnEschoolUrl + \"api/announcement/v0.1/announcements\";\n        } else {\n          searchUrl = that.getnEschoolUrl + \"api/announcement/v0.1/likeList\";\n        }\n\n        that.$http({\n          method: \"GET\",\n          url: searchUrl,\n          headers: {\n            accessToken: sessionStorage.accessToken,\n            schoolId: sessionStorage.schoolId\n          },\n          params: {\n            title: that.searchText,\n            pageNum: that.pageNum,\n            pageSize: 8\n          }\n        }).then(function (response) {\n          if (response.data.total > 0) {\n            that.informationListTotal = response.data.total;\n            that.informationList = response.data.rows;\n\n            if (that.informationList.length < that.informationListTotal) {\n              that.loading = false;\n            } else if (that.informationList.length == that.informationListTotal) {\n              if (that.informationList.length < 8) {\n                that.loading = false;\n              }\n\n              that.loading2 = false;\n            }\n          } else {\n            that.loading = false;\n            that.withoutData = true;\n          }\n        }).catch(function (error) {\n          console.log(error);\n        });\n      }\n    }\n  }\n};",{"version":3,"sources":["AndroidInformList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n        \r\n\t<div id=\"AndroidInformList\">\r\n        <div class=\"tabTop\"> \r\n            <div class=\"tabTitle\">\r\n                <p :class=\" tabIndex == 0 ? 'active' : ''\" @click=\"tabIndexFn(0)\">\r\n                    <a>我发布的</a>\r\n                    <span></span>\r\n                </p>\r\n                <p :class=\" tabIndex == 1 ? 'active' : ''\" @click=\"tabIndexFn(1)\">\r\n                    <a>我收到的</a>\r\n                    <span></span>\r\n                </p>\r\n            </div>\r\n            <div class=\"search\">\r\n                <div class=\"searchInput\">\r\n                    <i><img src=\"../assets/images/icon_search.png\" alt=\"\"></i>\r\n                    <input type=\"search\" placeholder=\"输入标题进行搜索\" @keyup=\"searchFun\" v-model=\"searchText\">\r\n                </div>\r\n                <div class=\"addBtn\" @click=\"addPages\" v-if=\"tabIndex == 0\">+</div>\r\n            </div>\r\n        </div>\r\n \r\n\r\n        <div class=\"tabContent\">\r\n            <ul>\r\n                <li v-for=\"(item, index) in informationList\" @click=\"compilePages(index)\">\r\n                    <i v-if=\"item.type == 1\">通知</i>\r\n                    <i v-else>公告</i>\r\n                    <div>\r\n                        <h3>\r\n                            <span>{{item.title}}</span>\r\n                            <img src=\"../assets/images/icon_urgent.png\" alt=\"\" v-if=\"item.urgencyMark == 1\">\r\n                        </h3>\r\n                        <p>\r\n                            <span v-if=\"tabIndex == 0\">{{item.name}}</span>\r\n                            <span v-else>{{item.publisherName}}</span>\r\n                            <b v-if=\"tabIndex == 0\">{{item.newCreateDate}}</b>\r\n                            <b v-else>{{item.createDateTime}}</b>\r\n                            <a v-if=\"tabIndex == 0\">{{item.readCount}}浏览量</a>\r\n                            <a v-else>{{item.readCount}}阅读</a>\r\n                        </p>\r\n                    </div>\r\n                    <em><img src=\"../assets/images/out_of_service.png\" alt=\"\" v-if=\"item.status == 2\"></em>\r\n                </li>\r\n            </ul>\r\n            \r\n        </div>  \r\n        <div class=\"loding\" v-if=\"loading\">\r\n\t    \t<div class=\"lodingText\" v-if=\"loading2\">\r\n\t    \t\t<i class=\"el-icon-loading activeT\"></i>\r\n\t    \t\t<span>拼命加载中...</span>\r\n\t    \t</div>\r\n\t    \t<div class=\"lodingEnd\" v-else>\r\n\t    \t\t<span>数据加载完毕</span>\r\n\t    \t</div>\r\n\t    </div>\r\n\t    <div class=\"withoutData\" v-if=\"withoutData\">\r\n\t    \t<div>\r\n\t    \t\t<span><img src=\"../assets/images/withoutData.png\" alt=\"\"></span>\r\n\t    \t\t<p>还没有收到消息哦~</p>\r\n\t    \t</div>\r\n\t    </div>\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n//import xxx from 'xxx.vue'  //引入组建\r\n//import 'xxxx'  //引入JS\r\nexport default {\r\n\t\r\n    name: 'AndroidInformList',\r\n    data(){\r\n        return {\r\n            getnEschoolUrl:this.$store.state.eschool,\r\n            tabIndex:0, \r\n            pageNum: 1,\r\n            informationList: [],\r\n            informationListTotal: 0,\r\n            loading: false,\r\n            loading2: false,\r\n            withoutData: false,\r\n            searchText:\"\",\r\n  \r\n        }\r\n    },\r\n    components:{\r\n        // 组件实例化\r\n    },\r\n    watch:{\r\n        searchText(val, oldVal){//普通的watch监听\r\n            if(val == \"\")\r\n            {\r\n                this.pageNum = 1;\r\n                this.getnMyFormListFn(this.tabIndex);\r\n            }\r\n        },\r\n       \r\n    },\r\n\r\n   \r\n    mounted(){\r\n        const that = this;\r\n        that.getnMyFormListFn(that.tabIndex);\r\n    },\r\n    created(){\r\n    \tdocument.title=\"通知公告\";\r\n        document.body.style.background = \"#fff\";\r\n        const that = this;\r\n        let t = 0;\r\n        if(that.$route.query.accessToken)\r\n        {\r\n            sessionStorage.setItem(\"accessToken\", this.$route.query.accessToken);\r\n            sessionStorage.setItem(\"schoolId\", this.$route.query.schoolId);\r\n        }\r\n        if(sessionStorage.tabIndex != undefined)\r\n        {\r\n            that.tabIndex = sessionStorage.tabIndex\r\n        }\r\n\r\n        window.onscroll = function() {\r\n        //变量scrollTop是滚动条滚动时，距离顶部的距离\r\n            var scrollTop =\r\n                document.documentElement.scrollTop || document.body.scrollTop; //变量windowHeight是可视区的高度\r\n            var windowHeight =\r\n                document.documentElement.clientHeight || document.body.clientHeight; //变量scrollHeight是滚动条的总高度\r\n            var scrollHeight =\r\n                document.documentElement.scrollHeight || document.body.scrollHeight; //滚动条到底部的条件\r\n           \r\n            if (scrollTop + windowHeight == scrollHeight) {\r\n                if (that.informationList.length < that.informationListTotal) {\r\n                    that.pageNum++;\r\n                    that.getnMyFormListPushFn(that.tabIndex);\r\n                } else if (that.informationList.length == that.informationListTotal) {\r\n                    that.loading2 = false;\r\n                }\r\n            }\r\n        };\r\n        that.common.setingTtitle('通知公告')\r\n\r\n    },\r\n    methods: {\r\n\r\n\r\n        //获取我发布的\r\n        getnMyFormListFn(index){\r\n            var that = this;\r\n            that.informationList = [];\r\n            that.pageNum = 1;\r\n            that.loading = true;\r\n            that.loading2 = true;\r\n            that.withoutData = false;\r\n            let url;\r\n\r\n            if(index == 0)\r\n            {\r\n                url = that.getnEschoolUrl + \"api/announcement/v0.1/getAppAnnouncements\";\r\n            }\r\n            else if(index == 1)\r\n            {\r\n                url = that.getnEschoolUrl + \"api/announcement/v0.1/list\";\r\n            }\r\n            that\r\n                .$http({\r\n                    method: \"GET\",\r\n                    url: url,\r\n                    headers: {\r\n                        accessToken:sessionStorage.accessToken,\r\n                        schoolId:sessionStorage.schoolId\r\n                    },\r\n                    params: {\r\n                        pageNum: that.pageNum,\r\n                        pageSize:100,\r\n                    }\r\n                })\r\n                .then(function(response) {\r\n                    if(response.data.total > 0)\r\n                    {\r\n                        that.informationListTotal = response.data.total;\r\n                        that.informationList = response.data.rows;\r\n                        if (that.informationList.length < that.informationListTotal) {\r\n                            that.loading = false;\r\n                        } else if (that.informationList.length == that.informationListTotal) {\r\n                            if (that.informationList.length < 8) {\r\n                                that.loading = false;\r\n                            }\r\n                            that.loading2 = false;\r\n                        }\r\n\r\n                    }\r\n                    else\r\n                    {\r\n                        that.informationListTotal = response.data.total;\r\n                        that.informationList = response.data.rows;\r\n                        that.loading = false;\r\n                        that.withoutData = true;\r\n                    }\r\n                })\r\n                .catch(function(error) {\r\n                    console.log(error);\r\n                });\r\n        },\r\n\r\n        getnMyFormListPushFn: function(index) {\r\n            var that = this;\r\n            var url;\r\n            that.loading = true;\r\n            that.loading2 = true;\r\n            that.withoutData = false;\r\n            let data = {};\r\n            if(index == 0)\r\n            {\r\n                if( that.searchText == \"\" )\r\n                {\r\n\r\n                    url = that.getnEschoolUrl + \"api/announcement/v0.1/getAppAnnouncements\";\r\n                    data = {\r\n                        pageNum: that.pageNum,\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    data = {\r\n                        title:that.searchText,\r\n                        pageNum: that.pageNum,\r\n                        pageSize: 8,\r\n                    }\r\n                    url = that.getnEschoolUrl + \"api/announcement/v0.1/announcements\"\r\n                }\r\n\r\n            }\r\n            else if(index == 1)\r\n            {\r\n                if( that.searchText == \"\" )\r\n                {\r\n                    data = {\r\n                        pageNum: that.pageNum,\r\n                    }\r\n                    url = that.getnEschoolUrl + \"api/announcement/v0.1/list\";\r\n                }\r\n                else\r\n                {\r\n                    data = {\r\n                        title:that.searchText,\r\n                        pageNum: that.pageNum,\r\n                        pageSize: 8,\r\n                    }\r\n                    searchUrl = that.getnEschoolUrl + \"api/announcement/v0.1/likeList\";\r\n                }\r\n                \r\n            }\r\n\r\n            that\r\n                .$http({\r\n                    method: \"GET\",\r\n                    url: url,\r\n                    headers: {\r\n                        accessToken:sessionStorage.accessToken,\r\n                        schoolId:sessionStorage.schoolId\r\n                    },\r\n                    params: data\r\n                })\r\n                .then(function(response) {\r\n                if (that.informationList.length <= that.informationListTotal) {\r\n                    that.informationList = that.informationList.concat(\r\n                        response.data.rows\r\n                    );\r\n                }\r\n                })\r\n                .catch(function(error) {\r\n                    console.log(error);\r\n                });\r\n        },\r\n\r\n        tabIndexFn(index){\r\n            const that = this;\r\n            that.tabIndex = index;\r\n            that.searchText = \"\";\r\n            window.scrollTo(0,0);\r\n            that.getnMyFormListFn(index)\r\n        },\r\n\r\n        //跳转编辑页面\r\n        compilePages(index){\r\n            const that = this;\r\n            that.loading =false\r\n            sessionStorage.setItem(\"tabIndex\", that.tabIndex);\r\n            if(that.tabIndex == 0)\r\n            {\r\n                if(that.informationList[index].updateStatus == 1)\r\n                {\r\n                    that.$router.push({\r\n                        name: \"AndroidExamineInform\",\r\n                        params:{\r\n                            id : that.informationList[index].id\r\n                        }\r\n                    });\r\n                }\r\n                else\r\n                {\r\n                    that.$router.push({\r\n                        name: \"AndroidCompileInform\",\r\n                        params:{\r\n                            id : that.informationList[index].id\r\n                        }\r\n                    });\r\n                }\r\n                \r\n            }\r\n            else\r\n            {\r\n                window.location.href = that.informationList[index].contentUrl\r\n            }\r\n            \r\n        },\r\n\r\n        //跳转新增页面\r\n        addPages(){\r\n            const that = this;\r\n            that.loading =false\r\n            sessionStorage.setItem(\"tabIndex\", that.tabIndex);\r\n            that.$router.push({\r\n                name: \"AndroidAddInform\",\r\n                params:{\r\n                    url : \"InformList\"\r\n                }\r\n            });\r\n        },\r\n        searchFun(ev){\r\n            const that = this;\r\n            that.pageNum = 1;\r\n            let searchUrl;\r\n            if(ev.keyCode == 13){\r\n                \r\n                if(that.tabIndex == 0)\r\n                {\r\n                    searchUrl = that.getnEschoolUrl + \"api/announcement/v0.1/announcements\";\r\n\r\n                }\r\n                else\r\n                {\r\n                    searchUrl = that.getnEschoolUrl + \"api/announcement/v0.1/likeList\";\r\n                }\r\n               \r\n                \r\n\r\n                that\r\n                .$http({\r\n                    method: \"GET\",\r\n                    url: searchUrl,\r\n                    headers: {\r\n                        accessToken:sessionStorage.accessToken,\r\n                        schoolId:sessionStorage.schoolId\r\n                    },\r\n                    params: {\r\n                        title:that.searchText,\r\n                        pageNum: that.pageNum,\r\n                        pageSize: 8,\r\n                    }\r\n                })\r\n                .then(function(response) {\r\n                    if(response.data.total > 0)\r\n                    {\r\n                        that.informationListTotal = response.data.total;\r\n                        that.informationList = response.data.rows;\r\n                        if (that.informationList.length < that.informationListTotal) {\r\n                            that.loading = false;\r\n                        } else if (that.informationList.length == that.informationListTotal) {\r\n                            if (that.informationList.length < 8) {\r\n                                that.loading = false;\r\n                            }\r\n                                that.loading2 = false;\r\n                        }\r\n\r\n                    }\r\n                    else\r\n                    {\r\n                        that.loading = false;\r\n                        that.withoutData = true;\r\n                    }\r\n                })\r\n                .catch(function(error) {\r\n                    console.log(error);\r\n                });\r\n            }\r\n        },\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped=\"\">\r\n@import '../assets/scss/common.scss'; \r\n#AndroidInformList{\r\n    .tabTop{\r\n        height: 1.7rem;        \r\n        width: 100%;\r\n        background: #fff;\r\n        z-index: 9999; \r\n        .tabTitle{\r\n            display: flex;\r\n            height: .82rem;\r\n            line-height: .82rem;\r\n            justify-content: center;\r\n            p{\r\n                flex: 1;\r\n                text-align: center;\r\n                font-size: .36rem;\r\n                color: #A3B5C7;\r\n                span{\r\n                    width: .74rem;\r\n                    height: 2px;\r\n                    display: none;\r\n                    background:  #15B4F1;\r\n                    margin: 0 auto;\r\n                }\r\n                &.active{\r\n                    color: #03A9F4;\r\n                    span{\r\n                        display: block;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        .search{\r\n            background: #F8F8F8;\r\n            overflow: hidden;\r\n            height: .88rem;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            .searchInput{\r\n                background: #fff;\r\n                border-radius: 5px;\r\n                display: flex;\r\n                height: .6rem;\r\n                width: 6.1rem;\r\n                align-items: center;\r\n                justify-content: center;\r\n                i{\r\n                    width: .32rem;\r\n                    height: .32rem;\r\n                    margin-right: .14rem;\r\n                }\r\n                input{\r\n                    height: .6rem;\r\n                    width: 2.5rem;\r\n                    font-size: .28rem;\r\n                }\r\n            }\r\n            .addBtn{\r\n                width: .8rem;\r\n                text-align: center;\r\n                background: #15B4F1;\r\n                height: .6rem;\r\n                line-height: .6rem;\r\n                font-size: .5rem;\r\n                color: #fff;\r\n                margin-left: .2rem;\r\n                border-radius:5px;\r\n            }\r\n        }\r\n    }\r\n    .tabContent{\r\n        ul{\r\n            li{\r\n                display: flex;\r\n                position: relative;\r\n                border-bottom: 1px solid #f8f8f8;\r\n                padding:.32rem;\r\n                i{\r\n                    width: .76rem;\r\n                    height: .38rem;\r\n                    border: 1px solid #15B4F1;\r\n                    text-align: center;\r\n                    line-height: .38rem;\r\n                    color: #15B4F1;\r\n                    font-style: normal;\r\n                    font-size: .28rem;\r\n                    border-radius: 1px;\r\n                }\r\n                div{\r\n                    flex: 1;\r\n                    padding-left: .5rem;\r\n                    position: relative;\r\n                    z-index: 999;\r\n                    h3{\r\n                        font-size: .34rem;\r\n                        font-weight: normal;\r\n                        color: #666666;\r\n                        overflow: hidden;\r\n                        margin-bottom: .16rem;\r\n                        img{\r\n                            width: .32rem;\r\n                            float: none;\r\n                            padding-left: .1rem;\r\n                            margin-top: -.05rem;\r\n                        }\r\n                    }\r\n                    p{\r\n                        font-size: .24rem;\r\n                        color: #999999;\r\n                        span{\r\n                            padding-right: .1rem;\r\n                        }\r\n                        b{\r\n                            padding-right: .32rem;\r\n                            font-weight: normal;\r\n                        }\r\n                    }\r\n                }\r\n                em{\r\n                    position: absolute;\r\n                    right: .16rem;\r\n                    width: 1.6rem;\r\n                    height: 1.6rem;\r\n                    margin-top: -.63rem;\r\n                    top: 50%;\r\n                    z-index: 100;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n</style>   "],"sourceRoot":"src/views"}]}