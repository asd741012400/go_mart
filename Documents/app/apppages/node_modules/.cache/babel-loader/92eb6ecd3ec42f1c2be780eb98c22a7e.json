{"remainingRequest":"/Users/huangshuai/Documents/apppages/node_modules/thread-loader/dist/cjs.js!/Users/huangshuai/Documents/apppages/node_modules/babel-loader/lib/index.js!/Users/huangshuai/Documents/apppages/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangshuai/Documents/apppages/src/views/AndroidAddInform.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huangshuai/Documents/apppages/src/views/AndroidAddInform.vue","mtime":1544781762796},{"path":"/Users/huangshuai/Documents/apppages/node_modules/cache-loader/dist/cjs.js","mtime":1542800631269},{"path":"/Users/huangshuai/Documents/apppages/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/cache-loader/dist/cjs.js","mtime":1542800631269},{"path":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//import xxx from 'xxx.vue'  //引入组建\n//import 'xxxx'  //引入JS\nimport { DatetimePicker } from 'mint-ui';\nimport moment from 'moment';\nimport Vue from \"vue\";\nVue.component(DatetimePicker.name, DatetimePicker);\nexport default {\n  name: 'AndroidAddInform',\n  data: function data() {\n    return {\n      getnEschoolUrl: this.$store.state.eschool,\n      sInformTle: \"\",\n      sInformPop: false,\n      sInformPopText: \"\",\n      sStatusPop: false,\n      sStatusPopText: \"\",\n      sUrgency: false,\n      sUrgencyText: \"\",\n      imgDataUrl: [],\n      imgDataFile: [],\n      aImg: [],\n      imgDataFileIndex: 0,\n      dateTime: '',\n      startDate: new Date(),\n      sPublishText: '',\n      sPublishId: '',\n      sReceptionText: '',\n      sAbstractText: '',\n      sContentText: '',\n      yearText: \"\",\n      monthText: \"\",\n      dayText: \"\"\n    };\n  },\n  watch: {\n    yearText: function yearText(val, oldVal) {\n      //普通的watch监听\n      if (val.length > 4) {\n        this.yearText = val.substring(0, 4);\n      }\n    },\n    monthText: function monthText(val, oldVal) {\n      //普通的watch监听\n      if (val.length > 2) {\n        this.monthText = val.substring(0, 2);\n      } else {\n        var num = parseInt(val);\n\n        if (num < 1) {\n          this.monthText = \"1\";\n        } else if (num > 12) {\n          this.monthText = \"12\";\n        }\n      }\n    },\n    dayText: function dayText(val, oldVal) {\n      //普通的watch监听\n      if (val.length > 2) {\n        this.dayText = val.substring(0, 2);\n      } else {\n        var num = parseInt(val);\n\n        if (num < 1) {\n          this.dayText = \"1\";\n        } else if (num > 31) {\n          this.dayText = \"31\";\n        }\n      }\n    }\n  },\n  components: {// 组件实例化\n  },\n  mounted: function mounted() {\n    var that = this; // if(sessionStorage.divHeight != undefined)\n    // {\n    //     oDiv.style.height = sessionStorage.divHeight;\n    // }\n    // else\n    // {\n    //     var divHeight;\n    //     if(oDiv.currentStyle) {\n    //         divHeight = oDiv.currentStyle['height'];\n    //     }else if(window.getComputedStyle) {\n    //         divHeight = window.getComputedStyle(oDiv , null)['height'];\n    //     }\n    //     sessionStorage.setItem(\"divHeight\", divHeight);\n    //     oDiv.style.height = sessionStorage.divHeight;\n    // }\n    // alert(oDiv.style.height)\n  },\n  created: function created() {\n    document.title = \"新增通知公告\";\n    document.body.style.background = \"#F8F8F8\";\n    var that = this;\n\n    if (that.$route.params.url == \"InformList\") {\n      sessionStorage.removeItem('addInformTle');\n      sessionStorage.removeItem('addInformPopText');\n      sessionStorage.removeItem('addStatusPopText');\n      sessionStorage.removeItem('addUrgencyText');\n      sessionStorage.removeItem('addYearText');\n      sessionStorage.removeItem('addMonthText');\n      sessionStorage.removeItem('addDayText');\n      sessionStorage.removeItem('addPublishText');\n      sessionStorage.removeItem('addPublishId');\n      sessionStorage.removeItem('addReceptionText');\n      sessionStorage.removeItem('addAbstractText');\n      sessionStorage.removeItem('addContentText');\n      sessionStorage.removeItem('addImgDataUrl');\n      sessionStorage.removeItem('addImgDataFile');\n      sessionStorage.removeItem('addAnnouncementId');\n    } else {\n      that.sInformTle = sessionStorage.addInformTle || \"\";\n      that.sInformPopText = sessionStorage.addInformPopText || \"\";\n      that.sStatusPopText = sessionStorage.addStatusPopText || \"\";\n      that.sUrgencyText = sessionStorage.addUrgencyText || \"\";\n      that.yearText = sessionStorage.addYearText || \"\";\n      that.monthText = sessionStorage.addMonthText || \"\";\n      that.dayText = sessionStorage.addDayText || \"\";\n      that.sPublishText = sessionStorage.addPublishText || \"\";\n      that.sPublishId = sessionStorage.addPublishId || \"\";\n      that.sReceptionText = sessionStorage.addReceptionText || \"\";\n      that.sAbstractText = sessionStorage.addAbstractText || \"\";\n      that.sContentText = sessionStorage.addContentText || \"\";\n      that.imgDataUrl = sessionStorage.addImgDataUrl || [];\n      that.imgDataFile = sessionStorage.addImgDataFile || [];\n      that.announcementId = sessionStorage.addAnnouncementId || '';\n    }\n\n    that.common.setingTtitle('新增通知公告');\n  },\n  methods: {\n    //发布类型弹窗\n    informPop: function informPop() {\n      var that = this;\n      that.sInformPop = !that.sInformPop;\n      that.sStatusPop = false;\n      that.sUrgency = false;\n    },\n    //状态弹窗\n    statusPop: function statusPop() {\n      var that = this;\n      that.sStatusPop = !that.sStatusPop;\n      that.sInformPop = false;\n      that.sUrgency = false;\n    },\n    //是否紧急弹窗\n    urgencyPop: function urgencyPop() {\n      var that = this;\n      that.sUrgency = !that.sUrgency;\n      that.sInformPop = false;\n      that.sStatusPop = false;\n    },\n    //发布类型文字赋值\n    informPopText: function informPopText(text) {\n      var that = this;\n      that.sInformPopText = text;\n      that.sInformPop = false;\n      console.log(that.sInformPop);\n    },\n    //状态文字赋值\n    statusPopText: function statusPopText(text) {\n      var that = this;\n      that.sStatusPopText = text;\n      that.sStatusPop = !that.sStatusPop;\n    },\n    //是否紧急赋值\n    urgencyText: function urgencyText(text) {\n      var that = this;\n      that.sUrgencyText = text;\n      that.sUrgency = !that.sUrgency;\n    },\n    //上传图片\n    addImgs: function addImgs(event) {\n      var files = document.getElementById(\"upload\").files;\n      var that = this;\n      var num = that.imgDataUrl.length + files.length;\n      var image = new FormData();\n\n      if (num <= 3) {\n        for (var index = 0; index < files.length; index++) {\n          that.getObjectURL(files[index]);\n        }\n      } else {\n        alert(\"最多可上传3张图片\");\n      }\n    },\n    //图片转换格式\n    getObjectURL: function getObjectURL(file) {\n      var that = this;\n      var reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onloadend = function (e) {\n        that.imgDataUrl.push(this.result);\n        that.imgDataFile.push(file);\n      };\n    },\n    //删除图片\n    removeImgs: function removeImgs(index) {\n      var that = this;\n      that.imgDataUrl.splice(index, 1);\n      that.imgDataFile.splice(index, 1); // console.log(index)\n    },\n    //开启时间选择器\n    openPicker: function openPicker() {\n      this.$refs.picker.open();\n    },\n    //点击确定按钮\n    handleConfirm: function handleConfirm(data) {\n      var date = moment(data).format('YYYY.MM.DD');\n      this.dateTime = date;\n      var that = this;\n      Vue.nextTick(function () {\n        that.$refs.picker.close();\n      });\n    },\n    //点击取消按钮\n    closeConfirm: function closeConfirm() {\n      var that = this;\n      Vue.nextTick(function () {\n        that.$refs.picker.close();\n      });\n    },\n    //发布/接收阻止跳转页面\n    skipPages: function skipPages(pages) {\n      var that = this;\n      sessionStorage.setItem(\"addInformTle\", that.sInformTle);\n      sessionStorage.setItem(\"addInformPopText\", that.sInformPopText);\n      sessionStorage.setItem(\"addStatusPopText\", that.sStatusPopText);\n      sessionStorage.setItem(\"addUrgencyText\", that.sUrgencyText);\n      sessionStorage.setItem(\"addYearText\", that.yearText);\n      sessionStorage.setItem(\"addMonthText\", that.monthText);\n      sessionStorage.setItem(\"addDayText\", that.dayText);\n      sessionStorage.setItem(\"addPublishText\", that.sPublishText);\n      sessionStorage.setItem(\"addPublishId\", that.sPublishId);\n      sessionStorage.setItem(\"addReceptionText\", that.sReceptionText);\n      sessionStorage.setItem(\"addAbstractText\", that.sAbstractText);\n      sessionStorage.setItem(\"addContentText\", that.sContentText);\n      sessionStorage.setItem(\"addAnnouncementId\", that.announcementId);\n      sessionStorage.setItem(\"addImgDataUrl\", that.imgDataUrl);\n      sessionStorage.setItem(\"addImgDataFile\", that.imgDataFile);\n      that.$router.push({\n        name: pages,\n        params: {\n          \"pagesUrl\": \"AndroidAddInform\"\n        }\n      });\n    },\n    //点击提交按钮\n    submitBtnFun: function submitBtnFun() {\n      var that = this;\n      var d = new Date();\n\n      if (that.yearText.length != 0 && that.yearText.length == 4 && that.monthText.length != 0 && that.dayText.length != 0) {\n        var yearDate = d.getFullYear();\n        var getMonth = d.getMonth() + 1;\n        var getDate = d.getDate();\n        var strDate = yearDate + \"-\" + getMonth + \"-\" + getDate;\n        var dateText = that.yearText + \"-\" + that.monthText + \"-\" + that.dayText;\n        var aaa = that.dateFn(dateText, strDate);\n\n        if (aaa) {\n          if (that.sInformTle != \"\" && that.sInformTle.length <= 20) {\n            if (that.sInformPopText != \"\") {\n              if (that.sStatusPopText != \"\") {\n                if (that.sUrgencyText != \"\") {\n                  if (that.sPublishText != \"\") {\n                    if (that.sReceptionText != \"\") {\n                      if (that.sContentText != \"\") {\n                        var returnText = window.confirm(\"确认提交？\");\n\n                        if (returnText) {\n                          that.submitInform();\n                        }\n                      } else {\n                        alert('请填写内容');\n                      }\n                    } else {\n                      alert('请选择接收组织');\n                    }\n                  } else {\n                    alert('请选择发布组织');\n                  }\n                } else {\n                  alert('请选择是否紧急');\n                }\n              } else {\n                alert('请选择状态');\n              }\n            } else {\n              alert('请选择类型');\n            }\n          } else {\n            // that.$alert('请填写标题，不能超过20字', {\n            //     confirmButtonText: '确定',\n            // });\n            alert('请填写标题，不能超过20字');\n          }\n        } else {\n          alert('填写日期应大于等于当前日期');\n        }\n      } else {\n        alert('请填写正确的截止时间');\n      }\n    },\n    dateFn: function dateFn(date1, date2) {\n      var oDate1 = new Date(date1);\n      var oDate2 = new Date(date2);\n\n      if (oDate1.getTime() >= oDate2.getTime()) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n    //确认提交按钮，查看有没有上传图片\n    submitInform: function submitInform() {\n      var that = this;\n\n      var md5 = require('md5-node');\n\n      if (that.imgDataUrl.length == 0) {\n        that.submitData();\n      } else {\n        var element = that.imgDataFile[that.imgDataFileIndex];\n        var key = element.name.split('.'),\n            type = key[key.length - 1];\n        key[key.length - 1] = '';\n        key = md5(key.join('.') + new Date().getTime()) + '.' + type;\n        that.$http({\n          method: \"GET\",\n          url: that.getnEschoolUrl + \"api/cms/qiniu/v0.1/open/token\",\n          headers: {\n            'Content-Type': 'multipart/form-data',\n            //之前说的以表单传数据的格式来传递fromdata\n            accessToken: sessionStorage.accessToken,\n            schoolId: sessionStorage.schoolId\n          },\n          params: {\n            key: key\n          }\n        }).then(function (response) {\n          var formData = new FormData();\n          formData.append('file', element);\n          formData.append('token', response.data.uptoken);\n          formData.append('key', key);\n          that.getQiuNiuUrl(formData);\n        }).catch(function (error) {\n          console.log(error);\n        });\n      } // console.log(that.imgDataUrl.length)\n\n    },\n    getQiuNiuUrl: function getQiuNiuUrl(formData, num) {\n      var that = this;\n      var config = {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      };\n      that.$http.post('http://upload.qiniu.com/', formData, config).then(function (response) {\n        that.aImg.push(response.data.key);\n        that.imgDataFileIndex = ++that.imgDataFileIndex;\n\n        if (that.imgDataFileIndex < that.imgDataFile.length) {\n          that.submitInform();\n        } else {\n          that.submitData(that.aImg);\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    //提交数据\n    submitData: function submitData(img) {\n      var that = this;\n\n      var qs = require('qs');\n\n      that.sPublish = !that.sPublish;\n      var title, content, digest, type, status, groupId, urgency, urgencyDeadline, receiveGroups;\n\n      if (img == undefined) {\n        img = \"\";\n      } else {\n        img = img.join(',');\n      }\n\n      title = that.sInformTle;\n      content = that.sContentText;\n      digest = that.sAbstractText;\n      groupId = that.sPublishId;\n      receiveGroups = that.sReceptionText.split(\",\");\n\n      if (that.sInformPopText == \"通知\") {\n        type = 1;\n      } else if (that.sInformPopText == \"公告\") {\n        type = 2;\n      }\n\n      if (that.sStatusPopText == \"启用\") {\n        status = 1;\n      } else if (that.sStatusPopText == \"停用\") {\n        status = 2;\n      }\n\n      if (that.sUrgencyText == \"是\") {\n        urgency = 1;\n      } else if (that.sUrgencyText == \"否\") {\n        urgency = 2;\n      }\n\n      urgencyDeadline = that.yearText + \"-\" + that.monthText + \"-\" + that.dayText;\n      console.log(urgencyDeadline);\n      that.$http({\n        method: \"POST\",\n        url: that.getnEschoolUrl + \"api/announcement/v0.1/appAnnouncements\",\n        headers: {\n          accessToken: sessionStorage.accessToken,\n          schoolId: sessionStorage.schoolId\n        },\n        data: {\n          \"announcementId\": \"\",\n          \"title\": title,\n          \"content\": content,\n          \"digest\": digest,\n          \"type\": type,\n          \"status\": status,\n          \"groupId\": groupId,\n          \"urgency\": urgency,\n          \"urgencyDeadline\": urgencyDeadline + \" 23:59\",\n          \"receiveGroups\": receiveGroups,\n          \"img\": img\n        }\n      }).then(function (response) {\n        that.imgDataFileIndex = 0;\n        alert('提交成功');\n        that.$router.push({\n          name: \"AndroidInformList\"\n        }); // that.$alert('提交成功', {\n        //     confirmButtonText: '确定',\n        //     callback: action => {\n        //         that.$router.push({\n        //             name: \"InformList\",\n        //         });\n        //     }\n        // });\n      }).catch(function (error, a) {\n        that.imgDataFileIndex = 0;\n        alert('提交失败，请刷新重试'); // that.$alert('提交失败，请刷新重试', {\n        //     confirmButtonText: '确定',\n        // });\n      });\n    }\n  }\n};",{"version":3,"sources":["AndroidAddInform.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div id=\"AndroidAddInform\">\r\n        <div class=\"AndroidAddInformDiv\">\r\n\r\n        \r\n            <div class=\"tle\">\r\n                <span>标题</span>\r\n                <p><input type=\"text\" placeholder=\"请填写（必填）不超过20字\" v-model=\"sInformTle\"></p>\r\n            </div>\r\n            <ul class=\"types publicList\">\r\n                <li @click=\"informPop\">\r\n                    <div class=\"drop-down\">\r\n                        <span>发布类型</span>\r\n                        <p>{{sInformPopText}}<a v-if=\"sInformPopText == ''\">请选择（必填)</a></p>\r\n                    </div>\r\n                    <div class=\"dropDownBox\" v-if=\"sInformPop\">\r\n                        <em @click.stop=\"informPopText('通知')\">通知</em>\r\n                        <em @click.stop=\"informPopText('公告')\">公告</em>\r\n                    </div>\r\n                </li>\r\n                <li @click=\"statusPop\">\r\n                    <div class=\"drop-down\">\r\n                        <span>状态</span>\r\n                        <p>{{sStatusPopText}}<a v-if=\"sStatusPopText == ''\">请选择（必填)</a></p>\r\n                    </div>\r\n                    <div class=\"dropDownBox\" v-if=\"sStatusPop\">\r\n                        <em @click.stop=\"statusPopText('启用')\">启用</em>\r\n                        <em @click.stop=\"statusPopText('停用')\">停用</em>\r\n                    </div>\r\n                </li>\r\n                <li @click=\"urgencyPop\">\r\n                    <div class=\"drop-down\">\r\n                        <span>是否紧急</span>\r\n                        <p>{{sUrgencyText}}<a v-if=\"sUrgencyText == ''\">请选择（必填)</a></p>\r\n                    </div>    \r\n                    <div class=\"dropDownBox\" v-if=\"sUrgency\">\r\n                        <em @click.stop=\"urgencyText('是')\">是</em>\r\n                        <em @click.stop=\"urgencyText('否')\">否</em>\r\n                    </div>\r\n                </li>\r\n                <li>\r\n                    <div class=\"drop-down\">\r\n                        <span>截止时间</span>\r\n                        <p>\r\n                            <!-- <mt-datetime-picker\r\n                                type=\"date\"\r\n                                ref=\"picker\"\r\n                                year-format=\"{value} 年\"\r\n                                month-format=\"{value} 月\"\r\n                                date-format=\"{value} 日\"\r\n                                @confirm=\"handleConfirm\"\r\n                                @cancel=\"closeConfirm\"\r\n                                :startDate=\"startDate\">\r\n                            </mt-datetime-picker> -->\r\n                            <label><input type=\"number\" v-model=\"yearText\"><strong>年</strong></label>\r\n                            <i>-</i>\r\n                            <label><input type=\"number\" v-model=\"monthText\"><strong>月</strong></label>\r\n                            <i>-</i>\r\n                            <label><input type=\"number\" v-model=\"dayText\"><strong>日</strong></label>\r\n                        </p>\r\n                    </div>    \r\n                </li>\r\n            </ul>\r\n\r\n            <ul class=\"organization publicList\">\r\n                <li @click=\"skipPages('PublishOrganization')\">\r\n                    <div class=\"drop-down\">\r\n                        <span>发布组织</span>\r\n                        <p>{{sPublishText}}<a v-if=\"sPublishText == ''\">请选择（必填)</a></p>\r\n                    </div>    \r\n                </li>\r\n                <li @click=\"skipPages('AndroidAcceptOrganization')\">\r\n                    <div class=\"drop-down\">\r\n                        <span>接收组织</span>\r\n                        <p>\r\n                            <a v-if=\"sReceptionText == ''\">请选择（必填)</a>\r\n                            <em v-else>已选择</em>\r\n                        </p>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n            <!-- <div class=\"upload\">\r\n                <p>最多可上传3张图片</p>\r\n                <div class=\"uploadContent\">\r\n                    <ul>\r\n                        <li v-if=\"imgDataUrl.length>0\" v-for='(item ,index ) in imgDataUrl'>\r\n                            <span><img :src=\"item\" alt=\"\"></span>\r\n                            <i @click=\"removeImgs(index)\"><img src=\"../assets/images/icon_close.png\" alt=\"\"></i>\r\n                        </li>\r\n                    </ul>\r\n                    <div v-show=\"imgDataUrl.length>=3 ? false : true\">\r\n                        +\r\n                        <input id=\"upload\" name=\"files\" type=\"file\" accept=\"image/*\" multiple  @change='addImgs($event)' />\r\n                    </div>\r\n            \r\n                \r\n                </div>\r\n            </div> -->\r\n            <div class=\"abstract publicContent\">\r\n                <span>摘要</span>\r\n                <p><textarea placeholder=\"需通知接受组织请输入摘要内容，如不需通知可不填写。\" v-model=\"sAbstractText\"></textarea></p>\r\n            </div>\r\n            <div class=\"content publicContent\">\r\n                <span>内容</span>\r\n                <p><textarea placeholder=\"在此输入需要通知或公告的内容\" v-model=\"sContentText\"></textarea></p>\r\n            </div>\r\n\r\n            <div class=\"submitBtn\" @click=\"submitBtnFun\"><div>提交</div></div>\r\n\r\n            <!--\r\n            <div class=\"popBg\" v-if=\"sPopBg\" @click=\"PopBg()\">\r\n                <div class=\"popContent\" :class=\"sPublish ? 'center' : 'bottom'\">\r\n                    \r\n                    <div class=\"publish selectPop\" v-if=\"sPublish\" @click.stop=\"popContent()\">\r\n                        <p>立即提交并发布</p>\r\n                        <div>\r\n                            <span @click=\"PopBg()\">取消</span>\r\n                            <a @click=\"submitInform\">确定</a>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                </div>\r\n            </div> \r\n-->\r\n        </div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n//import xxx from 'xxx.vue'  //引入组建\r\n//import 'xxxx'  //引入JS\r\nimport { DatetimePicker } from 'mint-ui';\r\nimport moment from 'moment'\r\nimport Vue from \"vue\";\r\n\r\nVue.component(DatetimePicker.name, DatetimePicker);\r\nexport default {\r\n\t\r\n    name: 'AndroidAddInform',\r\n    data(){\r\n        return {\r\n            getnEschoolUrl:this.$store.state.eschool,\r\n            sInformTle:\"\",\r\n            sInformPop:false,\r\n            sInformPopText:\"\",\r\n            sStatusPop:false,\r\n            sStatusPopText:\"\",\r\n            sUrgency:false,\r\n            sUrgencyText:\"\",\r\n            imgDataUrl: [],\r\n            imgDataFile:[],\r\n            aImg:[],\r\n            imgDataFileIndex:0,\r\n            dateTime: '',\r\n            startDate: new Date(),\r\n            sPublishText:'',\r\n            sPublishId:'',\r\n            sReceptionText:'',\r\n            sAbstractText:'',\r\n            sContentText:'',\r\n            yearText:\"\",\r\n            monthText:\"\",\r\n            dayText:\"\"\r\n        }\r\n    },\r\n    watch:{\r\n        yearText(val, oldVal){//普通的watch监听\r\n            if(val.length > 4)\r\n            {\r\n                \r\n                this.yearText = val.substring(0,4)\r\n            }\r\n        },\r\n        monthText(val, oldVal){//普通的watch监听\r\n            if(val.length > 2)\r\n            {\r\n                this.monthText = val.substring(0,2)\r\n            }\r\n            else\r\n            {   \r\n                var num = parseInt(val)\r\n                if(num < 1 )\r\n                {\r\n                    this.monthText = \"1\"\r\n                }\r\n                else if( num > 12 )\r\n                {\r\n                    this.monthText = \"12\"\r\n                }\r\n\r\n            }\r\n        },\r\n        dayText(val, oldVal){//普通的watch监听\r\n            if(val.length > 2)\r\n            {\r\n                this.dayText = val.substring(0,2)\r\n            }\r\n            else\r\n            {\r\n                var num = parseInt(val)\r\n                if(num < 1 )\r\n                {\r\n                    this.dayText = \"1\"\r\n                }\r\n                else if( num > 31 )\r\n                {\r\n                    this.dayText = \"31\"\r\n                }\r\n            }\r\n        },\r\n    },\r\n    components:{\r\n        // 组件实例化\r\n    },\r\n   \r\n    mounted(){\r\n        const that = this;\r\n        // if(sessionStorage.divHeight != undefined)\r\n        // {\r\n        //     oDiv.style.height = sessionStorage.divHeight;\r\n        // }\r\n        // else\r\n        // {\r\n        //     var divHeight;\r\n        //     if(oDiv.currentStyle) {\r\n        //         divHeight = oDiv.currentStyle['height'];\r\n\r\n        //     }else if(window.getComputedStyle) {\r\n        //         divHeight = window.getComputedStyle(oDiv , null)['height'];\r\n        //     }\r\n        //     sessionStorage.setItem(\"divHeight\", divHeight);\r\n        //     oDiv.style.height = sessionStorage.divHeight;\r\n        // }\r\n        // alert(oDiv.style.height)\r\n         \r\n    },\r\n    created(){\r\n    \tdocument.title=\"新增通知公告\";\r\n        document.body.style.background = \"#F8F8F8\";\r\n        const that = this;\r\n        \r\n        if( that.$route.params.url == \"InformList\")\r\n        {\r\n            sessionStorage.removeItem('addInformTle');\r\n            sessionStorage.removeItem('addInformPopText');\r\n            sessionStorage.removeItem('addStatusPopText');\r\n            sessionStorage.removeItem('addUrgencyText');\r\n            sessionStorage.removeItem('addYearText');\r\n            sessionStorage.removeItem('addMonthText');\r\n            sessionStorage.removeItem('addDayText');\r\n            sessionStorage.removeItem('addPublishText');\r\n            sessionStorage.removeItem('addPublishId');\r\n            sessionStorage.removeItem('addReceptionText');\r\n            sessionStorage.removeItem('addAbstractText');\r\n            sessionStorage.removeItem('addContentText');\r\n            sessionStorage.removeItem('addImgDataUrl');\r\n            sessionStorage.removeItem('addImgDataFile');\r\n            sessionStorage.removeItem('addAnnouncementId');\r\n        }\r\n        else\r\n        {\r\n            that.sInformTle = sessionStorage.addInformTle || \"\";\r\n            that.sInformPopText = sessionStorage.addInformPopText || \"\";\r\n            that.sStatusPopText = sessionStorage.addStatusPopText || \"\";\r\n            that.sUrgencyText = sessionStorage.addUrgencyText || \"\";\r\n            that.yearText = sessionStorage.addYearText || \"\";\r\n            that.monthText = sessionStorage.addMonthText || \"\";\r\n            that.dayText = sessionStorage.addDayText || \"\";\r\n            that.sPublishText = sessionStorage.addPublishText || \"\";\r\n            that.sPublishId = sessionStorage.addPublishId || \"\";\r\n            that.sReceptionText = sessionStorage.addReceptionText || \"\";\r\n            that.sAbstractText = sessionStorage.addAbstractText || \"\";\r\n            that.sContentText = sessionStorage.addContentText || \"\";\r\n            that.imgDataUrl = sessionStorage.addImgDataUrl || [];\r\n            that.imgDataFile = sessionStorage.addImgDataFile || [];\r\n            that.announcementId =  sessionStorage.addAnnouncementId || '';\r\n        }\r\n        that.common.setingTtitle('新增通知公告')\r\n\r\n        \r\n    },\r\n    methods: {\r\n        \r\n     \r\n\r\n        //发布类型弹窗\r\n        informPop(){\r\n            const that = this;\r\n            that.sInformPop = !that.sInformPop;\r\n            that.sStatusPop =  false;\r\n            that.sUrgency =  false;\r\n        },\r\n\r\n        //状态弹窗\r\n        statusPop(){\r\n            const that = this;\r\n            that.sStatusPop = !that.sStatusPop;\r\n            that.sInformPop = false;\r\n            that.sUrgency =  false;\r\n        },\r\n\r\n        //是否紧急弹窗\r\n        urgencyPop(){\r\n            const that = this;\r\n            that.sUrgency = !that.sUrgency;\r\n            that.sInformPop = false;\r\n            that.sStatusPop =  false;\r\n        },\r\n    \r\n      \r\n        //发布类型文字赋值\r\n        informPopText(text){\r\n            const that = this;\r\n            that.sInformPopText = text;\r\n            that.sInformPop = false;\r\n            console.log(that.sInformPop)\r\n        },\r\n\r\n        //状态文字赋值\r\n        statusPopText(text){\r\n            const that = this;\r\n            that.sStatusPopText = text;\r\n            that.sStatusPop = !that.sStatusPop;\r\n        },\r\n\r\n        //是否紧急赋值\r\n        urgencyText(text){\r\n            const that = this;\r\n            that.sUrgencyText = text;\r\n            that.sUrgency = !that.sUrgency;\r\n        },\r\n        \r\n        //上传图片\r\n        addImgs(event){\r\n            let files = document.getElementById(\"upload\").files\r\n            const that = this;\r\n            var num = that.imgDataUrl.length+files.length;\r\n            var image = new FormData()\r\n            if(num <= 3)\r\n            {\r\n                for (let index = 0; index < files.length; index++) {\r\n                    that.getObjectURL(files[index])\r\n                }\r\n            }\r\n            else\r\n            {\r\n                alert(\"最多可上传3张图片\")\r\n            }\r\n        },\r\n\r\n        //图片转换格式\r\n        getObjectURL (file) {\r\n            let that = this;\r\n            var reader = new FileReader();\r\n\r\n            reader.readAsDataURL(file)\r\n            reader.onloadend = function(e){\r\n                that.imgDataUrl.push(this.result)\r\n                that.imgDataFile.push(file)\r\n            }\r\n        },\r\n\r\n        //删除图片\r\n        removeImgs(index){\r\n            const that = this;\r\n            that.imgDataUrl.splice(index,1)\r\n            that.imgDataFile.splice(index,1)\r\n            // console.log(index)\r\n        },\r\n\r\n        //开启时间选择器\r\n        openPicker () {\r\n            this.$refs.picker.open()\r\n        },\r\n\r\n        //点击确定按钮\r\n        handleConfirm (data) {\r\n            let date = moment(data).format('YYYY.MM.DD')\r\n            this.dateTime = date\r\n            const that = this;\r\n            Vue.nextTick(function () {\r\n                that.$refs.picker.close();\r\n            });\r\n        },\r\n\r\n        //点击取消按钮\r\n        closeConfirm(){\r\n            const that = this;\r\n            Vue.nextTick(function () {\r\n                that.$refs.picker.close();\r\n            });\r\n        },\r\n\r\n        //发布/接收阻止跳转页面\r\n        skipPages(pages){\r\n            const that = this;\r\n            sessionStorage.setItem(\"addInformTle\", that.sInformTle);\r\n            sessionStorage.setItem(\"addInformPopText\", that.sInformPopText);\r\n            sessionStorage.setItem(\"addStatusPopText\", that.sStatusPopText);\r\n            sessionStorage.setItem(\"addUrgencyText\", that.sUrgencyText);\r\n            sessionStorage.setItem(\"addYearText\", that.yearText);\r\n            sessionStorage.setItem(\"addMonthText\", that.monthText);\r\n            sessionStorage.setItem(\"addDayText\", that.dayText);\r\n            sessionStorage.setItem(\"addPublishText\", that.sPublishText);\r\n            sessionStorage.setItem(\"addPublishId\", that.sPublishId);\r\n            sessionStorage.setItem(\"addReceptionText\", that.sReceptionText);\r\n            sessionStorage.setItem(\"addAbstractText\", that.sAbstractText);\r\n            sessionStorage.setItem(\"addContentText\", that.sContentText);\r\n            sessionStorage.setItem(\"addAnnouncementId\", that.announcementId);\r\n            sessionStorage.setItem(\"addImgDataUrl\", that.imgDataUrl);\r\n            sessionStorage.setItem(\"addImgDataFile\", that.imgDataFile);\r\n            that.$router.push({\r\n                name: pages,\r\n                params:{\r\n                    \"pagesUrl\":\"AndroidAddInform\"\r\n                }\r\n            });\r\n        },\r\n\r\n        //点击提交按钮\r\n        submitBtnFun(){\r\n            const that = this;\r\n            var d = new Date();\r\n            \r\n            if(that.yearText.length != 0 && that.yearText.length == 4  && that.monthText.length != 0 && that.dayText.length != 0)\r\n            {\r\n                var yearDate = d.getFullYear();\r\n                var getMonth = d.getMonth()+1;\r\n                var getDate = d.getDate();\r\n                var strDate = yearDate+ \"-\" + getMonth + \"-\" + getDate;\r\n                var dateText = that.yearText +\"-\" +that.monthText +\"-\"+ that.dayText;\r\n                var aaa = that.dateFn(dateText,strDate)\r\n                if(aaa)\r\n                {\r\n                    if( that.sInformTle != \"\" && that.sInformTle.length <= 20 )\r\n                    {\r\n                        if( that.sInformPopText != \"\" )\r\n                        {\r\n                            if( that.sStatusPopText != \"\" )\r\n                            {\r\n                                if( that.sUrgencyText != \"\" )\r\n                                {\r\n                                    if( that.sPublishText != \"\" )\r\n                                    {\r\n                                        if( that.sReceptionText != \"\" )\r\n                                        {\r\n                                            if( that.sContentText != \"\" )\r\n                                            {\r\n                                                var returnText = window.confirm(\"确认提交？\")\r\n                                                if(returnText)\r\n                                                {\r\n                                                    that.submitInform()\r\n                                                }\r\n                                            }\r\n                                            else\r\n                                            {\r\n                                                alert('请填写内容')\r\n                                            }\r\n                                        }\r\n                                        else\r\n                                        {\r\n                                            alert('请选择接收组织')\r\n                                        }\r\n                                    }\r\n                                    else\r\n                                    {\r\n                                        alert('请选择发布组织')\r\n                                    }\r\n                                }\r\n                                else\r\n                                {\r\n                                    alert('请选择是否紧急')\r\n                                }\r\n                            }\r\n                            else\r\n                            {\r\n                                alert('请选择状态')\r\n                            }\r\n                        }\r\n                        else\r\n                        {\r\n                            alert('请选择类型')\r\n                        }\r\n                    }\r\n                    else\r\n                    {\r\n                        // that.$alert('请填写标题，不能超过20字', {\r\n                        //     confirmButtonText: '确定',\r\n                        // });\r\n                        alert('请填写标题，不能超过20字')\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    alert('填写日期应大于等于当前日期')\r\n                }\r\n            }\r\n            else\r\n            {\r\n                alert('请填写正确的截止时间')\r\n            }\r\n            \r\n        },\r\n\r\n        dateFn:function (date1,date2){\r\n            var oDate1 = new Date(date1);\r\n            var oDate2 = new Date(date2);\r\n            if(oDate1.getTime() >= oDate2.getTime()){\r\n                return true\r\n            } else {\r\n                return false\r\n            }\r\n        },\r\n        //确认提交按钮，查看有没有上传图片\r\n        submitInform(){\r\n            \r\n            const that = this;\r\n            const md5=require('md5-node');\r\n            if(that.imgDataUrl.length == 0)\r\n            {\r\n                that.submitData()\r\n            }\r\n            else\r\n            {\r\n\r\n                const element = that.imgDataFile[that.imgDataFileIndex];\r\n                var key = element.name.split('.'),\r\n                type = key[key.length - 1];\r\n                key[key.length - 1] = '';\r\n                key = md5(key.join('.') + (new Date().getTime())) + '.' + type ;\r\n                that\r\n                    .$http({\r\n                        method: \"GET\",\r\n                        url: that.getnEschoolUrl + \"api/cms/qiniu/v0.1/open/token\",\r\n                        headers: {\r\n                            'Content-Type': 'multipart/form-data',  //之前说的以表单传数据的格式来传递fromdata\r\n                            accessToken:sessionStorage.accessToken,\r\n                            schoolId:sessionStorage.schoolId\r\n                        },\r\n                        params: {\r\n                            key:key\r\n                        }\r\n                    })\r\n                    .then(function(response) {\r\n                        var formData = new FormData();\r\n                        formData.append('file', element);\r\n                        formData.append('token', response.data.uptoken);\r\n                        formData.append('key', key);\r\n                        that.getQiuNiuUrl(formData)\r\n                    })\r\n                    .catch(function(error) {\r\n                        console.log(error);\r\n                    });\r\n                \r\n                \r\n            }\r\n            // console.log(that.imgDataUrl.length)\r\n        },\r\n\r\n        getQiuNiuUrl(formData,num){\r\n            \r\n            const that = this;\r\n            let config = {\r\n                headers:{'Content-Type':'multipart/form-data'}\r\n            }\r\n            that.$http.post('http://upload.qiniu.com/',formData,config)\r\n            .then(response=>{\r\n                that.aImg.push(response.data.key)\r\n                that.imgDataFileIndex = ++that.imgDataFileIndex;\r\n                if(that.imgDataFileIndex < that.imgDataFile.length)\r\n                {\r\n                \r\n                    that.submitInform()\r\n                }\r\n                else\r\n                {\r\n                    that.submitData(that.aImg)\r\n                }\r\n            })  \r\n            .catch(function(error) {\r\n                console.log(error);\r\n            });\r\n\r\n        },\r\n        //提交数据\r\n        submitData(img){\r\n            const that = this;\r\n            const qs=require('qs');\r\n            that.sPublish = !that.sPublish;\r\n            var title , content , digest ,type , status , groupId , urgency , urgencyDeadline , receiveGroups;\r\n\r\n            if(img == undefined)\r\n            {\r\n                img = \"\";\r\n            }\r\n            else\r\n            {\r\n                img = img.join(',')\r\n            }\r\n            \r\n            title = that.sInformTle;\r\n            content = that.sContentText;\r\n            digest = that.sAbstractText;\r\n            groupId = that.sPublishId;\r\n            \r\n            receiveGroups = that.sReceptionText.split(\",\");\r\n            if(that.sInformPopText == \"通知\")\r\n            {\r\n                type = 1\r\n            }\r\n            else if(that.sInformPopText == \"公告\")\r\n            {\r\n                type = 2\r\n            }\r\n\r\n            if(that.sStatusPopText == \"启用\")\r\n            {\r\n                status = 1\r\n            }\r\n            else if(that.sStatusPopText == \"停用\")\r\n            {\r\n                status = 2\r\n            }\r\n\r\n            if(that.sUrgencyText == \"是\")\r\n            {\r\n                urgency = 1\r\n            }\r\n            else if(that.sUrgencyText == \"否\")\r\n            {\r\n                urgency = 2\r\n            }\r\n\r\n            \r\n            urgencyDeadline = that.yearText + \"-\" + that.monthText + \"-\" + that.dayText;\r\n\r\n            console.log(urgencyDeadline)      \r\n\r\n            that\r\n                .$http({\r\n                    method: \"POST\",\r\n                    url: that.getnEschoolUrl + \"api/announcement/v0.1/appAnnouncements\",\r\n                    headers: {\r\n                        accessToken:sessionStorage.accessToken,\r\n                        schoolId:sessionStorage.schoolId\r\n                    },\r\n                    data: {\r\n                        \"announcementId\":\"\",\r\n                        \"title\":title,\r\n                        \"content\":content,\r\n                        \"digest\":digest,\r\n                        \"type\":type,\r\n                        \"status\":status,\r\n                        \"groupId\":groupId,\r\n                        \"urgency\":urgency,\r\n                        \"urgencyDeadline\":urgencyDeadline+\" 23:59\",\r\n                        \"receiveGroups\":receiveGroups,\r\n                        \"img\":img\r\n                    }\r\n                })\r\n                .then(function(response) {\r\n                    that.imgDataFileIndex = 0;\r\n                    alert('提交成功');\r\n                    that.$router.push({\r\n                        name: \"AndroidInformList\",\r\n                    });\r\n                    // that.$alert('提交成功', {\r\n                    //     confirmButtonText: '确定',\r\n                    //     callback: action => {\r\n                    //         that.$router.push({\r\n                    //             name: \"InformList\",\r\n                    //         });\r\n                    //     }\r\n                    // });\r\n                    \r\n                })\r\n                .catch(function(error,a) {\r\n                    that.imgDataFileIndex = 0;\r\n                    alert('提交失败，请刷新重试')\r\n                    // that.$alert('提交失败，请刷新重试', {\r\n                    //     confirmButtonText: '确定',\r\n                    // });\r\n                });\r\n           \r\n            \r\n            \r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped=\"\">\r\n#AndroidAddInform{\r\n    .tle{\r\n        background: #fff;\r\n        padding:  0 .32rem;\r\n        height: .96rem;\r\n        display: flex;\r\n        align-items: center;\r\n        margin-top: .2rem;\r\n        span{\r\n            font-size: .32rem;\r\n            width: 2rem;\r\n            color: #333333;\r\n        }\r\n        p{\r\n            flex: 1;\r\n            overflow: hidden;\r\n            input{\r\n                font-size: .32rem;\r\n                width: 100%;\r\n                line-height: .6rem;\r\n            }\r\n        }\r\n    }\r\n    .publicList{\r\n        margin-top: .2rem;\r\n        li{\r\n            .drop-down{\r\n                display: flex;\r\n                background: #fff url('../assets/images/icon_arrowsR3.png') right .32rem center/.4rem no-repeat;\r\n                padding:  0 .32rem;\r\n                height: .96rem;\r\n                border-bottom: 1px solid #EEEEEE;\r\n                align-items: center;\r\n                span{\r\n                    font-size: .32rem;\r\n                    width: 2rem;\r\n                    color: #333333;\r\n                }\r\n                p{\r\n                    flex: 1;\r\n                    font-size: .32rem;\r\n                    overflow: hidden;\r\n                    color: #333333;\r\n                    text-align: right;\r\n                    padding-right: .48rem;\r\n                    display: flex;\r\n                    justify-content: flex-end;\r\n                    label{\r\n                        display: flex;\r\n                        input{\r\n                            border: 1px solid rgb(238, 237, 237);\r\n                        }\r\n                        strong{\r\n                            font-weight: normal;\r\n                            color: #999999;\r\n                        }\r\n                        &:first-of-type{\r\n                            width: 1.3rem;\r\n                            input{\r\n                                width: .9rem;\r\n                            }\r\n                        }\r\n                        &:nth-of-type(2){\r\n                            width: .7rem;\r\n                            input{\r\n                                width: .4rem;\r\n                            }\r\n                        }\r\n                        &:nth-of-type(3){\r\n                            width: .7rem;\r\n                            input{\r\n                                width: .4rem;\r\n                            }\r\n                        }\r\n                        \r\n                    }\r\n                    i{\r\n                        padding: 0 .1rem;\r\n                    }\r\n                    a{\r\n                        color: #999999;\r\n                    }\r\n                    em{\r\n                        font-style: normal;\r\n                    }\r\n                }\r\n           \r\n            }\r\n            .dropDownBox{\r\n                em{\r\n                    display: block;\r\n                    padding: 0 .32rem;\r\n                    line-height: .8rem;\r\n                    border-bottom: 1px solid #EEEEEE;\r\n                    &:last-of-type{\r\n                        border: 0;\r\n                    }\r\n                }\r\n            }\r\n            &:last-of-type{\r\n                border: 0;\r\n            }\r\n        }\r\n    }\r\n    .upload{\r\n        margin-top: .2rem;\r\n        padding: 0 .32rem .32rem;\r\n        background: #fff;\r\n        p{\r\n            font-size: .24rem;\r\n            padding: .32rem 0 .12rem;\r\n            color: #999999;\r\n        }  \r\n        .uploadContent{\r\n            overflow: hidden;\r\n            ul{\r\n                float: left;\r\n                display: flex;\r\n                padding-top: .2rem;\r\n                li{\r\n                    width: 1.6rem;\r\n                    border: 1px solid #e0e0e0;\r\n                    height: 1.6rem;\r\n                    margin-right: .5rem;\r\n                    position: relative;\r\n                    span{\r\n                        overflow: hidden;\r\n                        img{\r\n                            height: 100%;\r\n                        }\r\n                    }\r\n                    i{\r\n                        position: absolute;\r\n                        right: -.2rem;\r\n                        top: -.2rem;\r\n                        width: .4rem;\r\n                        height: .4rem;\r\n                    }\r\n                    \r\n                    \r\n                }\r\n            }\r\n            div{\r\n                float: left;\r\n                width: 1.6rem;\r\n                height: 1.6rem;\r\n                margin-top: .2rem;\r\n                border: 2px dashed #e0e0e0;\r\n                box-sizing: border-box;\r\n                line-height: 1.4rem;\r\n                text-align: center;\r\n                font-size: .72rem;\r\n                color: #e0e0e0;\r\n                position: relative;\r\n                input{\r\n                    position: absolute;\r\n                    left: 0;\r\n                    top: 0;\r\n                    width: 100%;\r\n                    height: 100%;\r\n                    z-index: 10;\r\n                    opacity: 0;\r\n                }\r\n            }\r\n        }\r\n        \r\n    }\r\n    .publicContent{\r\n        margin-top: .2rem;\r\n        padding: .3rem .32rem;\r\n        background: #fff;\r\n        display: flex;\r\n        span{\r\n            width: 2rem;\r\n            font-size: .32rem;\r\n            color: #333333;\r\n        }\r\n        p{\r\n            flex: 1;\r\n            textarea{\r\n                width: 100%;\r\n                height: 2rem;\r\n                font-size: .32rem;\r\n                border: 0;\r\n            }\r\n        }\r\n    }\r\n    .submitBtn{\r\n        height: .96rem;\r\n        margin: .2rem auto;\r\n        text-align: center;\r\n        line-height: .96rem;\r\n        width: 100%;\r\n        color: #fff;\r\n        font-size: .32rem;\r\n        div{\r\n            margin: 0 .32rem;\r\n            background: #409EFF;\r\n            border-radius: 5px;\r\n        }\r\n    }\r\n  \r\n}\r\n  \r\n  \r\n\r\n</style>  \r\n\r\n<style>\r\n.el-message-box{\r\n    width: 80%;\r\n}\r\n</style>\r\n\r\n"],"sourceRoot":"src/views"}]}