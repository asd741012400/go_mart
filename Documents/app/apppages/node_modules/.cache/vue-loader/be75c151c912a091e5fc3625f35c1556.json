{"remainingRequest":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangshuai/Documents/apppages/src/views/ReadStatistics.vue?vue&type=style&index=0&id=48137d8f&lang=scss&scoped=true&","dependencies":[{"path":"/Users/huangshuai/Documents/apppages/src/views/ReadStatistics.vue","mtime":1544579409551},{"path":"/Users/huangshuai/Documents/apppages/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/cache-loader/dist/cjs.js","mtime":1542800631269},{"path":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n@import '../assets/scss/common.scss'; \r\n#ReadStatistics{\r\n    .header{\r\n        position: fixed;\r\n        top: 0;\r\n        width: 100%;\r\n        .readPersonStatistics{\r\n            background: #03A9F4;\r\n            height: 3rem;\r\n            .sumPerson{\r\n                display: flex;\r\n                padding: .6rem .32rem 0;\r\n                color: #fff;\r\n                font-size: .32rem;\r\n                opacity: 0.72;\r\n                span{\r\n                    padding:  0 .48rem;\r\n                }\r\n            }\r\n            .willBeread{\r\n                padding:.4rem .32rem 0;\r\n                font-size: .36rem;\r\n                color: #fff;\r\n                font-weight: bold;\r\n                span{\r\n                    font-weight: normal;\r\n                    font-size: .72rem;\r\n                }\r\n            }\r\n        }\r\n        .tab{\r\n            background: #fff;\r\n            display: flex;\r\n            line-height: .9rem;\r\n            border-bottom: 1px solid #F2F5F5;\r\n            p{\r\n                flex: 1;\r\n                display: flex;\r\n                flex-direction: column;\r\n                align-items: center;\r\n                span{\r\n                    font-size: .3rem;\r\n                    color: #A3B5C7;\r\n                }\r\n                em{\r\n                    width: .52rem;\r\n                    height: 2px;\r\n                    background: #15B4F1;\r\n                    display: none;\r\n                }\r\n                &.active{\r\n                    span{\r\n                        color: #03A9F4;\r\n                    }\r\n                    em{\r\n                        display: block;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    ul{\r\n        padding-top: 4.14rem;\r\n        li{\r\n            display: flex;\r\n            align-items: center;\r\n            padding: .34rem .32rem;\r\n            border-bottom: 1px solid #F2F5F5;\r\n            b{\r\n                width: .8rem;\r\n                height: .8rem;\r\n                overflow: hidden;\r\n                border-radius: 50%;\r\n            }\r\n            div{\r\n                padding-left: .32rem;\r\n                flex: 1;\r\n                h3{\r\n                    font-size: .32rem;\r\n                    color: #333333;\r\n                    font-weight: normal;\r\n                }\r\n                p{\r\n                    font-size: .24rem;\r\n                    color: #999999;\r\n                }\r\n            }\r\n            a{\r\n                width: .48rem;\r\n                height: .48rem;\r\n            }\r\n        }\r\n    }\r\n    .withoutData{\r\n        padding-top: 2rem;\r\n    }\r\n}\r\n\r\n\r\n",{"version":3,"sources":["ReadStatistics.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ReadStatistics.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n        \r\n\t<div id=\"ReadStatistics\">\r\n        <div class=\"header\">\r\n            <div class=\"readPersonStatistics\">\r\n                <div class=\"sumPerson\">\r\n                    <p>总人数：{{readStatisticsNum.viewTotal + readStatisticsNum.notViewTotal}} 人</p>\r\n                    <span>|</span>\r\n                    <p>已阅读：{{readStatisticsNum.viewTotal}} 人</p>\r\n                </div>\r\n                <div class=\"willBeread\">\r\n                    <p>未阅读：<span>{{readStatisticsNum.notViewTotal}} </span> 人</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"tab\">\r\n                <p :class=\" viewType == 2 ? 'active' : ''\" @click=\"tabIndexFn(2)\">\r\n                    <span>未读</span>\r\n                    <em></em>\r\n                </p>\r\n                <p :class=\" viewType == 1 ? 'active' : ''\" @click=\"tabIndexFn(1)\">\r\n                    <span>已读</span>\r\n                    <em></em>\r\n                </p>\r\n            </div>\r\n        </div>\r\n        <ul>\r\n            <li v-for=\"(item, index) in readStatisticsList\">\r\n                <b><img :src=\"item.photo\" alt=\"\"></b>\r\n                <div>\r\n                    <h3>{{item.userName}}</h3>\r\n                    <p>{{item.deptOrClass}}</p>\r\n                </div>\r\n                <a v-if=\"viewType == 2\" :href=\"'tel:'+item.phone\"><img src=\"../assets/images/icon_cellphone.png\" alt=\"\"></a>\r\n            </li>\r\n        </ul>\r\n        <div class=\"loding\" v-if=\"loading\">\r\n\t    \t<div class=\"lodingText\" v-if=\"loading2\">\r\n\t    \t\t<i class=\"el-icon-loading activeT\"></i>\r\n\t    \t\t<span>拼命加载中...</span>\r\n\t    \t</div>\r\n\t    \t<div class=\"lodingEnd\" v-else>\r\n\t    \t\t<span>数据加载完毕</span>\r\n\t    \t</div>\r\n\t    </div>\r\n\t    <div class=\"withoutData\" v-if=\"withoutData\">\r\n\t    \t<div>\r\n\t    \t\t<span><img src=\"../assets/images/withoutData.png\" alt=\"\"></span>\r\n\t    \t\t<p>还没有收到消息哦~</p>\r\n\t    \t</div>\r\n\t    </div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n//import xxx from 'xxx.vue'  //引入组建\r\n//import 'xxxx'  //引入JS\r\nexport default {\r\n\t\r\n    name: 'ReadStatistics',\r\n    data(){\r\n        return {\r\n            getnEschoolUrl:this.$store.state.eschool,\r\n            pageNum: 1,\r\n\t\t\tloading: false,\r\n            loading2: false,\r\n            withoutData: false,\t\r\n            viewType:1,\r\n            readStatisticsNum:{},\r\n            readStatisticsList:[],\r\n            readStatisticsListTotal:0\r\n        }\r\n    },\r\n    components:{\r\n        // 组件实例化\r\n    },\r\n    watch:{\r\n\r\n    },\r\n\r\n   \r\n    mounted(){\r\n        const that = this;\r\n        \r\n    },\r\n    created(){\r\n    \tdocument.title=\"阅读统计\";\r\n        document.body.style.background = \"#fff\";\r\n        const that = this;\r\n        that.readStatisticsListFn()\r\n        that\r\n            .$http({\r\n                method: \"GET\",\r\n                url: that.getnEschoolUrl+\"api/announcement/v0.1/\"+this.$route.params.id+\"/view/statistic\",\r\n                headers: {\r\n                    accessToken:sessionStorage.accessToken,\r\n                    schoolId:sessionStorage.schoolId\r\n                },\r\n            })\r\n            .then(function(response) {\r\n                that.readStatisticsNum = response.data\r\n                console.log(that.readStatisticsNum)\r\n            })\r\n            .catch(function(error) {\r\n                console.log(error);\r\n            });\r\n\r\n        window.onscroll = function() {\r\n        //变量scrollTop是滚动条滚动时，距离顶部的距离\r\n            var scrollTop =\r\n                document.documentElement.scrollTop || document.body.scrollTop; //变量windowHeight是可视区的高度\r\n            var windowHeight =\r\n                document.documentElement.clientHeight || document.body.clientHeight; //变量scrollHeight是滚动条的总高度\r\n            var scrollHeight =\r\n                document.documentElement.scrollHeight || document.body.scrollHeight; //滚动条到底部的条件\r\n\r\n            if (scrollTop + windowHeight == scrollHeight) {\r\n                if (that.readStatisticsList.length < that.readStatisticsListTotal) {\r\n                    that.pageNum++;\r\n                    that.getnReadStatisticsListPushFn();\r\n                } else if (that.readStatisticsList.length == that.readStatisticsListTotal) {\r\n                    that.loading2 = false;\r\n                }\r\n            }\r\n        };\r\n\r\n    },\r\n    methods: {\r\n        tabIndexFn(index){\r\n            const that = this;\r\n            that.viewType = index;\r\n            that.pageNum = 1;\r\n            \r\n            window.scrollTo(0,0);\r\n            that.readStatisticsListFn()\r\n        },\r\n        readStatisticsListFn(){\r\n            const that = this;\r\n            that.loading = true;\r\n            that.loading2 = true;\r\n            that.withoutData = false;\r\n            that\r\n                .$http({\r\n                    method: \"GET\",\r\n                    url: that.getnEschoolUrl+\"api/announcement/v0.1/\"+this.$route.params.id+\"/view\",\r\n                    headers: {\r\n                        accessToken:sessionStorage.accessToken,\r\n                        schoolId:sessionStorage.schoolId\r\n                    },\r\n                    params:{\r\n                        viewType:that.viewType,\r\n                        pageNum: that.pageNum,\r\n                    }\r\n                })\r\n                .then(function(response) {\r\n                    if(response.data.total > 0)\r\n                    {\r\n                        that.readStatisticsListTotal = response.data.total;\r\n                        that.readStatisticsList = response.data.rows;\r\n                        if (that.readStatisticsList.length < that.readStatisticsListTotal) {\r\n                            that.loading = false;\r\n                        } else if (that.readStatisticsList.length == that.readStatisticsListTotal) {\r\n                            if (that.readStatisticsList.length < 8) {\r\n                                that.loading = false;\r\n                            }\r\n                            that.loading2 = false;\r\n                        }\r\n\r\n                    }\r\n                    else\r\n                    {\r\n                        that.readStatisticsListTotal = response.data.total;\r\n                        that.readStatisticsList = response.data.rows;\r\n                        that.loading = false;\r\n                        that.withoutData = true;\r\n                    }\r\n                  \r\n                })\r\n                .catch(function(error) {\r\n                    console.log(error);\r\n                });\r\n        },\r\n        getnReadStatisticsListPushFn(){\r\n            var that = this;\r\n            that.loading = true;\r\n            that.loading2 = true;\r\n            that.withoutData = false;\r\n            that\r\n                .$http({\r\n                    method: \"GET\",\r\n                    url: that.getnEschoolUrl+\"api/announcement/v0.1/\"+this.$route.params.id+\"/appView\",\r\n                    headers: {\r\n                        accessToken:sessionStorage.accessToken,\r\n                        schoolId:sessionStorage.schoolId\r\n                    },\r\n                    params: {\r\n                        pageNum: that.pageNum,\r\n                        viewType:that.viewType,\r\n                    }\r\n                })\r\n                .then(function(response) {\r\n                if (that.readStatisticsList.length <= that.readStatisticsListTotal) {\r\n                    that.readStatisticsList = that.readStatisticsList.concat(\r\n                        response.data.rows\r\n                    );\r\n                }\r\n                })\r\n                .catch(function(error) {\r\n                    console.log(error);\r\n                });\r\n        }\r\n        \r\n        \r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped=\"\">\r\n@import '../assets/scss/common.scss'; \r\n#ReadStatistics{\r\n    .header{\r\n        position: fixed;\r\n        top: 0;\r\n        width: 100%;\r\n        .readPersonStatistics{\r\n            background: #03A9F4;\r\n            height: 3rem;\r\n            .sumPerson{\r\n                display: flex;\r\n                padding: .6rem .32rem 0;\r\n                color: #fff;\r\n                font-size: .32rem;\r\n                opacity: 0.72;\r\n                span{\r\n                    padding:  0 .48rem;\r\n                }\r\n            }\r\n            .willBeread{\r\n                padding:.4rem .32rem 0;\r\n                font-size: .36rem;\r\n                color: #fff;\r\n                font-weight: bold;\r\n                span{\r\n                    font-weight: normal;\r\n                    font-size: .72rem;\r\n                }\r\n            }\r\n        }\r\n        .tab{\r\n            background: #fff;\r\n            display: flex;\r\n            line-height: .9rem;\r\n            border-bottom: 1px solid #F2F5F5;\r\n            p{\r\n                flex: 1;\r\n                display: flex;\r\n                flex-direction: column;\r\n                align-items: center;\r\n                span{\r\n                    font-size: .3rem;\r\n                    color: #A3B5C7;\r\n                }\r\n                em{\r\n                    width: .52rem;\r\n                    height: 2px;\r\n                    background: #15B4F1;\r\n                    display: none;\r\n                }\r\n                &.active{\r\n                    span{\r\n                        color: #03A9F4;\r\n                    }\r\n                    em{\r\n                        display: block;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    ul{\r\n        padding-top: 4.14rem;\r\n        li{\r\n            display: flex;\r\n            align-items: center;\r\n            padding: .34rem .32rem;\r\n            border-bottom: 1px solid #F2F5F5;\r\n            b{\r\n                width: .8rem;\r\n                height: .8rem;\r\n                overflow: hidden;\r\n                border-radius: 50%;\r\n            }\r\n            div{\r\n                padding-left: .32rem;\r\n                flex: 1;\r\n                h3{\r\n                    font-size: .32rem;\r\n                    color: #333333;\r\n                    font-weight: normal;\r\n                }\r\n                p{\r\n                    font-size: .24rem;\r\n                    color: #999999;\r\n                }\r\n            }\r\n            a{\r\n                width: .48rem;\r\n                height: .48rem;\r\n            }\r\n        }\r\n    }\r\n    .withoutData{\r\n        padding-top: 2rem;\r\n    }\r\n}\r\n\r\n\r\n</style>   "]}]}