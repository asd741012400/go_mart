{"remainingRequest":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangshuai/Documents/apppages/src/views/InformationDetails.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huangshuai/Documents/apppages/src/views/InformationDetails.vue","mtime":1544753633553},{"path":"/Users/huangshuai/Documents/apppages/node_modules/cache-loader/dist/cjs.js","mtime":1542800631269},{"path":"/Users/huangshuai/Documents/apppages/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/cache-loader/dist/cjs.js","mtime":1542800631269},{"path":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  name: \"InformationDetails\",\r\n  data() {\r\n    return {\r\n      url: this.$store.state.userDataUrl2,\r\n      date: null,\r\n      dormNo: null,\r\n      students: [],\r\n      studentsNum: 0,\r\n      statusAndCounts:[]\r\n    };\r\n  },\r\n  components: {\r\n    // 组件实例化\r\n  },\r\n  created() {\r\n    // var qs=require('qs');\r\n    const that = this;\r\n    document.body.style.background = \"#f8f8f8\";\r\n    that.getInformationDetailsData();\r\n    document.title = that.$route.query.titles;\r\n    that.common.setingTtitle(that.$route.query.titles)\r\n  },\r\n  mounted() {\r\n  },\r\n  methods: {\r\n    getInformationDetailsData: function(res) {\r\n      var that = this;\r\n      console.log(that.$route.query);\r\n      var roomId = that.$route.query.roomId;\r\n      that\r\n        .$http({\r\n          method: \"GET\",\r\n          url:\r\n            that.url +\r\n            \"api/dormitory/v0.1/patrol/resultdetail/roomIds/\" +\r\n            roomId +\r\n            \"/messageCenter?date=\" +\r\n            that.$route.query.date,\r\n          headers: {\r\n            accessToken: sessionStorage.userId\r\n          }\r\n        })\r\n        .then(function(response) {\r\n          that.date = response.data.date;\r\n          that.dormNo = response.data.dormNo;\r\n          that.students = response.data.students;\r\n          that.studentsNum = response.data.total;\r\n          that.statusAndCounts = response.data.statusAndCounts;\r\n\r\n          that.drawLine(response.data);\r\n\r\n\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    drawLine(data) {\r\n      // 基于准备好的dom，初始化echarts实例\r\n      let myChart = this.$echarts.init(document.getElementById(\"echarts\"));\r\n      // 绘制图表\r\n      var normal = data.total - data.students.length;\r\n      var vacant = data.students.length;\r\n      console.log(normal)\r\n      console.log(vacant)\r\n      myChart.setOption({\r\n        tooltip: {\r\n          trigger: \"item\",\r\n          formatter: \"{a} <br/>{b}: {c} ({d}%)\"\r\n        },\r\n        series: [\r\n          {\r\n            name: data.dormNo,\r\n            type: \"pie\",\r\n            radius: [\"60%\", \"70%\"],\r\n            center: [\"50%\", \"120\"],\r\n            avoidLabelOverlap: false,\r\n            label: {\r\n              normal: {\r\n                show: false,\r\n                position: \"center\"\r\n              },\r\n              emphasis: {\r\n                show: false,\r\n                textStyle: {\r\n                  fontSize: \"30\",\r\n                  fontWeight: \"bold\"\r\n                }\r\n              }\r\n            },\r\n            labelLine: {\r\n              normal: {\r\n                show: false\r\n              }\r\n            },\r\n            data: [\r\n              { value: normal, name: \"正常考勤\", itemStyle: { color: \"#4A90E2\" } },\r\n              { value: vacant, name: \"缺寝\", itemStyle: { color: \"#E0E0E0\" } }\r\n            ]\r\n          }\r\n        ]\r\n      });\r\n    }\r\n  }\r\n};\r\n",{"version":3,"sources":["InformationDetails.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"InformationDetails.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div id=\"InformationDetails\">\r\n\t\t<div class=\"titles\">\r\n\t\t\t<p>【{{dormNo}}】</p>\r\n\t\t\t<time>{{date}}</time>\r\n\t\t</div>\r\n\t\t<div class=\"echartsData\">\r\n\t\t\t<div class=\"echarts\" id=\"echarts\"></div>\r\n\t\t\t<div class=\"tle\">\r\n\t\t\t\t<span>正常考勤/应到人数</span>\r\n\t\t\t\t<p>{{studentsNum - students.length}}/{{studentsNum}}</p>\t\r\n\t\t\t</div>\r\n\t\t\t<div class=\"tab\">\r\n\t\t\t\t<div v-for=\"(item, index) in statusAndCounts\">\r\n\t\t\t\t\t<span>{{item.count}}</span>\r\n\t\t\t\t\t<p>{{item.status}}</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\t\r\n\t\t</div>\r\n\t\t<div class=\"abnormity\">\r\n\t\t\t<div class=\"tle\">\r\n\t\t\t\t<p>异常考勤详细</p>\r\n\t\t\t\t<span>{{students.length}}人</span>\r\n\t\t\t</div>\r\n\t\t\t<ul>\r\n\t\t\t\t<li v-for=\"(item, index) in students\" v-if=\"students.length > 0\">\r\n\t\t\t\t\t<span><img :src=\"item.portrait\" alt=\"\"></span>\r\n\t\t\t\t\t<p class=\"name\">{{item.name}}</p>\r\n\t\t\t\t\t<em>{{item.className}}</em>\r\n\t\t\t\t\t<i>{{item.status}}</i>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"InformationDetails\",\r\n  data() {\r\n    return {\r\n      url: this.$store.state.userDataUrl2,\r\n      date: null,\r\n      dormNo: null,\r\n      students: [],\r\n      studentsNum: 0,\r\n      statusAndCounts:[]\r\n    };\r\n  },\r\n  components: {\r\n    // 组件实例化\r\n  },\r\n  created() {\r\n    // var qs=require('qs');\r\n    const that = this;\r\n    document.body.style.background = \"#f8f8f8\";\r\n    that.getInformationDetailsData();\r\n    document.title = that.$route.query.titles;\r\n    that.common.setingTtitle(that.$route.query.titles)\r\n  },\r\n  mounted() {\r\n  },\r\n  methods: {\r\n    getInformationDetailsData: function(res) {\r\n      var that = this;\r\n      console.log(that.$route.query);\r\n      var roomId = that.$route.query.roomId;\r\n      that\r\n        .$http({\r\n          method: \"GET\",\r\n          url:\r\n            that.url +\r\n            \"api/dormitory/v0.1/patrol/resultdetail/roomIds/\" +\r\n            roomId +\r\n            \"/messageCenter?date=\" +\r\n            that.$route.query.date,\r\n          headers: {\r\n            accessToken: sessionStorage.userId\r\n          }\r\n        })\r\n        .then(function(response) {\r\n          that.date = response.data.date;\r\n          that.dormNo = response.data.dormNo;\r\n          that.students = response.data.students;\r\n          that.studentsNum = response.data.total;\r\n          that.statusAndCounts = response.data.statusAndCounts;\r\n\r\n          that.drawLine(response.data);\r\n\r\n\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    drawLine(data) {\r\n      // 基于准备好的dom，初始化echarts实例\r\n      let myChart = this.$echarts.init(document.getElementById(\"echarts\"));\r\n      // 绘制图表\r\n      var normal = data.total - data.students.length;\r\n      var vacant = data.students.length;\r\n      console.log(normal)\r\n      console.log(vacant)\r\n      myChart.setOption({\r\n        tooltip: {\r\n          trigger: \"item\",\r\n          formatter: \"{a} <br/>{b}: {c} ({d}%)\"\r\n        },\r\n        series: [\r\n          {\r\n            name: data.dormNo,\r\n            type: \"pie\",\r\n            radius: [\"60%\", \"70%\"],\r\n            center: [\"50%\", \"120\"],\r\n            avoidLabelOverlap: false,\r\n            label: {\r\n              normal: {\r\n                show: false,\r\n                position: \"center\"\r\n              },\r\n              emphasis: {\r\n                show: false,\r\n                textStyle: {\r\n                  fontSize: \"30\",\r\n                  fontWeight: \"bold\"\r\n                }\r\n              }\r\n            },\r\n            labelLine: {\r\n              normal: {\r\n                show: false\r\n              }\r\n            },\r\n            data: [\r\n              { value: normal, name: \"正常考勤\", itemStyle: { color: \"#4A90E2\" } },\r\n              { value: vacant, name: \"缺寝\", itemStyle: { color: \"#E0E0E0\" } }\r\n            ]\r\n          }\r\n        ]\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped=\"\">\r\n.titles {\r\n  background: #fff;\r\n  line-height: 0.96rem;\r\n  p {\r\n    font-size: 0.32rem;\r\n    color: #333333;\r\n    padding: 0 0.32rem;\r\n    border-bottom: 1px solid #e0e0e0;\r\n  }\r\n  time {\r\n    display: block;\r\n    padding: 0 0.32rem;\r\n    font-size: 0.3rem;\r\n    color: #666666;\r\n  }\r\n}\r\n.echartsData {\r\n  height: 5.94rem;\r\n  background: #fff;\r\n  position: relative;\r\n  .tle {\r\n    position: absolute;\r\n    top: 110px;\r\n    text-align: center;\r\n    width: 100%;\r\n    p {\r\n      font-size: 0.4rem;\r\n      color: #4a4a4a;\r\n      letter-spacing: 0.04rem;\r\n    }\r\n    span {\r\n      font-size: 0.24rem;\r\n      color: #bcbcbc;\r\n    }\r\n  }\r\n  .echarts {\r\n    margin-top: 0.2rem;\r\n    height: 4.7rem;\r\n  }\r\n  .tab {\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    text-align: center;\r\n    div {\r\n      flex: 1;\r\n      span {\r\n        font-size: 0.4rem;\r\n        color: #6a6a6a;\r\n      }\r\n      p {\r\n        font-size: 0.28rem;\r\n        color: #a7a7a7;\r\n      }\r\n    }\r\n  }\r\n}\r\n.abnormity {\r\n  .tle {\r\n    height: 0.6rem;\r\n    padding: 0 0.3rem;\r\n    display: flex;\r\n    align-items: center;\r\n    p {\r\n      font-size: 0.26rem;\r\n      color: #999999;\r\n      flex: 1;\r\n    }\r\n    span {\r\n      font-size: 0.28rem;\r\n      color: #6c6c6c;\r\n    }\r\n  }\r\n  ul {\r\n    li {\r\n      margin-bottom: 0.16rem;\r\n      background: #fff;\r\n      padding: 0.2rem 0.3rem;\r\n      display: flex;\r\n      align-items: center;\r\n      span {\r\n        width: 0.8rem;\r\n        height: 0.8rem;\r\n        border-radius: 50%;\r\n        overflow: hidden;\r\n      }\r\n      p {\r\n        margin-left: 0.32rem;\r\n        font-size: 0.32rem;\r\n        color: #666666;\r\n      }\r\n      em {\r\n        font-style: normal;\r\n        padding-left: 0.24rem;\r\n        font-size: 0.24rem;\r\n        color: rgba(102, 102, 102, 0.87);\r\n        flex: 1;\r\n      }\r\n      i {\r\n        font-style: normal;\r\n        font-size: 0.32rem;\r\n        color: #f5a623;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}