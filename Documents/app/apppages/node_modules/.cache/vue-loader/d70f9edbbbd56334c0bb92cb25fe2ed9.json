{"remainingRequest":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangshuai/Documents/apppages/src/views/NewApplyFor.vue?vue&type=style&index=1&lang=scss&","dependencies":[{"path":"/Users/huangshuai/Documents/apppages/src/views/NewApplyFor.vue","mtime":1551354924125},{"path":"/Users/huangshuai/Documents/apppages/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/cache-loader/dist/cjs.js","mtime":1542800631269},{"path":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.picker{\n    .picker-toolbar{\n        display: flex;\n        justify-content:space-between;\n        align-items: center;\n        border-bottom:1px solid #ddd;\n        padding:0 .32rem;\n        a{\n            font-size: .36rem;\n            &.sure{\n                color:#03A9F4;\n            }\n        }\n    }\n}\n",{"version":3,"sources":["NewApplyFor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAseA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NewApplyFor.vue","sourceRoot":"src/views","sourcesContent":["<template>\n\t<div id=\"NewApplyFor\">\n\t\t<div class=\"header\">\n            <div>\n                <span class=\"left\" @click=\"webHistory\"><img src=\"../assets/images/icon_ruturn.png\" alt=\"\"></span>\n                <span @click=\"webClose\"><img src=\"../assets/images/icon_close2.png\" alt=\"\"></span>\n            </div>\n            <p>新建调班申请</p>\n            <div>\n                <a @click=\"messageBox\">确认</a>\n            </div>\n        </div>\n        <ul class=\"margin_ul\">\n            <li>\n                <span>调班时间</span>\n                <p @click.stop=\"openPicker('startTime')\">\n                    <mt-datetime-picker\n                        type=\"datetime\"\n                        ref=\"picker\"\n                        @confirm=\"handleConfirm\"\n                        @cancel=\"closeConfirm\"\n                        :startDate=\"startDate\"\n                    >\n                    </mt-datetime-picker>\n                    {{startTime}}\n                    <a v-if=\"startTime == undefined\">请选择</a>\n                </p>\n                <em><img src=\"../assets/images/icon_arrowsR3.png\" alt=\"\"></em>\n            </li>\n            <li>\n                <span>值班类型</span>\n                <p @click=\"pickerShow\">\n                    {{pickerType}}\n                    <a v-if=\"pickerType == undefined\">请选择</a>\n                </p>\n                <em><img src=\"../assets/images/icon_arrowsR3.png\" alt=\"\"></em>\n            </li>\n            <li>\n                <span>详细地点</span>\n                <p>\n                    <input type=\"text\" placeholder=\"请输入\" v-model=\"siteStr\">\n                </p>\n            </li>\n        </ul>\n        <ul>\n            <li>\n                <span>被调人</span>\n                <p @click=\"theJumpPage('SelectApplyFor')\">\n                    <a v-if=\"receive == undefined\">请选择</a>\n                    <a v-else>{{receive.name}}</a>\n                </p>\n                <em><img src=\"../assets/images/icon_arrowsR3.png\" alt=\"\"></em>\n            </li>\n            <li>\n                <span>被调时间</span>\n                <p @click.stop=\"openPicker('endTime')\">\n                    <mt-datetime-picker\n                        type=\"datetime\"\n                        ref=\"picker\"\n                        @confirm=\"handleConfirm\"\n                        @cancel=\"closeConfirm\"\n                        :startDate=\"startDate\"\n                    >\n                    </mt-datetime-picker>\n                    {{endTime}}\n                    <a v-if=\"endTime == undefined\">请选择</a>\n                </p>\n                <em><img src=\"../assets/images/icon_arrowsR3.png\" alt=\"\"></em>\n            </li>\n        </ul>\n        <ul>\n            <li>\n                <span>指定审核人</span>\n                <p @click=\"theJumpPage('Nominator')\">\n                    <a v-if=\"audit == undefined\">请选择</a>\n                    <a v-else>{{audit.name}}</a>\n                </p>\n                <em><img src=\"../assets/images/icon_arrowsR3.png\" alt=\"\"></em>\n            </li>\n        </ul>\n        <div class=\"picker_div\" v-if=\"pickerDiv\">\n            <div>\n                <mt-picker :slots=\"slots\" :show-toolbar=\"true\" @change=\"onValuesChange\">\n                    <a @click=\"cancelPicker\" class=\"cancel\">取消</a>\n                    <a @click=\"handlePicker\" class=\"sure\">确认</a>\n                </mt-picker>\n            </div>\n        </div>\n\n\t</div>\n\n\n    \n</template>\n\n<script>\n//import xxx from 'xxx.vue'  //引入组建\n//import 'xxxx'  //引入JS\nimport { DatetimePicker , Picker , MessageBox} from 'mint-ui';\nimport moment from 'moment'\nimport Vue from \"vue\";\n\nVue.component(Picker.name, Picker);\nVue.component(DatetimePicker.name, DatetimePicker);\nexport default {\n    name: 'NewApplyFor',\n    data(){\n        return {\n            startTime:this.$store.state.startTime,\n            endTime:this.$store.state.endTime,\n            startDate: new Date(),\n            timeIndex:\"\",\n            siteStr:this.$store.state.siteStr,\n            audit:this.$store.state.audit,\n            receive:this.$store.state.receive,\n            slots:[{values: [\"班级考勤\",\"值班查宿\",\"楼层巡查\",\"区域巡查\"]}],\n            pickerDiv:false,\n            pickerTypeStr:\"\",\n            pickerType:this.$store.state.pickerType,\n        }\n    },\n    components:{\n        // 组件实例化\n    },\n \n    mounted(){\n    },\n    created(){\n\t\t// document.title = \"值班交接\";\n    \tdocument.body.style.background = \"#f8f8f8\";\n        const that = this;\n        // that.common.setingTtitle('值班交接')\n    },\n    methods: {\n        //开启时间选择器\n        openPicker (str) {\n            \n            this.timeIndex = str\n            this.$refs.picker.open()\n        },\n        //点击确定按钮\n        handleConfirm (data) {\n            let date = moment(data).format('YYYY-MM-DD HH:MM')\n            if(this.timeIndex == \"startTime\")\n            {\n                this.startTime = date\n            }\n            else\n            {\n                this.endTime = date\n            }\n            const that = this;\n            Vue.nextTick(function () {\n                that.$refs.picker.close();\n            });\n            \n        },\n\n        //点击取消按钮\n        closeConfirm(){\n            const that = this;\n            Vue.nextTick(function () {\n                that.$refs.picker.close();\n            });\n        },\n\n\n        onValuesChange(picker, values) {\n            if (values[0] > values[1]) {\n                console.log(picker.setSlotValue(1, values[0]))\n            }\n            this.pickerTypeStr = values[0]\n        },\n        messageBox(){\n            const that = this;\n            MessageBox.confirm('', { \n                message: '立即提交申请', \n                title: '', \n            }).then(action => {\n                var startTime = that.startTime;\n                var endTime = that.endTime;\n                var siteStr = that.siteStr;\n                var audit = that.audit;\n                var receive = that.receive;\n                var pickerType = that.pickerType;\n                var pickerTypeStr = \"\";\n                \n\n\n\n\n                if(startTime != undefined && endTime != undefined && siteStr != undefined && audit != undefined && receive != undefined && pickerType != undefined)\n                {\n\n                    startTime = startTime.split(' ')[0];\n                    endTime = endTime.split(' ')[0];\n                    switch (pickerType) {\n                        case \"区域巡查\":\n                            pickerTypeStr = 0;\n                            break;\n                        case \"楼层巡查\":\n                            pickerTypeStr = 1;\n                            break;\n                        case \"班级考勤\":\n                            pickerTypeStr = 2;\n                            break;  \n                        case \"值班查宿\":\n                            pickerTypeStr = 3;\n                            break;  \n                        default:\n                            break;\n                    }\n\n                    const formData = {\n                        account_id:sessionStorage.account_id,\n                        applytime:startTime,\n                        applytype:pickerTypeStr,\n                        applyaddress:siteStr,\n                        receive_id:receive.account_id,\n                        receive_name:receive.name,\n                        receive_time:endTime,\n                        audit_id:audit.account_id,\n                        audit_name:audit.name,\n                    };\n\n                    that.$http.post('/api/shiftApply',formData,{\n                        headers: {\n                            accessToken:sessionStorage.accessToken,\n                            schoolId:sessionStorage.schoolId,\n                            \"Content-Type\":\"application/json\"\n                        }\n                    })\n                    .then(response=>{\n                        MessageBox.alert('', { \n                            message: response.data.errorMsg, \n                            title: '', \n                        }).then(action => {\n\n                            if(response.data.status == 200)\n                            {\n                                history.go(-1) \n                            }\n                        })\n                        \n                        console.log(response)\n                    })  \n                    .catch(function(error) {\n                        console.log(error);\n                    });\n                }\n                else\n                {\n                    MessageBox.alert('', { \n                        message: '请填写完整资料', \n                        title: '', \n                    })\n                }\n            });\n        },\n\n        webClose(){\n            closeWeb()\n        },\n        webHistory(){\n            history.go(-1) \n        },\n\n        pickerShow(){\n            this.pickerDiv = true;\n        },\n        cancelPicker(){\n            this.pickerDiv = false;\n        },\n        handlePicker(){\n            this.pickerType = this.pickerTypeStr \n            this.pickerDiv = false;\n        },\n        theJumpPage(str){\n            const that = this;\n          \n            if(that.startTime != undefined)\n            {\n                that.$store.state.startTime = that.startTime;\n                that.$store.state.pickerType = that.pickerType;\n                that.$store.state.endTime = that.endTime;\n                that.$store.state.siteStr = that.siteStr;\n                that.$router.push({\n                    name: str\n                });\n            }\n            else\n            {\n                MessageBox.alert('', { \n                    message: '请选择调班时间', \n                    title: '', \n                })\n            }\n            \n        }\n\n    },\n}\n</script>\n\n<style lang=\"scss\" scoped=\"\">\n/*@import ''*/ \n#NewApplyFor{\n    .header{\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        padding: 0 .32rem;\n        height: .88rem;\n        position: fixed;\n        top: 0;\n        width: 100%;\n        background: #fff;\n        div{\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            span{\n                width: .48rem;\n                overflow: hidden;\n            }\n            .left{\n                margin-right: .32rem;\n            }\n            a{\n                width: 1.28rem;\n                font-size: .32rem;\n                color: #03A9F4;\n                text-align: right;\n            }\n        }\n        p{\n            flex: 1;\n            text-align: center;\n            font-size: .36rem;\n            font-weight: bold;\n            color: #333333;\n        }\n    }\n    .margin_ul{\n        padding-top:1.08rem;\n    }\n    ul{\n        padding-top: .2rem;\n        li{\n            background: #fff;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            padding: 0 .32rem;\n            height: .96rem;\n            border-bottom: 1px solid #E4E9EC;\n            span{\n                font-size: .32rem;\n                width: 2rem;\n                color: #333333;\n            }\n            p{\n                flex: 1;\n                font-size: .32rem;\n                overflow: hidden;\n                color: #333333;\n                text-align: right;\n                a{\n                    color: #999999;\n                }\n                input{\n                    width: 100%;\n                    height: 100%;\n                    text-align: right;\n                }\n            }\n            em{\n                font-style: normal;\n                width: .5rem;\n            }\n        }\n    }\n    .publicContent{\n        margin-top: .2rem;\n        padding: .3rem .32rem;\n        background: #fff;\n        display: flex;\n        span{\n            width: 2rem;\n            font-size: .32rem;\n            color: #333333;\n        }\n        p{\n            flex: 1;\n            textarea{\n                width: 100%;\n                height: 2rem;\n                font-size: .32rem;\n                border: 0;\n            }\n        }\n    }\n    \n    .upload{\n        margin-top: .2rem;\n        padding: 0 .32rem .32rem;\n        background: #fff;\n        p{\n            font-size: .24rem;\n            padding: .32rem 0 .12rem;\n            color: #999999;\n        }  \n        .uploadContent{\n            overflow: hidden;\n            ul{\n                float: left;\n                display: flex;\n                padding-top: .2rem;\n                flex-wrap: wrap;\n                li{\n                    width: 1.6rem;\n                    border: 1px solid #e0e0e0;\n                    height: 1.6rem;\n                    margin-right: .5rem;\n                    position: relative;\n                    margin-bottom: .2rem;\n                    span{\n                        overflow: hidden;\n                        img{\n                            height: 100%;\n                        }\n                    }\n                    i{\n                        position: absolute;\n                        right: -.2rem;\n                        top: -.2rem;\n                        width: .4rem;\n                        height: .4rem;\n                    }\n                    \n                    \n                }\n            }\n            div{\n                float: left;\n                width: 1.6rem;\n                height: 1.6rem;\n                margin-top: .2rem;\n                border: 2px dashed #e0e0e0;\n                box-sizing: border-box;\n                line-height: 1.4rem;\n                text-align: center;\n                font-size: .72rem;\n                color: #e0e0e0;\n                position: relative;\n                input{\n                    position: absolute;\n                    left: 0;\n                    top: 0;\n                    width: 100%;\n                    height: 100%;\n                    z-index: 10;\n                    opacity: 0;\n                }\n            }\n        }\n        \n    }\n    .picker_div{\n        position: fixed;\n        top: 0;\n        background: rgba(0, 0, 0, .5);\n        width: 100%;\n        height: 100%;\n        div{\n            background: #fff;\n            position: absolute;\n            bottom: 0;\n            width: 100%;\n        }\n    }\n}\n\n</style>\n\n<style lang=\"scss\">\n.picker{\n    .picker-toolbar{\n        display: flex;\n        justify-content:space-between;\n        align-items: center;\n        border-bottom:1px solid #ddd;\n        padding:0 .32rem;\n        a{\n            font-size: .36rem;\n            &.sure{\n                color:#03A9F4;\n            }\n        }\n    }\n}\n</style>\n\n"]}]}