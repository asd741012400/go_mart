{"remainingRequest":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangshuai/Documents/apppages/src/views/ApplyFor.vue?vue&type=style&index=1&lang=css&","dependencies":[{"path":"/Users/huangshuai/Documents/apppages/src/views/ApplyFor.vue","mtime":1551356967577},{"path":"/Users/huangshuai/Documents/apppages/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/cache-loader/dist/cjs.js","mtime":1542800631269},{"path":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.mint-datetime-picker{\n    width: 100%;\n}\n\n",{"version":3,"sources":["ApplyFor.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsXA;AACA;AACA","file":"ApplyFor.vue","sourceRoot":"src/views","sourcesContent":["<template>\n\t<div id=\"ApplyFor\">\n\t\t<div class=\"header\">\n            <div>\n                <span class=\"left\" @click=\"webClose\"><img src=\"../assets/images/icon_close2.png\" alt=\"\"></span>\n                <span></span>\n            </div>\n            <p>调班申请</p>\n            <div>\n                <span class=\"left\"></span>\n                <span @click=\"theJumpPage('NewApplyFor')\"><img src=\"../assets/images/icon_new.png\" alt=\"\"></span>\n            </div>\n        </div>\n        <div class=\"ConnectList_header\">\n            <p :class=\" tabType == 0 ? 'active' : ''\" @click=\"tabIndexFn(0)\">\n                <span>进行中</span>\n                <em></em>\n            </p>\n            <p :class=\" tabType == 1 ? 'active' : ''\" @click=\"tabIndexFn(1)\">\n                <span>已完成</span>\n                <em></em>\n            </p>\n        </div>\n        <ul class=\"connect_deal\" v-if=\"tabType== 0\">\n            <li v-for=\"(item, index) in evaluatingList\" @click=\"clickDel(index)\">\n                <p>\n                    <span>被调人</span>\n                    <time>调班时间</time>\n                </p>\n                <div>\n                    <span><img :src=\"item.receive_headimageurl\" alt=\"\"></span>\n                    <a>{{item.receive_name}}</a>\n                    <time>{{item.receive_time}}</time>\n                </div>\n            </li>\n        </ul>\n        <ul class=\"connect_join\" v-else>\n            <li v-for=\"(item, index) in evaluatingList\" @click=\"clickDel(index)\">\n                <p>\n                    <span>被调人</span>\n                    <a class=\"col1\" v-if=\"item.auditstate == 3\">已撤销</a>\n                    <a class=\"col2\" v-else-if=\"item.auditstate == 1\">已完成</a>\n                    <a class=\"col3\" v-else-if=\"item.auditstate == 2\">已驳回</a>\n                </p>\n                <div>\n                    <span><img :src=\"item.receive_headimageurl\" alt=\"\"></span>\n                    <a>{{item.receive_name}}</a>\n                </div>\n            </li>\n        </ul>\n\n        <div class=\"loding\" v-if=\"loading\">\n\t    \t<div class=\"lodingText\" v-if=\"loading2\">\n\t    \t\t<i class=\"el-icon-loading activeT\"></i>\n\t    \t\t<span>拼命加载中...</span>\n\t    \t</div>\n\t    \t<div class=\"lodingEnd\" v-else>\n\t    \t\t<span>数据加载完毕</span>\n\t    \t</div>\n\t    </div>\n\t    <div class=\"withoutData\" v-if=\"withoutData\">\n\t    \t<div>\n\t    \t\t<span><img src=\"../assets/images/withoutData.png\" alt=\"\"></span>\n\t    \t\t<p>暂无数据</p>\n\t    \t</div>\n\t    </div>\n\t</div>\n    \n</template>\n\n<script>\n//import xxx from 'xxx.vue'  //引入组建\n//import 'xxxx'  //引入JS\n\nexport default {\n    name: 'ApplyFor',\n    data(){\n        return {\n            evaluatingUrl:this.$store.state.lianhezongdao,\n\t\t\tevaluatingList:[],\n            evaluatingListTotal: 0,\n\t\t\tpageNum: 1,\n\t\t\tpageSize:8,\n\t\t\tloading: false,\n            loading2: false,\n            withoutData: false,\t\n            tabType:0\n        }\n    },\n    components:{\n        // 组件实例化\n    },\n \n    mounted(){\n\t\tthis.appEvaluationInfoList()\n    },\n    created(){\n\t\tdocument.body.style.background = \"#f8f8f8\";\n\t\tvar qs=require('qs');\n        const that = this; \n        sessionStorage.setItem(\"account_id\", this.$route.query.account_id);\n        sessionStorage.setItem(\"accessToken\", this.$route.query.accessToken);\n        sessionStorage.setItem(\"schoolId\", this.$route.query.schoolId);\n\t\twindow.onscroll = function() {\n        //变量scrollTop是滚动条滚动时，距离顶部的距离\n            var scrollTop =\n                document.documentElement.scrollTop || document.body.scrollTop; //变量windowHeight是可视区的高度\n            var windowHeight =\n                document.documentElement.clientHeight || document.body.clientHeight; //变量scrollHeight是滚动条的总高度\n            var scrollHeight =\n                document.documentElement.scrollHeight || document.body.scrollHeight; //滚动条到底部的条件\n\n            if (scrollTop + windowHeight == scrollHeight) {\n\n                if (that.evaluatingList.length < that.evaluatingListTotal) {\n\t\t\t\t\tthat.pageNum++;\n                    that.appEvaluationInfoListFn();\n                } else if (that.evaluatingList.length == that.evaluatingListTotal) {\n                    that.loading2 = false;\n                }\n            }\n\t\t};\n    },\n    methods: {\n\t\tappEvaluationInfoList(){\n\t\t\tconst qs=require('qs');\n\t\t\tconst that = this;\n            that.informationList = [];\n            that.pageNum = 1;\n            that.loading = true;\n            that.loading2 = true;\n\t\t\tthat.withoutData = false;\n\t\t\tconst formData = {\n                account_id:sessionStorage.account_id,\n\t\t\t\tpageNum:that.pageNum,\n                pageSize:that.pageSize,\n                type:that.tabType\n\t\t\t};\n\t\t\tthat.$http.post('/api/getApplyList',formData,{\n                headers: {\n                    accessToken:sessionStorage.accessToken,\n                    schoolId:sessionStorage.schoolId,\n                    \"Content-Type\":\"application/json\"\n                }\n            })\n            .then(response=>{\n                if(response.data.total > 0)\n                {\n                    that.evaluatingListTotal = response.data.total;\n                    that.evaluatingList = response.data.rows;\n                    if (that.evaluatingList.length < that.evaluatingListTotal) {\n                        that.loading = false;\n                    } else if (that.evaluatingList.length == that.evaluatingListTotal) {\n\n                        if (that.evaluatingList.length < 8) {\n                            that.loading = false;\n                        }\n                        that.loading2 = false;\n                    }\n                }\n                else\n                {\n                    that.evaluatingListTotal = response.data.total;\n                    that.evaluatingList = response.data.rows;\n                    that.loading = false;\n                    that.withoutData = true;\n                }\n            })  \n            .catch(function(error) {\n                console.log(error);\n            });\n\t\t},\n\t\tappEvaluationInfoListFn(){\n\t\t\tconst that = this;\n\t\t\tthat.loading = true;\n            that.loading2 = true;\n\t\t\tthat.withoutData = false;\n\t\t\tconst qs=require('qs');\n\t\t\n\t\t\tconst formData = {\n                account_id:sessionStorage.account_id,\n\t\t\t\tpageNum:that.pageNum,\n                pageSize:that.pageSize,\n                type:that.tabType\n\t\t\t};\n\t\t\tthat.$http.post('/api/getApplyList',formData,{\n                headers: {\n                    accessToken:sessionStorage.accessToken,\n                    schoolId:sessionStorage.schoolId,\n                    \"Content-Type\":\"application/json\"\n                }\n            })\n            .then(response=>{\n                if (that.evaluatingList.length <= that.evaluatingListTotal) {\n                    that.evaluatingList = that.evaluatingList.concat(\n                        response.data.rows\n                    );\n                }\n            })  \n            .catch(function(error) {\n                console.log(error);\n            });\n        },\n\n        tabIndexFn(index){\n            const that = this;\n            that.tabType = index;\n            that.evaluatingList = [];\n            window.scrollTo(0,0);\n            that.appEvaluationInfoList(index)\n        },\n\n        webClose(){\n            closeWeb()\n        },\n\n        theJumpPage(str){\n            const that = this;\n            that.$store.state.startTime = undefined;\n            that.$store.state.endTime = undefined;\n            that.$store.state.siteStr = undefined;\n            that.$store.state.audit = undefined;\n            that.$store.state.receive = undefined;\n            that.$store.state.pickerType = undefined;\n            that.$router.push({\n                name: str\n            });\n        },\n\n        clickDel(index){\n            const that = this;\n            that.$router.push({\n                name: \"ChangeShift\",\n                query:{\n                    id:that.evaluatingList[index].id\n                }\n            });\n        }\n\n\n    },\n}\n</script>\n\n<style lang=\"scss\" scoped=\"\">\n/*@import ''*/ \n@import '../assets/scss/common.scss'; \n#ApplyFor{\n    .header{\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        padding: 0 .32rem;\n        height: .88rem;\n        position: fixed;\n        top: 0;\n        width: 100%;\n        background: #fff;\n        div{\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            span{\n                width: .48rem;\n                overflow: hidden;\n            }\n            .left{\n                margin-right: .32rem;\n            }\n        }\n        p{\n            flex: 1;\n            text-align: center;\n            font-size: .36rem;\n            font-weight: bold;\n            color: #333333;\n        }\n    }\n    .ConnectList_header{\n        position: fixed;\n        top: .88rem;\n        border-top: 1px solid #E4E9EC;\n        border-bottom: 1px solid #E4E9EC;\n        width: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        height: .96rem;\n        background: #fff;\n        p{\n            flex: 1;\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            position: relative;\n            height: .96rem;\n            span{\n                font-size: .32rem;\n                color: #A3B5C7;\n            }\n            em{\n                width: .32rem;\n                height: 2px;\n                background: #03A9F4;\n                display: none;\n                position: absolute;\n                bottom: 0;\n                left: 50%;\n                margin-left: -.16rem;\n            }\n            &.active{\n                span{\n                    color: #03A9F4;\n                }\n                em{\n                    display: block;\n                }\n            }\n        }\n    }\n    ul{\n        padding-top: 1.84rem;\n        li{\n            background: #fff;\n            padding: .32rem;\n            margin-bottom: .2rem;\n            p{\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                font-size: .24rem;\n                color: #999999;\n                a{\n                    font-size: .28rem;\n                    &.col1{\n                        color: #999999;\n                    }\n                    &.col2{\n                        color: #6D81AA;\n                    }\n                    &.col3{\n                        color: #F34343;\n                    }\n                }\n            }\n            div{\n                display: flex;\n                align-items: center;\n                justify-content: flex-start;\n                padding-top: .32rem;\n                font-size: .32rem;\n                color: #333;\n                span{\n                    width: .64rem;\n                    height: .64rem;\n                    border-radius: 50%;\n                    overflow: hidden;\n                    margin-right: .32rem;\n                }\n                a{\n                    flex: 1;\n                }\n            }\n            \n        }\n    }\n    \n    \n}\n\n</style>\n\n<style>\n.mint-datetime-picker{\n    width: 100%;\n}\n\n</style>"]}]}