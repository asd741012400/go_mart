{"remainingRequest":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangshuai/Documents/apppages/src/views/Nominator.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huangshuai/Documents/apppages/src/views/Nominator.vue","mtime":1551354631956},{"path":"/Users/huangshuai/Documents/apppages/node_modules/cache-loader/dist/cjs.js","mtime":1542800631269},{"path":"/Users/huangshuai/Documents/apppages/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/cache-loader/dist/cjs.js","mtime":1542800631269},{"path":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\n//import xxx from 'xxx.vue'  //引入组建\r\n//import 'xxxx'  //引入JS\r\n\r\nexport default {\r\n\t\r\n    name: 'Nominator',\r\n    data(){\r\n        return {\r\n            evaluatingUrl:this.$store.state.lianhezongdao,\r\n\t\t\tevaluatingList:[],\r\n            evaluatingListTotal: 0,\r\n\t\t\tpageNum: 1,\r\n\t\t\tpageSize:8,\r\n\t\t\tloading: false,\r\n            loading2: false,\r\n            withoutData: false,\t\r\n            timer:this.$store.state.startTime\r\n        }\r\n    },\r\n    components:{\r\n        // 组件实例化\r\n    },\r\n\r\n    mounted(){\r\n        this.timer = this.timer.split(' ')[0];\r\n        this.appEvaluationInfoList()\r\n    },\r\n    created(){\r\n        document.body.style.background = \"#f8f8f8\";\r\n\t\tvar qs=require('qs');\r\n        const that = this; \r\n\t\twindow.onscroll = function() {\r\n        //变量scrollTop是滚动条滚动时，距离顶部的距离\r\n            var scrollTop =\r\n                document.documentElement.scrollTop || document.body.scrollTop; //变量windowHeight是可视区的高度\r\n            var windowHeight =\r\n                document.documentElement.clientHeight || document.body.clientHeight; //变量scrollHeight是滚动条的总高度\r\n            var scrollHeight =\r\n                document.documentElement.scrollHeight || document.body.scrollHeight; //滚动条到底部的条件\r\n\r\n            if (scrollTop + windowHeight == scrollHeight) {\r\n\r\n                if (that.evaluatingList.length < that.evaluatingListTotal) {\r\n\t\t\t\t\tthat.pageNum++;\r\n                    that.appEvaluationInfoListFn();\r\n                } else if (that.evaluatingList.length == that.evaluatingListTotal) {\r\n                    that.loading2 = false;\r\n                }\r\n            }\r\n\t\t};\r\n\r\n        \r\n    },\r\n    methods: {\r\n\r\n        appEvaluationInfoList(){\r\n\t\t\tconst qs=require('qs');\r\n\t\t\tconst that = this;\r\n            that.informationList = [];\r\n            that.pageNum = 1;\r\n            that.loading = true;\r\n            that.loading2 = true;\r\n\t\t\tthat.withoutData = false;\r\n\t\t\tconst formData = {\r\n                // account_id:sessionStorage.account_id,\r\n                account_id:\"2249548551117622208\",\r\n\t\t\t\tpageNum:that.pageNum,\r\n                pageSize:that.pageSize,\r\n                applytime:that.timer\r\n\t\t\t};\r\n\t\t\tthat.$http.post('/api/getauduitList',formData,{\r\n                headers: {\r\n                    accessToken:sessionStorage.accessToken,\r\n                    schoolId:sessionStorage.schoolId,\r\n                    \"Content-Type\":\"application/json\"\r\n                }\r\n            })\r\n            .then(response=>{\r\n                if(response.data.total > 0)\r\n                {\r\n                    that.evaluatingListTotal = response.data.total;\r\n                    \r\n                    that.evaluatingList = response.data.rows;\r\n\r\n                    for (let index = 0; index < that.evaluatingList.length; index++) {\r\n                        const element = that.evaluatingList[index];\r\n                        element.state = 0;\r\n                        \r\n                    }\r\n\r\n                    if (that.evaluatingList.length < that.evaluatingListTotal) {\r\n                        that.loading = false;\r\n                    } else if (that.evaluatingList.length == that.evaluatingListTotal) {\r\n\r\n                        if (that.evaluatingList.length < 8) {\r\n                            that.loading = false;\r\n                        }\r\n                        that.loading2 = false;\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    that.evaluatingListTotal = response.data.total;\r\n                    that.evaluatingList = response.data.rows;\r\n                    that.loading = false;\r\n                    that.withoutData = true;\r\n                }\r\n            })  \r\n            .catch(function(error) {\r\n                console.log(error);\r\n            });\r\n\t\t},\r\n\t\tappEvaluationInfoListFn(){\r\n\t\t\tconst that = this;\r\n\t\t\tthat.loading = true;\r\n            that.loading2 = true;\r\n\t\t\tthat.withoutData = false;\r\n\t\t\tconst qs=require('qs');\r\n\t\t\r\n\t\t\tconst formData = {\r\n                account_id:sessionStorage.account_id,\r\n\t\t\t\tpageIndex:that.pageNum,\r\n                pageSize:that.pageSize,\r\n                applytime:that.timer\r\n\t\t\t};\r\n\t\t\tthat.$http.post('/api/getauduitList',formData,{\r\n                headers: {\r\n                    accessToken:sessionStorage.accessToken,\r\n                    schoolId:sessionStorage.schoolId,\r\n                    \"Content-Type\":\"application/json\"\r\n                }\r\n            })\r\n            .then(response=>{\r\n                if (that.evaluatingList.length <= that.evaluatingListTotal) {\r\n                    that.evaluatingList = that.evaluatingList.concat(\r\n                        response.data.rows\r\n                    );\r\n                    for (let index = 0; index < that.evaluatingList.length; index++) {\r\n                        const element = that.evaluatingList[index];\r\n                        element.state = 0;\r\n                    }\r\n                }\r\n            })  \r\n            .catch(function(error) {\r\n                console.log(error);\r\n            });\r\n        },\r\n\r\n\r\n        webClose(){\r\n            closeWeb()\r\n        },\r\n        webHistory(){\r\n            history.go(-1) \r\n        },\r\n\r\n        affirmSelect(index){\r\n            const that = this;\r\n            that.$store.state.audit = that.evaluatingList[index];\r\n            history.go(-1) \r\n        }\r\n    },\r\n}\r\n",{"version":3,"sources":["Nominator.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Nominator.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div id=\"Nominator\">\r\n        <div class=\"header\">\r\n            <div>\r\n                <span class=\"left\" @click=\"webHistory\"><img src=\"../assets/images/icon_ruturn.png\" alt=\"\"></span>\r\n                <span @click=\"webClose\"><img src=\"../assets/images/icon_close2.png\" alt=\"\"></span>\r\n            </div>\r\n            <p>指定审核人</p>\r\n            <div>\r\n                <a>　</a>\r\n            </div>\r\n        </div>\r\n        <ul>\r\n            <li v-for=\"(item, index) in evaluatingList\" @click=\"affirmSelect(index)\">\r\n                <span><img :src=\"item.photo\" alt=\"\"></span>\r\n                <p>{{item.name}}</p>\r\n            </li>\r\n        </ul>\r\n        <div class=\"loding\" v-if=\"loading\">\r\n\t    \t<div class=\"lodingText\" v-if=\"loading2\">\r\n\t    \t\t<i class=\"el-icon-loading activeT\"></i>\r\n\t    \t\t<span>拼命加载中...</span>\r\n\t    \t</div>\r\n\t    \t<div class=\"lodingEnd\" v-else>\r\n\t    \t\t<span>数据加载完毕</span>\r\n\t    \t</div>\r\n\t    </div>\r\n        <div class=\"withoutData\" v-if=\"withoutData\">\r\n            <div>\r\n                <span><img src=\"../assets/images/withoutData.png\" alt=\"\"></span>\r\n                <p>未找到相关信息</p>\r\n            </div>\r\n        </div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n//import xxx from 'xxx.vue'  //引入组建\r\n//import 'xxxx'  //引入JS\r\n\r\nexport default {\r\n\t\r\n    name: 'Nominator',\r\n    data(){\r\n        return {\r\n            evaluatingUrl:this.$store.state.lianhezongdao,\r\n\t\t\tevaluatingList:[],\r\n            evaluatingListTotal: 0,\r\n\t\t\tpageNum: 1,\r\n\t\t\tpageSize:8,\r\n\t\t\tloading: false,\r\n            loading2: false,\r\n            withoutData: false,\t\r\n            timer:this.$store.state.startTime\r\n        }\r\n    },\r\n    components:{\r\n        // 组件实例化\r\n    },\r\n\r\n    mounted(){\r\n        this.timer = this.timer.split(' ')[0];\r\n        this.appEvaluationInfoList()\r\n    },\r\n    created(){\r\n        document.body.style.background = \"#f8f8f8\";\r\n\t\tvar qs=require('qs');\r\n        const that = this; \r\n\t\twindow.onscroll = function() {\r\n        //变量scrollTop是滚动条滚动时，距离顶部的距离\r\n            var scrollTop =\r\n                document.documentElement.scrollTop || document.body.scrollTop; //变量windowHeight是可视区的高度\r\n            var windowHeight =\r\n                document.documentElement.clientHeight || document.body.clientHeight; //变量scrollHeight是滚动条的总高度\r\n            var scrollHeight =\r\n                document.documentElement.scrollHeight || document.body.scrollHeight; //滚动条到底部的条件\r\n\r\n            if (scrollTop + windowHeight == scrollHeight) {\r\n\r\n                if (that.evaluatingList.length < that.evaluatingListTotal) {\r\n\t\t\t\t\tthat.pageNum++;\r\n                    that.appEvaluationInfoListFn();\r\n                } else if (that.evaluatingList.length == that.evaluatingListTotal) {\r\n                    that.loading2 = false;\r\n                }\r\n            }\r\n\t\t};\r\n\r\n        \r\n    },\r\n    methods: {\r\n\r\n        appEvaluationInfoList(){\r\n\t\t\tconst qs=require('qs');\r\n\t\t\tconst that = this;\r\n            that.informationList = [];\r\n            that.pageNum = 1;\r\n            that.loading = true;\r\n            that.loading2 = true;\r\n\t\t\tthat.withoutData = false;\r\n\t\t\tconst formData = {\r\n                // account_id:sessionStorage.account_id,\r\n                account_id:\"2249548551117622208\",\r\n\t\t\t\tpageNum:that.pageNum,\r\n                pageSize:that.pageSize,\r\n                applytime:that.timer\r\n\t\t\t};\r\n\t\t\tthat.$http.post('/api/getauduitList',formData,{\r\n                headers: {\r\n                    accessToken:sessionStorage.accessToken,\r\n                    schoolId:sessionStorage.schoolId,\r\n                    \"Content-Type\":\"application/json\"\r\n                }\r\n            })\r\n            .then(response=>{\r\n                if(response.data.total > 0)\r\n                {\r\n                    that.evaluatingListTotal = response.data.total;\r\n                    \r\n                    that.evaluatingList = response.data.rows;\r\n\r\n                    for (let index = 0; index < that.evaluatingList.length; index++) {\r\n                        const element = that.evaluatingList[index];\r\n                        element.state = 0;\r\n                        \r\n                    }\r\n\r\n                    if (that.evaluatingList.length < that.evaluatingListTotal) {\r\n                        that.loading = false;\r\n                    } else if (that.evaluatingList.length == that.evaluatingListTotal) {\r\n\r\n                        if (that.evaluatingList.length < 8) {\r\n                            that.loading = false;\r\n                        }\r\n                        that.loading2 = false;\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    that.evaluatingListTotal = response.data.total;\r\n                    that.evaluatingList = response.data.rows;\r\n                    that.loading = false;\r\n                    that.withoutData = true;\r\n                }\r\n            })  \r\n            .catch(function(error) {\r\n                console.log(error);\r\n            });\r\n\t\t},\r\n\t\tappEvaluationInfoListFn(){\r\n\t\t\tconst that = this;\r\n\t\t\tthat.loading = true;\r\n            that.loading2 = true;\r\n\t\t\tthat.withoutData = false;\r\n\t\t\tconst qs=require('qs');\r\n\t\t\r\n\t\t\tconst formData = {\r\n                account_id:sessionStorage.account_id,\r\n\t\t\t\tpageIndex:that.pageNum,\r\n                pageSize:that.pageSize,\r\n                applytime:that.timer\r\n\t\t\t};\r\n\t\t\tthat.$http.post('/api/getauduitList',formData,{\r\n                headers: {\r\n                    accessToken:sessionStorage.accessToken,\r\n                    schoolId:sessionStorage.schoolId,\r\n                    \"Content-Type\":\"application/json\"\r\n                }\r\n            })\r\n            .then(response=>{\r\n                if (that.evaluatingList.length <= that.evaluatingListTotal) {\r\n                    that.evaluatingList = that.evaluatingList.concat(\r\n                        response.data.rows\r\n                    );\r\n                    for (let index = 0; index < that.evaluatingList.length; index++) {\r\n                        const element = that.evaluatingList[index];\r\n                        element.state = 0;\r\n                    }\r\n                }\r\n            })  \r\n            .catch(function(error) {\r\n                console.log(error);\r\n            });\r\n        },\r\n\r\n\r\n        webClose(){\r\n            closeWeb()\r\n        },\r\n        webHistory(){\r\n            history.go(-1) \r\n        },\r\n\r\n        affirmSelect(index){\r\n            const that = this;\r\n            that.$store.state.audit = that.evaluatingList[index];\r\n            history.go(-1) \r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped=\"\">\r\n@import '../assets/scss/common.scss'; \r\n#Nominator{\r\n    .header{\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        padding: 0 .32rem;\r\n        height: .88rem;\r\n        position: fixed;\r\n        top: 0;\r\n        width: 100%;\r\n        background: #fff;\r\n        div{\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            span{\r\n                width: .48rem;\r\n                height: .48rem;\r\n                border-radius: 50%;\r\n                overflow: hidden;\r\n            }\r\n            .left{\r\n                margin-right: .32rem;\r\n            }\r\n            a{\r\n                width: 1.28rem;\r\n                font-size: .32rem;\r\n                color: #03A9F4;\r\n                text-align: right;\r\n            }\r\n        }\r\n        p{\r\n            flex: 1;\r\n            text-align: center;\r\n            font-size: .36rem;\r\n            font-weight: bold;\r\n            color: #333333;\r\n        }\r\n    }\r\n    ul{\r\n        padding-top: .88rem;\r\n        li{\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: flex-start;\r\n            background: #fff;\r\n            margin-top: .2rem;\r\n            padding: 0 .32rem;\r\n            height: 1.44rem;\r\n            span{\r\n                width: .8rem;\r\n                overflow: hidden;\r\n            }\r\n            p{\r\n                flex: 1;\r\n                font-size: .32rem;\r\n                color: #333333;\r\n                padding-left: .32rem;\r\n            }\r\n        }\r\n    }\r\n}\r\n  \r\n  \r\n\r\n</style>   "]}]}