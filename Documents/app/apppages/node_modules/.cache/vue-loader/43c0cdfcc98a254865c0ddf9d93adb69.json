{"remainingRequest":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangshuai/Documents/apppages/src/views/AddQuestionBank.vue?vue&type=style&index=0&id=880fdc7a&lang=scss&scoped=true&","dependencies":[{"path":"/Users/huangshuai/Documents/apppages/src/views/AddQuestionBank.vue","mtime":1544695139580},{"path":"/Users/huangshuai/Documents/apppages/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/postcss-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/sass-loader/lib/loader.js","mtime":1533139052000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/cache-loader/dist/cjs.js","mtime":1542800631269},{"path":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/*@import ''*/\r\n#QuestionBank {\r\n  h2 {\r\n    font-size: 0.4rem;\r\n    font-weight: normal;\r\n    color: #333333;\r\n    padding: 0.48rem 0.32rem 0.3rem;\r\n  }\r\n  .hint {\r\n    font-size: 0.28rem;\r\n    color: #8c9bdc;\r\n    padding: 0 0.32rem;\r\n  }\r\n  .questionBankContent {\r\n    padding: 0.64rem 0.32rem 1.4rem;\r\n    h3 {\r\n      font-size: 0.36rem;\r\n      color: #333333;\r\n      font-weight: normal;\r\n    }\r\n    a {\r\n      font-size: 0.28rem;\r\n      color: #999999;\r\n    }\r\n    ul {\r\n      padding: 0.48rem 0 0;\r\n      li {\r\n        padding-bottom: 0.48rem;\r\n        span {\r\n          display: block;\r\n          font-size: 0.3rem;\r\n          color: #333333;\r\n        }\r\n        p.select {\r\n          display: flex;\r\n          align-items: center;\r\n          padding-top: 0.16rem;\r\n          padding-left: 0.2rem;\r\n          em {\r\n            font-style: normal;\r\n            font-size: 0.28rem;\r\n            color: #15b4f1;\r\n          }\r\n          i {\r\n            width: 0.3rem;\r\n            transform: rotate(270deg);\r\n          }\r\n        }\r\n        .pitchOn {\r\n          div {\r\n            display: flex;\r\n            padding-top: 0.3rem;\r\n            flex-wrap: wrap;\r\n            p {\r\n              margin: 0 0.15rem;\r\n              b {\r\n                display: block;\r\n                margin: 0 auto;\r\n                width: 0.66rem;\r\n                height: 0.66rem;\r\n                border-radius: 50%;\r\n                overflow: hidden;\r\n              }\r\n              a {\r\n                text-align: center;\r\n                display: block;\r\n                font-size: 0.24rem;\r\n                color: #666666;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .count {\r\n      display: flex;\r\n      color: #f5a623;\r\n      padding-top: 0.64rem;\r\n      padding-left: 0.2rem;\r\n      font-size: 0.28rem;\r\n      p {\r\n        flex: 1;\r\n      }\r\n      span {\r\n        flex: 1;\r\n      }\r\n    }\r\n  }\r\n  .switchTheTopic {\r\n    position: fixed;\r\n    bottom: 0;\r\n    width: 100%;\r\n    height: 1rem;\r\n    background: #fff;\r\n    box-shadow: -1px 0 10px #e0e0e0;\r\n    .upOneLevel {\r\n      left: 0.32rem;\r\n      display: flex;\r\n      align-items: center;\r\n      height: 1rem;\r\n      top: 0;\r\n      position: absolute;\r\n      i {\r\n        width: 0.16rem;\r\n      }\r\n      a {\r\n        padding-left: 0.14rem;\r\n        font-size: 0.32rem;\r\n        color: #03a9f4;\r\n        &.active {\r\n          color: #bbbbbb;\r\n        }\r\n      }\r\n    }\r\n    .nextLevel {\r\n      right: 0.32rem;\r\n      display: flex;\r\n      align-items: center;\r\n      position: absolute;\r\n      height: 1rem;\r\n      top: 0;\r\n      i {\r\n        width: 0.16rem;\r\n      }\r\n      a {\r\n        padding-right: 0.14rem;\r\n        font-size: 0.32rem;\r\n        color: #03a9f4;\r\n        &.active {\r\n          color: #bbbbbb;\r\n        }\r\n      }\r\n    }\r\n    .submitBtn {\r\n      position: absolute;\r\n      top: 0;\r\n      right: 0.32rem;\r\n      height: 1rem;\r\n      display: flex;\r\n      align-items: center;\r\n      a {\r\n        width: 1.2rem;\r\n        height: 0.6rem;\r\n        line-height: 0.6rem;\r\n        text-align: center;\r\n        border-radius: 4px;\r\n        background: #15b4f1;\r\n        color: #fff;\r\n        font-size: 0.32rem;\r\n      }\r\n    }\r\n    p {\r\n      text-align: center;\r\n      font-size: 0.28rem;\r\n      color: #999999;\r\n      line-height: 1rem;\r\n    }\r\n  }\r\n  .submitSucceed {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    div {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      width: 100%;\r\n      height: 100%;\r\n      p {\r\n        width: 2.2rem;\r\n        height: 2.2rem;\r\n        background: rgba(0, 0, 0, 0.6);\r\n        border-radius: 4px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n        span {\r\n          width: 1.04rem;\r\n        }\r\n        a {\r\n          color: #fff;\r\n          font-size: 0.3rem;\r\n          padding-top: 0.18rem;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  .selectFigure{\r\n    position: fixed;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: #fff;\r\n    ul{\r\n      padding: 0 .32rem 1.4rem;\r\n      display: flex;\r\n      flex-wrap:wrap;\r\n      align-items: flex-start;\r\n      align-content: flex-start;\r\n      height: 100%;\r\n      overflow-y: scroll;\r\n      li{\r\n        margin-top: .3rem;\r\n        padding: 0 .42rem;\r\n        position: relative;\r\n        span{\r\n          width: 1.3rem;\r\n          margin: 0 auto;\r\n          height: 1.3rem;\r\n          display: block;\r\n          overflow: hidden;\r\n          border-radius: 50%;\r\n        }\r\n        p{\r\n          font-size: .32rem;\r\n          color: #666666;\r\n          text-align: center;\r\n        }\r\n        a{\r\n          display: block;\r\n          text-align: center;\r\n          font-size: .24rem;\r\n          color: #999999;\r\n        }\r\n        i{\r\n          position: absolute;\r\n          top: 0;\r\n          right: 0;\r\n          width: .44rem;\r\n          height: .44rem;\r\n        }\r\n      }\r\n    }\r\n\r\n    .save{\r\n      position: fixed;\r\n      bottom: 0;\r\n      width: 100%;\r\n      height: 1rem;\r\n      background: #fff;\r\n      box-shadow: -1px 0 10px #e0e0e0;\r\n      display: flex;\r\n      justify-content:flex-end;\r\n      align-items:center;\r\n      span{\r\n        width: 1.2rem;\r\n        height: .6rem;\r\n        text-align: center;\r\n        line-height: .6rem;\r\n        font-size: .32rem;\r\n        border-radius: 4px;\r\n        &.saveBtn{\r\n          background: #15B4F1;\r\n          border: 1px solid #15B4F1;\r\n          color: #fff;\r\n          margin-right: .32rem;\r\n        }\r\n        &.resetBtn{\r\n          border: 1px solid #E2E2E2;\r\n          color: #B2B2B2;\r\n          margin-right: .14rem;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n",{"version":3,"sources":["AddQuestionBank.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"AddQuestionBank.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div id=\"QuestionBank\">\r\n\t\t<h2>{{titles}}</h2>\r\n\t\t<p class=\"hint\">{{hint}}</p>\r\n\t\t<div class=\"questionBankContent\">\r\n\t\t\t<h3>{{aProblem.title}}</h3>\r\n\t\t\t<!-- <a>格式规范，教学设计合理，层次清楚</a> -->\r\n\t\t\t<ul>\r\n\t\t\t\t<li v-for=\"(item, index) in aProblem.optionlist\" >\r\n\t\t\t\t\t<span>（{{item.score}}分）{{item.title}}</span>\r\n\t\t\t\t\t<p class=\"select\" @click=\"selectFigureFn(index)\">\r\n\t\t\t\t\t\t<em>选择评测人员</em>\r\n\t\t\t\t\t\t<i><img src=\"../assets/images/icon_arrowsB1.png\" alt=\"\"></i>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<div class=\"pitchOn\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<p v-for=\"(itemName, indexs) in aProblemTeacherlist[index]\">\r\n\t\t\t\t\t\t\t\t<b><img :src=\"itemName.photo\" alt=\"\"></b>\r\n\t\t\t\t\t\t\t\t<a>{{itemName.name}}</a>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t\t<div class=\"count\">\r\n\t\t\t\t<p>总评测人：{{teacherlist.length}}人</p>\r\n\t\t\t\t<span>未评测人：{{differenceValue}}人</span>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"switchTheTopic\">\r\n\t\t\t<span class=\"upOneLevel\" @click=\"upQuestion\">\r\n\t\t\t\t<i v-if=\"index == 0\"><img src=\"../assets/images/icon_arrowsLeft1.png\" alt=\"\"></i>\r\n\t\t\t\t<i v-else><img src=\"../assets/images/icon_arrowsLeft2.png\" alt=\"\"></i>\r\n\t\t\t\t<a :class=\" index == 0 ? 'active': ''\">上一题</a>\r\n\t\t\t</span>\r\n\t\t\t<p>{{index+1}}/{{questionBanList.length}}</p>\t\r\n\t\t\t<span class=\"nextLevel\" v-if=\"submitBtnShow\" @click=\"nextQuestion\"> \r\n\t\t\t\t<a :class=\"index == questionBanList.length-1 ? 'active' : ''\">下一题</a>\r\n        <i v-if=\"index == questionBanList.length-1\"><img src=\"../assets/images/icon_arrowsRight1.png\" alt=\"\"></i>\r\n\t\t\t\t<i v-else><img src=\"../assets/images/icon_arrowsRight2.png\" alt=\"\"></i>\r\n\t\t\t</span>\r\n\t\t\t<span class=\"submitBtn\" v-else @click=\"submitData\"><a>提交</a></span>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"submitSucceed\" v-if=\"submitSucceedShow\">\r\n\t\t\t<div>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<span><img src=\"../assets/images/icon_submitSucceed.png\" alt=\"\"></span>\r\n\t\t\t\t\t<a>提交成功</a>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\r\n    <div class=\"selectFigure\" v-if=\"selectFigure\">\r\n      <ul>\r\n        <li \r\n          v-for=\"(item, index) of teacherlist\" \r\n          @click=\"pitchOnFigure(index)\" \r\n          v-if=\"item.aProblemIndex == undefined ||  item.aProblemIndex == aProblemIndex\"\r\n        >\r\n          <span><img :src=\"item.photo\" alt=\"\"></span>\r\n          <p>{{item.name}}</p>\r\n          <a>{{item.deptname}}</a>\r\n          <i v-if=\"item.state\"><img src=\"../assets/images/icon_pitchOn3.png\" alt=\"\"></i>\r\n          <i v-else><img src=\"../assets/images/icon_unselected2.png\" alt=\"\"></i>\r\n        </li>\r\n      </ul>\r\n\r\n      <div class=\"save\">\r\n        <!-- <span class=\"resetBtn\" @click=\"resetFn\">重置</span> -->\r\n        <span class=\"saveBtn\" @click=\"saveBtnFn\">保存</span>\r\n      </div>\r\n    </div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n//import xxx from 'xxx.vue'  //引入组建\r\n//import 'xxxx'  //引入JS\r\n\r\nexport default {\r\n  name: \"QuestionBank\",\r\n  data() {\r\n    return {\r\n      questionBankUrl:this.$store.state.evaluating,\r\n      titles: \"\",\r\n      hint: \"温馨提示：点击选择评测人员可针对不同的人测评\",\r\n      submitSucceedShow: false,\r\n      submitBtnShow: true,\r\n      index:0,\r\n      questionBanList:[],\r\n      selectFigure:false,\r\n      aProblem:[],\r\n      aProblemTeacherlist:[],\r\n      aProblemIndex:0,\r\n      teacherlist:[],\r\n      differenceValue:0,\r\n      alwaysQuestion:[],\r\n    };\r\n  },\r\n  components: {\r\n    // 组件实例化\r\n  },\r\n\r\n  mounted() {},\r\n  created() {\r\n    document.title = \"评测题库\";\r\n    setingTtitle('评测题库')\r\n\r\n    const that = this;\r\n    that.answer();\r\n\r\n  },\r\n  methods: {\r\n\r\n    \r\n    // 提交数据\r\n    submitData(){\r\n      const that = this;\r\n      if( that.differenceValue == 0 )\r\n      {\r\n        // 添加最后一题数据到数组中\r\n        that.alwaysQuestion[that.index] = {};\r\n        that.alwaysQuestion[that.index].aProblem = that.aProblem;\r\n        that.alwaysQuestion[that.index].aProblemTeacherlist = that.aProblemTeacherlist;\r\n        that.alwaysQuestion[that.index].teacherlist = JSON.parse(JSON.stringify(that.teacherlist));\r\n        // that.differenceValue = that.teacherlist.length;\r\n\r\n        // 数据重组\r\n        let optionidList = [];\r\n        let optionidListIndex = 0;\r\n\r\n        // 获取每一道题目\r\n        that.alwaysQuestion.map((item , index) => {\r\n          let elementOptionlist = item.aProblem.optionlist;\r\n          let elementAProblemTeacherlist = item.aProblemTeacherlist;\r\n\r\n          // 获取每一道题目下列选项进行拼装\r\n          elementOptionlist.map((itemName , idx) => {\r\n\r\n            let optionid = {\r\n              optionid : itemName.optionid,\r\n              teacherlist:[]\r\n            }\r\n            let teacherlists = []\r\n            optionidList.push(optionid)\r\n\r\n            // 判断下列选项是否有人选中\r\n            if(elementAProblemTeacherlist[idx] == undefined)\r\n            {\r\n              optionidList[optionidListIndex].teacherlist = [];\r\n            }\r\n            else\r\n            {\r\n              // 便利每一个选项下列选中的老师，添加进提交数组\r\n              elementAProblemTeacherlist[idx].map((itemNames , indexs) => {\r\n                let teacherlistText = {\r\n                  accountid : itemNames.account_id\r\n                }\r\n                teacherlists.push(teacherlistText)\r\n              })\r\n\r\n              optionidList[optionidListIndex].teacherlist = teacherlists\r\n            }\r\n            optionidListIndex++;\r\n            \r\n          })\r\n       \r\n\r\n\r\n        })\r\n\r\n        // 数据重组完成，进行提交\r\n\t\t\t  const qs=require('qs');\r\n        let formData = {\r\n          eid:sessionStorage.id,\r\n          userid:sessionStorage.uid,\r\n          optionlist:optionidList\r\n        }\r\n        let strFormData = {\r\n          str:JSON.stringify(formData)\r\n        };\r\n        that.$http.post(that.questionBankUrl+'api/Questionbank/QuestionTeacherOptionAdd',qs.stringify(strFormData))\r\n          .then(response=>{\r\n            if(response.data.errcode == 0)\r\n            {\r\n              that.$alert('提交成功', '', {\r\n                confirmButtonText: '确定',\r\n                callback: action => {\r\n                  that.$router.go(-1);\r\n                }\r\n              });\r\n            }\r\n            else\r\n            {\r\n              that.$alert(response.data.errmsg, '', {\r\n                confirmButtonText: '确定',\r\n                callback: action => {\r\n                  that.$router.go(0);\r\n                }\r\n              });\r\n            }\r\n            \r\n\r\n          }) \r\n          .catch(function(error) {\r\n            that.$alert('提交失败,已刷新请重试', '', {\r\n              confirmButtonText: '确定',\r\n              callback: action => {\r\n                that.$router.go(0);\r\n              }\r\n            });\r\n          });\r\n\r\n      }\r\n      else\r\n      {\r\n        that.$alert('还有未测评人', '', {});\r\n      }\r\n    \r\n    },\r\n\r\n\r\n    // 上一题\r\n    upQuestion(){\r\n      const that = this;\r\n      let differenceValue = 0;\r\n      if(that.index >= 0)\r\n      {\r\n        that.index = --that.index;\r\n        that.aProblemTeacherlist= that.alwaysQuestion[that.index].aProblemTeacherlist;\r\n        that.teacherlist = that.alwaysQuestion[that.index].teacherlist;\r\n        that.aProblemTeacherlist.map((item , index) => {\r\n          if(item != null)\r\n          {\r\n            item.map((item , index) => {\r\n              differenceValue++;\r\n            })\r\n          }\r\n        })\r\n        that.differenceValue = that.teacherlist.length - differenceValue \r\n        that.aProblemFn()\r\n\r\n        if(that.index < that.questionBanList.length-1)\r\n        {\r\n          that.submitBtnShow = true\r\n        }\r\n      }\r\n    },\r\n\r\n    // 下一题\r\n    nextQuestion(){\r\n      const that = this;\r\n      let differenceValue = 0;\r\n      if( that.differenceValue == 0 )\r\n      {\r\n        if(that.index < that.questionBanList.length-1)\r\n        {\r\n          that.alwaysQuestion[that.index] = {};\r\n          that.alwaysQuestion[that.index].aProblem = that.aProblem;\r\n          that.alwaysQuestion[that.index].aProblemTeacherlist = JSON.parse(JSON.stringify(that.aProblemTeacherlist));\r\n          that.alwaysQuestion[that.index].teacherlist = JSON.parse(JSON.stringify(that.teacherlist));\r\n          that.index = ++that.index;\r\n          that.aProblemFn();\r\n          that.aProblemTeacherlist= [];\r\n          if(that.alwaysQuestion[that.index] == undefined)\r\n          {\r\n            that.differenceValue = that.teacherlist.length;\r\n\r\n            for (var i = 0; i < that.teacherlist.length; i++) {\r\n              const element = that.teacherlist[i];\r\n              element.state = false;\r\n              element.aProblemIndex = undefined;\r\n            }\r\n          }\r\n          else\r\n          {\r\n            for (var i = 0; i < that.teacherlist.length; i++) {\r\n              const element = that.teacherlist[i];\r\n              element.state = that.alwaysQuestion[that.index].teacherlist[i].state;\r\n              element.aProblemIndex = that.alwaysQuestion[that.index].teacherlist[i].aProblemIndex;\r\n            }\r\n            that.aProblemTeacherlist= that.alwaysQuestion[that.index].aProblemTeacherlist;\r\n            that.aProblemTeacherlist.map((item , index) => {\r\n              if(item != null)\r\n              {\r\n                item.map((item , index) => {\r\n                  differenceValue++;\r\n                })\r\n              }\r\n            })\r\n            that.differenceValue = that.teacherlist.length - differenceValue \r\n\r\n          }\r\n          if(that.index >= that.questionBanList.length-1)\r\n          {\r\n            that.submitBtnShow = false\r\n          }\r\n        }\r\n      }\r\n      else\r\n      {\r\n        that.$alert('还有未测评人', '', {});\r\n      }\r\n    },\r\n\r\n    // 选择老师\r\n    saveBtnFn(){\r\n      const that = this;\r\n      let differenceValue = 0;\r\n      that.aProblemTeacherlist[that.aProblemIndex] = [];\r\n      \r\n      that.teacherlist.map((item , index) => {\r\n        if(item.state)\r\n        {\r\n          if(item.aProblemIndex == undefined || item.aProblemIndex == that.aProblemIndex)\r\n          {\r\n            item.aProblemIndex = that.aProblemIndex;\r\n            that.aProblemTeacherlist[that.aProblemIndex].push(item)\r\n          }\r\n        }\r\n        else\r\n        {\r\n          item.aProblemIndex = undefined;\r\n        }\r\n      })\r\n      that.selectFigure = false;\r\n      that.aProblemTeacherlist.map((item , index) => {\r\n        if(item != null)\r\n        {\r\n          item.map((item , index) => {\r\n            differenceValue++;\r\n          })\r\n        }\r\n        \r\n      })\r\n      that.differenceValue = that.teacherlist.length - differenceValue \r\n\r\n    },\r\n \r\n    // 弹出选择老师弹窗\r\n    selectFigureFn(idx){\r\n      const that = this;\r\n      that.selectFigure = true;\r\n      that.aProblemIndex = idx;\r\n    },\r\n\r\n    // 选中/取消老师\r\n    pitchOnFigure(idx){\r\n      const that = this;\r\n      if(that.teacherlist[idx].aProblemIndex == undefined || that.teacherlist[idx].aProblemIndex  == that.aProblemIndex)\r\n      {\r\n        that.teacherlist[idx].state = !that.teacherlist[idx].state;\r\n        that.teacherlist.splice(idx , 1 ,that.teacherlist[idx])\r\n      }\r\n    },\r\n\r\n    //初始数据\r\n    answer(){\r\n      const that = this;\r\n\t\t\tconst qs=require('qs');\r\n      const formData = {\r\n        id:sessionStorage.id,\r\n        qid:sessionStorage.qid\r\n      };\r\n      console.log(\"新增\")\r\n      that.$http.post(that.questionBankUrl+'api/Questionbank/AppQuestionbankList',qs.stringify(formData))\r\n\t\t\t\t.then(response=>{\r\n          that.questionBanList = response.data.data.itemlist\r\n          \r\n          that.teacherlist = response.data.data.teacherlist\r\n          that.teacherlist.map((item , index) => {\r\n            item.state = false\r\n          })\r\n          if(that.questionBanList.length <= 1)\r\n          {\r\n            that.submitBtnShow = false\r\n          }\r\n          that.differenceValue = that.teacherlist.length\r\n          that.titles = response.data.data.q_title\r\n          that.aProblemFn()\r\n\t\t\t\t}) \r\n\t\t\t\t.catch(function(error) {\r\n\t\t\t\t\tconsole.log(error);\r\n        });\r\n        \r\n    },\r\n\r\n    aProblemFn(){\r\n      const that = this;\r\n      that.aProblem = that.questionBanList[that.index];\r\n      that.aProblem.optionlist.map((item , index) => {\r\n        item.teacherlist = []\r\n      })\r\n    }\r\n\r\n\r\n\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped=\"\">\r\n/*@import ''*/\r\n#QuestionBank {\r\n  h2 {\r\n    font-size: 0.4rem;\r\n    font-weight: normal;\r\n    color: #333333;\r\n    padding: 0.48rem 0.32rem 0.3rem;\r\n  }\r\n  .hint {\r\n    font-size: 0.28rem;\r\n    color: #8c9bdc;\r\n    padding: 0 0.32rem;\r\n  }\r\n  .questionBankContent {\r\n    padding: 0.64rem 0.32rem 1.4rem;\r\n    h3 {\r\n      font-size: 0.36rem;\r\n      color: #333333;\r\n      font-weight: normal;\r\n    }\r\n    a {\r\n      font-size: 0.28rem;\r\n      color: #999999;\r\n    }\r\n    ul {\r\n      padding: 0.48rem 0 0;\r\n      li {\r\n        padding-bottom: 0.48rem;\r\n        span {\r\n          display: block;\r\n          font-size: 0.3rem;\r\n          color: #333333;\r\n        }\r\n        p.select {\r\n          display: flex;\r\n          align-items: center;\r\n          padding-top: 0.16rem;\r\n          padding-left: 0.2rem;\r\n          em {\r\n            font-style: normal;\r\n            font-size: 0.28rem;\r\n            color: #15b4f1;\r\n          }\r\n          i {\r\n            width: 0.3rem;\r\n            transform: rotate(270deg);\r\n          }\r\n        }\r\n        .pitchOn {\r\n          div {\r\n            display: flex;\r\n            padding-top: 0.3rem;\r\n            flex-wrap: wrap;\r\n            p {\r\n              margin: 0 0.15rem;\r\n              b {\r\n                display: block;\r\n                margin: 0 auto;\r\n                width: 0.66rem;\r\n                height: 0.66rem;\r\n                border-radius: 50%;\r\n                overflow: hidden;\r\n              }\r\n              a {\r\n                text-align: center;\r\n                display: block;\r\n                font-size: 0.24rem;\r\n                color: #666666;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .count {\r\n      display: flex;\r\n      color: #f5a623;\r\n      padding-top: 0.64rem;\r\n      padding-left: 0.2rem;\r\n      font-size: 0.28rem;\r\n      p {\r\n        flex: 1;\r\n      }\r\n      span {\r\n        flex: 1;\r\n      }\r\n    }\r\n  }\r\n  .switchTheTopic {\r\n    position: fixed;\r\n    bottom: 0;\r\n    width: 100%;\r\n    height: 1rem;\r\n    background: #fff;\r\n    box-shadow: -1px 0 10px #e0e0e0;\r\n    .upOneLevel {\r\n      left: 0.32rem;\r\n      display: flex;\r\n      align-items: center;\r\n      height: 1rem;\r\n      top: 0;\r\n      position: absolute;\r\n      i {\r\n        width: 0.16rem;\r\n      }\r\n      a {\r\n        padding-left: 0.14rem;\r\n        font-size: 0.32rem;\r\n        color: #03a9f4;\r\n        &.active {\r\n          color: #bbbbbb;\r\n        }\r\n      }\r\n    }\r\n    .nextLevel {\r\n      right: 0.32rem;\r\n      display: flex;\r\n      align-items: center;\r\n      position: absolute;\r\n      height: 1rem;\r\n      top: 0;\r\n      i {\r\n        width: 0.16rem;\r\n      }\r\n      a {\r\n        padding-right: 0.14rem;\r\n        font-size: 0.32rem;\r\n        color: #03a9f4;\r\n        &.active {\r\n          color: #bbbbbb;\r\n        }\r\n      }\r\n    }\r\n    .submitBtn {\r\n      position: absolute;\r\n      top: 0;\r\n      right: 0.32rem;\r\n      height: 1rem;\r\n      display: flex;\r\n      align-items: center;\r\n      a {\r\n        width: 1.2rem;\r\n        height: 0.6rem;\r\n        line-height: 0.6rem;\r\n        text-align: center;\r\n        border-radius: 4px;\r\n        background: #15b4f1;\r\n        color: #fff;\r\n        font-size: 0.32rem;\r\n      }\r\n    }\r\n    p {\r\n      text-align: center;\r\n      font-size: 0.28rem;\r\n      color: #999999;\r\n      line-height: 1rem;\r\n    }\r\n  }\r\n  .submitSucceed {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    div {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      width: 100%;\r\n      height: 100%;\r\n      p {\r\n        width: 2.2rem;\r\n        height: 2.2rem;\r\n        background: rgba(0, 0, 0, 0.6);\r\n        border-radius: 4px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n        span {\r\n          width: 1.04rem;\r\n        }\r\n        a {\r\n          color: #fff;\r\n          font-size: 0.3rem;\r\n          padding-top: 0.18rem;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n\r\n  .selectFigure{\r\n    position: fixed;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: #fff;\r\n    ul{\r\n      padding: 0 .32rem 1.4rem;\r\n      display: flex;\r\n      flex-wrap:wrap;\r\n      align-items: flex-start;\r\n      align-content: flex-start;\r\n      height: 100%;\r\n      overflow-y: scroll;\r\n      li{\r\n        margin-top: .3rem;\r\n        padding: 0 .42rem;\r\n        position: relative;\r\n        span{\r\n          width: 1.3rem;\r\n          margin: 0 auto;\r\n          height: 1.3rem;\r\n          display: block;\r\n          overflow: hidden;\r\n          border-radius: 50%;\r\n        }\r\n        p{\r\n          font-size: .32rem;\r\n          color: #666666;\r\n          text-align: center;\r\n        }\r\n        a{\r\n          display: block;\r\n          text-align: center;\r\n          font-size: .24rem;\r\n          color: #999999;\r\n        }\r\n        i{\r\n          position: absolute;\r\n          top: 0;\r\n          right: 0;\r\n          width: .44rem;\r\n          height: .44rem;\r\n        }\r\n      }\r\n    }\r\n\r\n    .save{\r\n      position: fixed;\r\n      bottom: 0;\r\n      width: 100%;\r\n      height: 1rem;\r\n      background: #fff;\r\n      box-shadow: -1px 0 10px #e0e0e0;\r\n      display: flex;\r\n      justify-content:flex-end;\r\n      align-items:center;\r\n      span{\r\n        width: 1.2rem;\r\n        height: .6rem;\r\n        text-align: center;\r\n        line-height: .6rem;\r\n        font-size: .32rem;\r\n        border-radius: 4px;\r\n        &.saveBtn{\r\n          background: #15B4F1;\r\n          border: 1px solid #15B4F1;\r\n          color: #fff;\r\n          margin-right: .32rem;\r\n        }\r\n        &.resetBtn{\r\n          border: 1px solid #E2E2E2;\r\n          color: #B2B2B2;\r\n          margin-right: .14rem;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n</style>"]}]}