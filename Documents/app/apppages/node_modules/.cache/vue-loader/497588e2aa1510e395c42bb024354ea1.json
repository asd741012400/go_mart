{"remainingRequest":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangshuai/Documents/apppages/src/views/AndroidAcceptOrganization.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huangshuai/Documents/apppages/src/views/AndroidAcceptOrganization.vue","mtime":1544781756162},{"path":"/Users/huangshuai/Documents/apppages/node_modules/cache-loader/dist/cjs.js","mtime":1542800631269},{"path":"/Users/huangshuai/Documents/apppages/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangshuai/Documents/apppages/node_modules/cache-loader/dist/cjs.js","mtime":1542800631269},{"path":"/Users/huangshuai/Documents/apppages/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\n//import xxx from 'xxx.vue'  //引入组建\r\n//import 'xxxx'  //引入JS\r\n\r\nexport default {\r\n\t\r\n    name: 'AcceptOrganization',\r\n    data(){\r\n        return {\r\n            getnVeducloudUrl:this.$store.state.veducloud,\r\n            getnEschoolUrl:this.$store.state.eschool,\r\n            pageNum:1,\r\n            AcceptOrganizationList:[],\r\n            AcceptOrganizationListTotal:0,\r\n            loading:false,\r\n            loading2:false,\r\n            withoutData: false,\r\n            searchText:\"\",\r\n            pagesUrl:\"\",\r\n            btnShow:true,\r\n        }\r\n    },\r\n    components:{\r\n        // 组件实例化\r\n    },\r\n    watch:{\r\n        searchText(val, oldVal){//普通的watch监听\r\n            if(val == \"\")\r\n            {\r\n                this.acceptOrganizationListFn()\r\n            }\r\n        },\r\n       \r\n    },\r\n    mounted(){\r\n        const that = this;\r\n        that.acceptOrganizationListFn();\r\n    },\r\n    created(){\r\n    \tdocument.title=\"选择接收组织\";\r\n        document.body.style.background = \"#F8F8F8\";\r\n        const that = this;\r\n\r\n        window.onscroll = function() {\r\n            //变量scrollTop是滚动条滚动时，距离顶部的距离\r\n            var scrollTop =\r\n                document.documentElement.scrollTop || document.body.scrollTop; //变量windowHeight是可视区的高度\r\n            var windowHeight =\r\n                document.documentElement.clientHeight || document.body.clientHeight; //变量scrollHeight是滚动条的总高度\r\n            var scrollHeight =\r\n                document.documentElement.scrollHeight || document.body.scrollHeight; //滚动条到底部的条件\r\n            if (scrollTop + windowHeight == scrollHeight) {\r\n                if (that.AcceptOrganizationList.length < that.AcceptOrganizationListTotal) {\r\n                    that.pageNum++;\r\n                    that.acceptOrganizationListPushFn();\r\n                  \r\n                } else if (that.AcceptOrganizationList.length == that.AcceptOrganizationListTotal) {\r\n                    \r\n\r\n                    that.loading2 = false;\r\n                    setTimeout(function() {\r\n                        that.loading = false;\r\n                    },1000)\r\n\r\n                }\r\n            }\r\n        };\r\n        that.common.setingTtitle('选择接收组织')\r\n\r\n    },\r\n    methods: {\r\n        \r\n        submitBtnFn(){\r\n            const that = this;\r\n            var arr = [];\r\n            that.AcceptOrganizationList.map( (item , index) => {\r\n                if(item.state == 1)\r\n                {\r\n                    arr.push(item.groupId)\r\n                }\r\n            })\r\n            //发布/接收阻止跳转页面\r\n            sessionStorage.setItem(\"sReceptionText\", arr);\r\n            sessionStorage.setItem(\"addReceptionText\", arr);\r\n\r\n            that.$router.push({\r\n                name: that.$route.params.pagesUrl,\r\n            });\r\n        },\r\n        selectedElementsFn(index){\r\n            const that = this;\r\n            if(that.AcceptOrganizationList[index].state != 1)\r\n            {\r\n                that.AcceptOrganizationList[index].state = 1;\r\n            }\r\n            else\r\n            {\r\n                that.AcceptOrganizationList[index].state = 0;\r\n            }\r\n            \r\n        },\r\n        acceptOrganizationListFn: function() {\r\n            var that = this;\r\n            that.AcceptOrganizationList = [];\r\n            that.pageNum = 1;\r\n            that.loading = true;\r\n            that.loading2 = true;\r\n            that.withoutData = false;\r\n            that\r\n            .$http({\r\n                method: \"GET\",\r\n                url: that.getnVeducloudUrl + \"api/uc/v0.1/groups\",\r\n                headers: {\r\n                    accessToken:sessionStorage.accessToken,\r\n                    schoolId:sessionStorage.schoolId\r\n                },\r\n                params: {\r\n                    pageNum: that.pageNum,\r\n                    pageSize:100\r\n                }\r\n            })\r\n            .then(function(response) {\r\n                if(response.data.total > 0)\r\n                {\r\n                    that.AcceptOrganizationListTotal = response.data.total;\r\n                    response.data.rows.map((item , index) => {\r\n                        item.oneText = item.name.substring(0,1);\r\n                        item.state = 0\r\n                    })\r\n                    that.AcceptOrganizationList = response.data.rows;\r\n\r\n                    if (that.AcceptOrganizationList.length < that.AcceptOrganizationListTotal) {\r\n                        that.loading = false;\r\n                    } else if (that.AcceptOrganizationList.length == that.AcceptOrganizationListTotal) {\r\n                        if (that.AcceptOrganizationList.length < 5) {\r\n                            that.loading = false;\r\n                        }\r\n                        that.loading2 = false;\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    that.loading = false;\r\n                    that.withoutData = true;\r\n                }\r\n            })\r\n            .catch(function(error) {\r\n                console.log(error);\r\n            });\r\n        },\r\n\r\n        acceptOrganizationListPushFn: function(id) {\r\n            var that = this;\r\n            that.loading = true;\r\n            that\r\n            .$http({\r\n                method: \"GET\",\r\n                url: that.getnVeducloudUrl + \"api/uc/v0.1/groups\",\r\n                headers: {\r\n                    accessToken:sessionStorage.accessToken,\r\n                    schoolId:sessionStorage.schoolId\r\n                },\r\n                params: {\r\n                    pageNum: that.pageNum,\r\n                }\r\n            })\r\n            .then(function(response) {\r\n                if (that.AcceptOrganizationList.length <= that.AcceptOrganizationListTotal) {\r\n                    response.data.rows.map((item , index) => {\r\n                        item.oneText = item.name.substring(0,1);\r\n                        item.state = 0\r\n                    })\r\n                    that.AcceptOrganizationList = that.AcceptOrganizationList.concat(\r\n                        response.data.rows\r\n                    );\r\n                }\r\n            })\r\n            .catch(function(error) {\r\n                console.log(error);\r\n            });\r\n        },\r\n        searchFun(ev){\r\n            const that = this;\r\n            if(ev.keyCode == 13){\r\n                that\r\n                .$http({\r\n                    method: \"GET\",\r\n                    url: that.getnVeducloudUrl  + \"api/uc/v0.1/groups\",\r\n                    headers: {\r\n                        accessToken:sessionStorage.accessToken,\r\n                        schoolId:sessionStorage.schoolId\r\n                    },\r\n                    params: {\r\n                        keyword:that.searchText,\r\n                    }\r\n                })\r\n                .then(function(response) {\r\n                    if(response.data.total > 0)\r\n                    {\r\n                        that.AcceptOrganizationListTotal = response.data.total;\r\n                        response.data.rows.map((item , index) => {\r\n                            item.oneText = item.name.substring(0,1);\r\n                            item.state = 0\r\n                        })\r\n                        that.AcceptOrganizationList = response.data.rows;\r\n\r\n                        if (that.AcceptOrganizationList.length < that.AcceptOrganizationListTotal) {\r\n                            that.loading = false;\r\n                        } else if (that.AcceptOrganizationList.length == that.AcceptOrganizationListTotal) {\r\n                            if (that.AcceptOrganizationList.length < 5) {\r\n                                that.loading = false;\r\n                            }\r\n                            that.loading2 = false;\r\n                        }\r\n                    }\r\n                    else\r\n                    {\r\n                        that.btnShow = false;\r\n                        that.loading = false;\r\n                        that.withoutData = true;\r\n                        that.AcceptOrganizationList = response.data.rows;\r\n                        that.AcceptOrganizationListTotal = response.data.total;\r\n                    }\r\n                })\r\n                .catch(function(error) {\r\n                    console.log(error);\r\n                });\r\n            }\r\n        }\r\n    },\r\n}\r\n",{"version":3,"sources":["AndroidAcceptOrganization.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AndroidAcceptOrganization.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n\t<div id=\"AcceptOrganization\">\r\n        <div class=\"search\">\r\n            <div>\r\n                <i><img src=\"../assets/images/icon_search.png\" alt=\"\"></i>\r\n                <input type=\"search\" placeholder=\"搜索\" v-model=\"searchText\" @keyup=\"searchFun\">\r\n            </div>\r\n        </div>\r\n        <ul style=\"overflow-y:scroll\">\r\n            <li v-for=\"(item, index) in AcceptOrganizationList\" @click=\"selectedElementsFn(index)\">\r\n                <div class=\"menuTle\">\r\n                    <a v-if=\"item.state == 0\"><img src=\"../assets/images/icon_pitchOn5.png\" alt=\"\"></a>\r\n                    <a v-else><img src=\"../assets/images/icon_pitchOn4.png\" alt=\"\"></a>\r\n                    <span>{{item.oneText}}</span>\r\n                    <b>{{item.name}}</b>\r\n                    <i><img src=\"../assets/images/icon_arrowsR3.png\" alt=\"\"></i>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n\r\n        <div class=\"loding\" v-if=\"loading\">\r\n\t    \t<div class=\"lodingText\" v-if=\"loading2\">\r\n\t    \t\t<i class=\"el-icon-loading activeT\"></i>\r\n\t    \t\t<span>拼命加载中...</span>\r\n\t    \t</div>\r\n\t    \t<div class=\"lodingEnd\" v-else>\r\n\t    \t\t<span>数据加载完毕</span>\r\n\t    \t</div>\r\n\t    </div>\r\n        <div class=\"withoutData\" v-if=\"withoutData\">\r\n            <div>\r\n                <span><img src=\"../assets/images/withoutData.png\" alt=\"\"></span>\r\n                <p>未找到相关信息~</p>\r\n            </div>\r\n        </div>\r\n        <div class=\"submitBtn\" @click=\"submitBtnFn\" v-if=\"btnShow\"><div>提交</div></div>\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n//import xxx from 'xxx.vue'  //引入组建\r\n//import 'xxxx'  //引入JS\r\n\r\nexport default {\r\n\t\r\n    name: 'AcceptOrganization',\r\n    data(){\r\n        return {\r\n            getnVeducloudUrl:this.$store.state.veducloud,\r\n            getnEschoolUrl:this.$store.state.eschool,\r\n            pageNum:1,\r\n            AcceptOrganizationList:[],\r\n            AcceptOrganizationListTotal:0,\r\n            loading:false,\r\n            loading2:false,\r\n            withoutData: false,\r\n            searchText:\"\",\r\n            pagesUrl:\"\",\r\n            btnShow:true,\r\n        }\r\n    },\r\n    components:{\r\n        // 组件实例化\r\n    },\r\n    watch:{\r\n        searchText(val, oldVal){//普通的watch监听\r\n            if(val == \"\")\r\n            {\r\n                this.acceptOrganizationListFn()\r\n            }\r\n        },\r\n       \r\n    },\r\n    mounted(){\r\n        const that = this;\r\n        that.acceptOrganizationListFn();\r\n    },\r\n    created(){\r\n    \tdocument.title=\"选择接收组织\";\r\n        document.body.style.background = \"#F8F8F8\";\r\n        const that = this;\r\n\r\n        window.onscroll = function() {\r\n            //变量scrollTop是滚动条滚动时，距离顶部的距离\r\n            var scrollTop =\r\n                document.documentElement.scrollTop || document.body.scrollTop; //变量windowHeight是可视区的高度\r\n            var windowHeight =\r\n                document.documentElement.clientHeight || document.body.clientHeight; //变量scrollHeight是滚动条的总高度\r\n            var scrollHeight =\r\n                document.documentElement.scrollHeight || document.body.scrollHeight; //滚动条到底部的条件\r\n            if (scrollTop + windowHeight == scrollHeight) {\r\n                if (that.AcceptOrganizationList.length < that.AcceptOrganizationListTotal) {\r\n                    that.pageNum++;\r\n                    that.acceptOrganizationListPushFn();\r\n                  \r\n                } else if (that.AcceptOrganizationList.length == that.AcceptOrganizationListTotal) {\r\n                    \r\n\r\n                    that.loading2 = false;\r\n                    setTimeout(function() {\r\n                        that.loading = false;\r\n                    },1000)\r\n\r\n                }\r\n            }\r\n        };\r\n        that.common.setingTtitle('选择接收组织')\r\n\r\n    },\r\n    methods: {\r\n        \r\n        submitBtnFn(){\r\n            const that = this;\r\n            var arr = [];\r\n            that.AcceptOrganizationList.map( (item , index) => {\r\n                if(item.state == 1)\r\n                {\r\n                    arr.push(item.groupId)\r\n                }\r\n            })\r\n            //发布/接收阻止跳转页面\r\n            sessionStorage.setItem(\"sReceptionText\", arr);\r\n            sessionStorage.setItem(\"addReceptionText\", arr);\r\n\r\n            that.$router.push({\r\n                name: that.$route.params.pagesUrl,\r\n            });\r\n        },\r\n        selectedElementsFn(index){\r\n            const that = this;\r\n            if(that.AcceptOrganizationList[index].state != 1)\r\n            {\r\n                that.AcceptOrganizationList[index].state = 1;\r\n            }\r\n            else\r\n            {\r\n                that.AcceptOrganizationList[index].state = 0;\r\n            }\r\n            \r\n        },\r\n        acceptOrganizationListFn: function() {\r\n            var that = this;\r\n            that.AcceptOrganizationList = [];\r\n            that.pageNum = 1;\r\n            that.loading = true;\r\n            that.loading2 = true;\r\n            that.withoutData = false;\r\n            that\r\n            .$http({\r\n                method: \"GET\",\r\n                url: that.getnVeducloudUrl + \"api/uc/v0.1/groups\",\r\n                headers: {\r\n                    accessToken:sessionStorage.accessToken,\r\n                    schoolId:sessionStorage.schoolId\r\n                },\r\n                params: {\r\n                    pageNum: that.pageNum,\r\n                    pageSize:100\r\n                }\r\n            })\r\n            .then(function(response) {\r\n                if(response.data.total > 0)\r\n                {\r\n                    that.AcceptOrganizationListTotal = response.data.total;\r\n                    response.data.rows.map((item , index) => {\r\n                        item.oneText = item.name.substring(0,1);\r\n                        item.state = 0\r\n                    })\r\n                    that.AcceptOrganizationList = response.data.rows;\r\n\r\n                    if (that.AcceptOrganizationList.length < that.AcceptOrganizationListTotal) {\r\n                        that.loading = false;\r\n                    } else if (that.AcceptOrganizationList.length == that.AcceptOrganizationListTotal) {\r\n                        if (that.AcceptOrganizationList.length < 5) {\r\n                            that.loading = false;\r\n                        }\r\n                        that.loading2 = false;\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    that.loading = false;\r\n                    that.withoutData = true;\r\n                }\r\n            })\r\n            .catch(function(error) {\r\n                console.log(error);\r\n            });\r\n        },\r\n\r\n        acceptOrganizationListPushFn: function(id) {\r\n            var that = this;\r\n            that.loading = true;\r\n            that\r\n            .$http({\r\n                method: \"GET\",\r\n                url: that.getnVeducloudUrl + \"api/uc/v0.1/groups\",\r\n                headers: {\r\n                    accessToken:sessionStorage.accessToken,\r\n                    schoolId:sessionStorage.schoolId\r\n                },\r\n                params: {\r\n                    pageNum: that.pageNum,\r\n                }\r\n            })\r\n            .then(function(response) {\r\n                if (that.AcceptOrganizationList.length <= that.AcceptOrganizationListTotal) {\r\n                    response.data.rows.map((item , index) => {\r\n                        item.oneText = item.name.substring(0,1);\r\n                        item.state = 0\r\n                    })\r\n                    that.AcceptOrganizationList = that.AcceptOrganizationList.concat(\r\n                        response.data.rows\r\n                    );\r\n                }\r\n            })\r\n            .catch(function(error) {\r\n                console.log(error);\r\n            });\r\n        },\r\n        searchFun(ev){\r\n            const that = this;\r\n            if(ev.keyCode == 13){\r\n                that\r\n                .$http({\r\n                    method: \"GET\",\r\n                    url: that.getnVeducloudUrl  + \"api/uc/v0.1/groups\",\r\n                    headers: {\r\n                        accessToken:sessionStorage.accessToken,\r\n                        schoolId:sessionStorage.schoolId\r\n                    },\r\n                    params: {\r\n                        keyword:that.searchText,\r\n                    }\r\n                })\r\n                .then(function(response) {\r\n                    if(response.data.total > 0)\r\n                    {\r\n                        that.AcceptOrganizationListTotal = response.data.total;\r\n                        response.data.rows.map((item , index) => {\r\n                            item.oneText = item.name.substring(0,1);\r\n                            item.state = 0\r\n                        })\r\n                        that.AcceptOrganizationList = response.data.rows;\r\n\r\n                        if (that.AcceptOrganizationList.length < that.AcceptOrganizationListTotal) {\r\n                            that.loading = false;\r\n                        } else if (that.AcceptOrganizationList.length == that.AcceptOrganizationListTotal) {\r\n                            if (that.AcceptOrganizationList.length < 5) {\r\n                                that.loading = false;\r\n                            }\r\n                            that.loading2 = false;\r\n                        }\r\n                    }\r\n                    else\r\n                    {\r\n                        that.btnShow = false;\r\n                        that.loading = false;\r\n                        that.withoutData = true;\r\n                        that.AcceptOrganizationList = response.data.rows;\r\n                        that.AcceptOrganizationListTotal = response.data.total;\r\n                    }\r\n                })\r\n                .catch(function(error) {\r\n                    console.log(error);\r\n                });\r\n            }\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped=\"\">\r\n@import '../assets/scss/common.scss'; \r\n#AcceptOrganization{\r\n    .search{\r\n        background: #F8F8F8;\r\n        overflow: hidden;\r\n        height: .88rem;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        position: fixed;\r\n        width: 100%;\r\n        div{\r\n            background: #fff;\r\n            border-radius: 5px;\r\n            display: flex;\r\n            height: .6rem;\r\n            width: 7.18rem;\r\n            align-items: center;\r\n            i{\r\n                width: .32rem;\r\n                height: .32rem;\r\n                margin-right: .14rem;\r\n                margin-left: .34rem;\r\n            }\r\n            input{\r\n                height: .6rem;\r\n                flex: 1;\r\n                font-size: .28rem;\r\n            }\r\n        }\r\n    }\r\n    ul{\r\n        padding-top: .88rem;\r\n        li{\r\n            .menuTle{\r\n                height: 1.2rem;\r\n                background: #fff;\r\n                padding: 0 .32rem;\r\n                display: flex;\r\n                align-items: center;\r\n                border-bottom:1px solid #EEEEEE;\r\n                a{\r\n                    width: .36rem;\r\n                    height: .36rem;\r\n                    margin-right: .48rem;\r\n                }\r\n                span{\r\n                    width: .74rem;\r\n                    height: .74rem;\r\n                    text-align: center;\r\n                    line-height: .74rem;\r\n                    font-size: .32rem;\r\n                    color: #FFFFFF;\r\n                    background: #03A9F4;\r\n                    border-radius: 50%;\r\n                    margin-right: .32rem;\r\n                }\r\n                b{\r\n                    font-weight: normal;\r\n                    font-size: .32rem;\r\n                    color: #333333;\r\n                    flex: 1;\r\n                }\r\n                i{\r\n                    width: .4rem;\r\n                }\r\n            }\r\n           \r\n        }\r\n    }\r\n    .submitBtn{\r\n        height: .88rem;\r\n        text-align: center;\r\n        line-height: .88rem;\r\n        width: 100%;\r\n        color: #fff;\r\n        font-size: .32rem;\r\n        div{\r\n            background: #409EFF;\r\n        }\r\n    }\r\n}\r\n  \r\n  \r\n\r\n</style>   "]}]}